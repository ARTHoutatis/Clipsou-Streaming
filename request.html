<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
  <title>Proposer un film – Clipsou Streaming</title>
  <link rel="icon" href="images/favicon.webp" type="image/webp">
  <link rel="stylesheet" href="request.css?v=1">
</head>
<body>
  <main class="container" id="app">
    <div class="header">
      <h1>📽️ Proposer un film</h1>
      <a href="/" class="btn secondary back-btn">← Retour à l'accueil</a>
    </div>

    <!-- Pending request notification -->
    <div id="pendingRequestNotice" class="notice notice-info" hidden>
      <strong>📋 Demande en cours</strong>
      <p>Vous avez une demande en attente de validation par les administrateurs.</p>
      <div class="pending-details" id="pendingDetails"></div>
      <button type="button" id="cancelRequestBtn" class="btn danger">Annuler ma demande</button>
    </div>

    <!-- Stepper Navigation -->
    <div class="stepper-container" id="stepperContainer">
      <div class="stepper">
        <div class="step active" data-step="1">
          <div class="step-circle">1</div>
          <div class="step-label">Conditions</div>
        </div>
        <div class="step-line"></div>
        <div class="step" data-step="2">
          <div class="step-circle">2</div>
          <div class="step-label">Guide</div>
        </div>
        <div class="step-line"></div>
        <div class="step" data-step="3">
          <div class="step-circle">3</div>
          <div class="step-label">Formulaire</div>
        </div>
      </div>
    </div>

    <!-- Slides Container -->
    <div class="slides-container">
      <!-- Slide 1: Terms and Conditions -->
      <section class="form-section terms-section slide active" data-slide="1">
        <h2>📜 Conditions d'utilisation</h2>
      <div class="terms-content">
        <p class="terms-intro">Avant de soumettre votre demande, veuillez lire attentivement et respecter les conditions suivantes :</p>
        <ul class="terms-list">
          <li>
            <strong>🎬 Films de votre chaîne uniquement</strong>
            <p>Vous ne pouvez publier que des films provenant de VOTRE propre chaîne YouTube. Ne publiez pas de contenu appartenant à d'autres créateurs sans leur autorisation écrite explicite.</p>
          </li>
          <li>
            <strong>⚖️ Responsabilité légale</strong>
            <p><strong style="color: #ef4444;">IMPORTANT :</strong> En l'absence de système de vérification automatique, vous êtes SEUL RESPONSABLE en cas de publication du film d'un autre YouTubeur sans autorisation. Si le créateur original porte plainte, la responsabilité légale vous incombe entièrement. Clipsou Streaming décline toute responsabilité en cas de litige.</p>
          </li>
          <li>
            <strong>✅ Remplissez tous les champs</strong>
            <p>Assurez-vous de compléter tous les champs requis du formulaire avec des informations exactes et complètes.</p>
          </li>
          <li>
            <strong>🚫 Pas de trolling</strong>
            <p>Les demandes fantaisistes, offensantes ou non sérieuses seront automatiquement rejetées et pourront entraîner un blocage.</p>
          </li>
          <li>
            <strong>🎥 Films uniquement</strong>
            <p>Cette plateforme est dédiée aux FILMS. Ne soumettez pas de vidéos courtes, sketches, vlogs ou autres contenus non-cinématographiques.</p>
          </li>
          <li>
            <strong>⏱️ Une demande par jour</strong>
            <p>Vous êtes limité à une seule demande par période de 24 heures. Vous pouvez annuler votre demande actuelle pour en soumettre une nouvelle.</p>
          </li>
        </ul>
        <div class="terms-accept">
          <label class="checkbox-label">
            <input type="checkbox" id="termsAccepted" required>
            <span>J'ai lu et j'accepte les conditions d'utilisation ci-dessus</span>
          </label>
          <div id="termsError" class="error-message" hidden>
            ⚠️ Vous devez accepter les conditions d'utilisation pour soumettre votre demande.
          </div>
        </div>
        <div class="slide-nav">
          <button type="button" class="btn primary" id="nextStep1">Suivant →</button>
        </div>
      </div>
      </section>

      <!-- Slide 2: Tutorial Section -->
      <section class="form-section tutorial-section slide" data-slide="2">
        <h2>📚 Guide visuel des images</h2>
      <p class="tutorial-intro">Voici un exemple de carte de film pour vous aider à comprendre le positionnement des différentes images :</p>
      <div class="tutorial-card-wrapper">
        <div class="tutorial-card">
          <div class="tutorial-card-media">
            <div class="tutorial-overlay">Affiche Portrait</div>
            <div class="tutorial-label portrait">Format 9:12 (vertical)</div>
            <div class="tutorial-badge-overlay">
              <div class="tutorial-badge">Badge Studio</div>
            </div>
          </div>
          <div class="tutorial-card-content">
            <div class="tutorial-rating">Note du film</div>
          </div>
        </div>
        <div class="tutorial-fiche">
          <div class="tutorial-fiche-image">
            <div class="tutorial-overlay">Image Fiche</div>
            <div class="tutorial-label landscape">Format 16:9 (paysage)</div>
          </div>
          <p class="tutorial-note">Cette image s'affiche sur la page détaillée du film</p>
        </div>
      </div>
      <div class="tutorial-tips">
        <h3>💡 Conseils pour vos images</h3>
        <ul>
          <li><strong>Affiche Portrait (9:12)</strong> - Utilisée sur les cartes de la page d'accueil. Taille recommandée : 540x720px minimum</li>
          <li><strong>Image Fiche (16:9)</strong> - Affichée sur la page de détail du film. Taille recommandée : 1920x1080px</li>
          <li><strong>Badge Studio</strong> - Logo de votre chaîne/studio pour différencier les créateurs. Fond transparent recommandé (.png). Taille : 200x80px</li>
          <li>Formats acceptés : JPG, PNG, WebP. Poids max : 10MB par image</li>
        </ul>
      </div>
      <div class="slide-nav">
        <button type="button" class="btn secondary" id="prevStep2">← Précédent</button>
        <button type="button" class="btn primary" id="nextStep2">Suivant →</button>
      </div>
      </section>

      <!-- Slide 3: Request Form -->
      <section class="form-section slide" id="requestFormSection" data-slide="3">
        <h2>🎬 Informations du film</h2>
      <form id="requestForm">
        <div class="grid">
          <label>
            <span>Titre du film <span class="required">*</span></span>
            <input type="text" id="title" required disabled>
          </label>
          <label>
            <span>Type <span class="required">*</span></span>
            <select id="type" required disabled>
              <option value="">Sélectionner...</option>
              <option value="film">Film</option>
              <option value="documentaire">Documentaire</option>
            </select>
          </label>
        </div>

        <div class="grid">
          <label>
            <span>Genre 1 <span class="required">*</span></span>
            <input type="text" id="genre1" list="genresDatalist" required disabled placeholder="ex: Action">
          </label>
          <label>
            <span>Genre 2 <span class="required">*</span></span>
            <input type="text" id="genre2" list="genresDatalist" required disabled placeholder="ex: Aventure">
          </label>
          <label>
            <span>Genre 3 <span class="required">*</span></span>
            <input type="text" id="genre3" list="genresDatalist" required disabled placeholder="ex: Comédie">
          </label>
        </div>

        <label>
          <span>Description <span class="required">*</span></span>
          <textarea id="description" rows="5" required disabled placeholder="Décrivez votre film..."></textarea>
        </label>

        <div class="grid">
          <label>
            <span>Affiche (format 9/12) <span class="required">*</span></span>
            <input type="hidden" id="portraitImage">
            <div class="actions">
              <label class="btn file-label">
                Importer image
                <input type="file" id="portraitFileInput" accept="image/*" hidden disabled>
              </label>
              <button type="button" id="portraitClearBtn" class="btn secondary" disabled>Effacer</button>
            </div>
            <img id="portraitPreview" class="img-preview" alt="Aperçu portrait" hidden>
          </label>
          <label>
            <span>Image fiche (paysage 16/9) <span class="required">*</span></span>
            <input type="hidden" id="landscapeImage">
            <div class="actions">
              <label class="btn file-label">
                Importer image
                <input type="file" id="landscapeFileInput" accept="image/*" hidden disabled>
              </label>
              <button type="button" id="landscapeClearBtn" class="btn secondary" disabled>Effacer</button>
            </div>
            <img id="landscapePreview" class="img-preview" alt="Aperçu paysage" hidden>
          </label>
          <label>
            <span>Lien YouTube <span class="required">*</span></span>
            <input type="url" id="watchUrl" placeholder="https://www.youtube.com/..." required disabled>
          </label>
          <label>
            <span>Badge studio (image)</span>
            <input type="hidden" id="studioBadge">
            <div class="actions">
              <label class="btn file-label">
                Importer image
                <input type="file" id="studioBadgeFileInput" accept="image/*" hidden disabled>
              </label>
              <button type="button" id="studioBadgeClearBtn" class="btn secondary" disabled>Effacer</button>
            </div>
            <img id="studioBadgePreview" class="img-preview" alt="Aperçu badge studio" hidden>
          </label>
        </div>

        <fieldset disabled>
          <legend>Acteurs & Doubleurs</legend>
          <div id="actorsList" class="actors-list"></div>
          <div class="actor-row">
            <input type="text" id="actorName" placeholder="Nom de l'acteur">
            <input type="text" id="actorRole" placeholder="Rôle dans le film">
            <button type="button" id="addActorBtn" class="btn secondary">Ajouter</button>
          </div>
        </fieldset>

        <div class="actions">
          <button type="submit" class="btn primary" disabled id="submitBtn">
            <span>📤 Soumettre ma demande</span>
          </button>
          <button type="button" id="resetBtn" class="btn secondary" disabled>🔄 Réinitialiser</button>
        </div>
      </form>
      <datalist id="genresDatalist">
        <option value="Action">
        <option value="Aventure">
        <option value="Animation">
        <option value="Comédie">
        <option value="Drame">
        <option value="Fantastique">
        <option value="Horreur">
        <option value="Science-Fiction">
        <option value="Thriller">
        <option value="Romance">
        <option value="Mystère">
        <option value="Documentaire">
        <option value="Historique">
        <option value="Western">
        <option value="Guerre">
        <option value="Musical">
        <option value="Policier">
        <option value="Super-héros">
      </datalist>
      <div class="slide-nav">
        <button type="button" class="btn secondary" id="prevStep3">← Précédent</button>
      </div>
      </section>
    </div>
    <!-- End Slides Container -->

    <!-- Rate limit notification -->
    <div id="rateLimitNotice" class="notice notice-warning" hidden>
      <strong>⏳ Limite atteinte</strong>
      <p>Vous avez déjà soumis une demande aujourd'hui. Vous pourrez soumettre une nouvelle demande demain.</p>
      <p class="small" id="nextRequestTime"></p>
    </div>

    <!-- Request History -->
    <section class="form-section" id="historySection" hidden>
      <h2>📜 Historique de mes demandes</h2>
      <div id="historyList" class="history-list"></div>
    </section>

    <!-- Success Message -->
    <div id="successMessage" class="notice notice-success" hidden>
      <strong>✅ Demande soumise avec succès !</strong>
      <p>Votre demande a été envoyée aux administrateurs. Vous recevrez une réponse prochainement.</p>
      <p class="small">Vous pourrez soumettre une nouvelle demande dans 24 heures.</p>
    </div>
  </main>

  <script src="config.js"></script>
  <script src="request.js?v=1"></script>
</body>
</html>
