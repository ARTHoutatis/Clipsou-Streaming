:root {
    --bg-1: #0b1117;
    --bg-2: #0e141b;
    --brand-1: #2B22EE;
    --brand-2: #6c5ce7;
    --home-shift: 20px; /* desktop default */
    --categories-nudge: 0px; /* align Categories with other sections */
    --categories-extra-shift: 0px; /* no extra nudge by default */
}

/* ===== Hero Claim Line ===== */
.hero-claim { margin: 2px 0 4px; }
.hero-claim h2 {
  margin: 0 40px;
  text-align: center;
  font-size: 26px;
  font-weight: 900;
  color: #ffffff;
  letter-spacing: 0.3px;
  text-shadow: 0 1px 0 rgba(0,0,0,0.2);
}
@media (max-width: 768px) {
  .hero-claim h2 { margin: 0 16px; font-size: clamp(18px, 5.6vw, 22px); }
}

/* ===== Voir tout removed globally ===== */
/* Hide any inline "Voir tout" buttons regardless of viewport */
.section > .see-all-btn { display: none !important; }
/* Hide any existing or legacy all-* popups entirely */
.fiche-popup[id^="all-"] { display: none !important; visibility: hidden !important; }
.fiche-popup[id^="all-"] .fiche-content,
.fiche-popup[id^="all-"] .fiche-right,
.fiche-popup[id^="all-"] .grid { display: none !important; }

/* Prevent Chrome scroll anchoring from moving the background when images load while a popup is open */
html, body { overflow-anchor: auto; }
html:has(.fiche-popup:target),
body.popup-open,
html.popup-open {
  overflow-anchor: none !important;
}

/* "Voir tout" popups (id starts with all-) should use full width for the grid */
.fiche-popup .fiche-content {
  background: #151D29 !important;
  border: 1px solid rgba(255,255,255,0.08);
}
.fiche-popup[id^="all-"] .fiche-content {
  grid-template-columns: 1fr !important;
}
.fiche-popup[id^="all-"] .fiche-right {
  padding-left: 0 !important;
}
.fiche-popup[id^="all-"] .grid {
  padding: 0 !important; /* remove inner grid padding so cards span the popup content width */
  /* Center cards inside the popup */
  display: flex !important;
  flex-wrap: wrap !important;
  justify-content: center !important;
  align-content: flex-start !important;
  gap: 22px !important;
}

/* Standard card width for centered layout in Voir tout popups */
.fiche-popup[id^="all-"] .grid > * {
  flex: 0 0 220px !important;
  max-width: 220px !important;
}

@media (max-width: 768px) {
  .fiche-popup[id^="all-"] .grid { gap: 16px !important; padding: 0 8px !important; }
  .fiche-popup[id^="all-"] .grid > * { flex-basis: 200px !important; max-width: 200px !important; }
}

/* Continue Watching: use fades that match the box background color (#151D28) */
@media (min-width: 769px) {
  /* Desktop: make rail a masked scroll container for arrow navigation */
  #continue-watching .rail { overflow-x: hidden !important; overflow-y: visible !important; }
  /* In Continue Watching, extend the fades across the full box height */
  #continue-watching .rail-fade {
    top: 0 !important;
    height: 100% !important;
  }
  #continue-watching .rail-fade.left {
    background: linear-gradient(90deg,
      rgba(21,26,32,0.96) 0%,
      rgba(21,26,32,0.82) 38%,
      rgba(21,26,32,0.58) 60%,
      rgba(21,26,32,0.00) 100%
    ) !important;
  }
  #continue-watching .rail-fade.right {
    background: linear-gradient(270deg,
      rgba(21,26,32,0.96) 0%,
      rgba(21,26,32,0.82) 38%,
      rgba(21,26,32,0.58) 60%,
      rgba(21,26,32,0.00) 100%
    ) !important;
  }
  /* Match arrow fill as well inside the box - couleur corrigée */
  #continue-watching .rail-arrow {
    background: rgba(21,26,32,0.85) !important; /* Couleur #151A20 */
    border-color: rgba(255,255,255,0.12) !important;
  }
  #continue-watching .rail-arrow:hover { background: rgba(21,26,32,1) !important; }
}

/* ===== Full-screen Player Overlay ===== */
.player-overlay {
  position: fixed;
  inset: 0;
  z-index: 12000;
  background: rgba(0,0,0,0.95);
  display: none;
  align-items: center;
  justify-content: center;
}
.player-overlay.open { display: flex; }
.player-shell {
  position: relative;
  width: 100%;
  height: 100%;
  display: grid;
  grid-template-rows: auto 1fr auto;
  background: #000;
}
.player-topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 16px;
  background: linear-gradient(180deg, rgba(0,0,0,0.7), rgba(0,0,0,0));
}
.player-title { font-size: 16px; font-weight: 700; color: #fff; margin: 0; }
.player-skip {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: rgba(255,255,255,0.06);
  color: #fff;
  border: 1px solid rgba(255,255,255,0.18);
  font-size: 18px;
  line-height: 1;
  padding: 12px 16px;
  border-radius: 0;
  cursor: pointer;
  outline: none;
  box-shadow: none;
}
.player-skip:hover, .player-skip:focus { border-color: rgba(255,255,255,0.26); background: rgba(255,255,255,0.10); }
.player-close {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: transparent; /* no fill */
  color: #fff;
  border: 1px solid rgba(255,255,255,0.12);
  font-size: 16.8px; /* 1.2x */
  line-height: 1;
  padding: 9.6px 14.4px; /* 1.2x */
  border-radius: 9.6px; /* 1.2x */
  cursor: pointer;
  outline: none;
  box-shadow: none;
}
.player-close:hover, .player-close:focus {
  background: transparent; /* keep transparent on hover/focus */
  border-color: rgba(255,255,255,0.18);
  outline: none;
  box-shadow: none;
}
.player-stage { position: relative; width: 100%; height: 100%; background: #000; }
.player-stage video, .player-stage iframe { position: absolute; inset: 0; width: 100%; height: 100%; display: block; border: 0; object-fit: cover; }
.player-stage .player-skip {
  position: absolute;
  right: 16px;
  bottom: calc(20px + env(safe-area-inset-bottom));
  z-index: 2;
}
.player-footer { padding: 10px 16px; color: rgba(255,255,255,0.8); font-size: 13px; background: linear-gradient(0deg, rgba(0,0,0,0.7), rgba(0,0,0,0)); }

/* Lock background when player is open */
body.player-open, html.player-open {
  overflow: hidden !important;
  height: 100vh !important;
}

/* Player topbar tweaks on mobile: keep close button compact */
@media (max-width: 768px) {
  .player-skip { font-size: 16px; padding: 10px 14px; }
  .player-close {
    padding: 8px 10px;
    gap: 0;
    font-size: 18px; /* slightly larger cross for touch */
  }
}

/* Overlay covers full viewport (including nav) so nav is dimmed under popup */

/* ===== Desktop-only rail arrows ===== */
@media (min-width: 769px) {
  .section { position: relative; }
  .rail-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 44px; height: 44px;
    display: inline-flex;
    align-items: center; justify-content: center;
    color: #ffffff;
    background: rgba(0,0,0,0.5);
    border: 1px solid rgba(255,255,255,0.18);
    border-radius: 8px;
    cursor: pointer;
    z-index: 2;
    transition: background .2s ease, opacity .3s cubic-bezier(0.22, 1, 0.36, 1), transform .3s cubic-bezier(0.22, 1, 0.36, 1);
    opacity: 0.85;
    -webkit-tap-highlight-color: transparent;
    transform: translateX(0);
  }
  .rail-arrow:hover { background: rgba(0,0,0,0.65); opacity: 1; }
  .rail-arrow:disabled { opacity: 0.35; cursor: default; pointer-events: none; }
  /* Move arrows inward so they sit just inside the 80px fades */
  .rail-arrow.prev { left: 30px; }
  .rail-arrow.next { right: 30px; }
  .rail-arrow svg { width: 24px; height: 24px; display: block; }

  /* Gradient fades on edges to hint overflow and softly cut cards */
  .rail-fade {
    position: absolute !important;
    top: -80px !important; /* Étendre encore plus vers le haut */
    width: 80px !important;
    height: calc(100% + 160px) !important; /* Hauteur maximale pour couvrir toute carte agrandie */
    pointer-events: none !important;
    z-index: 5 !important;
    opacity: 0 !important; /* Masqué par défaut */
    transform: translateX(0) !important;
    transition: opacity .3s cubic-bezier(0.22, 1, 0.36, 1), transform .3s cubic-bezier(0.22, 1, 0.36, 1);
  }
  
  /* Afficher les dégradés dès qu'ils ne sont pas masqués (indépendant du hover) */
  .rail-fade:not(.hidden) {
    opacity: 1 !important;
  }
  .rail-fade.left {
    left: 0 !important;
    background: linear-gradient(90deg,
      rgba(11,17,23,0.96) 0%,
      rgba(11,17,23,0.82) 38%,
      rgba(11,17,23,0.58) 60%,
      rgba(11,17,23,0.00) 100%
    ) !important;
  }
  .rail-fade.right {
    right: 0 !important;
    background: linear-gradient(270deg,
      rgba(11,17,23,0.96) 0%,
      rgba(11,17,23,0.82) 38%,
      rgba(11,17,23,0.58) 60%,
      rgba(11,17,23,0.00) 100%
    ) !important;
  }
  /* Keep arrows above fades */
  .rail-arrow { z-index: 6; }

  /* Hidden states: slide out of the viewport with fade */
  .rail-arrow.prev.hidden, .rail-fade.left.hidden { transform: translateX(-110%); opacity: 0; }
  .rail-arrow.next.hidden, .rail-fade.right.hidden { transform: translateX(110%); opacity: 0; }
  .rail-fade.hidden { pointer-events: none; }

  /* Utility: disable transitions when we want instant disappearance */
  .rail-arrow.immediate, .rail-fade.immediate { transition: none !important; }
}

/* Hide arrows on mobile */
@media (max-width: 768px) {
  .rail-arrow { display: none !important; }
  .rail-fade { display: none !important; }
}


/* Partner logos: contain inside their fixed box and support simple position codes */
.partner-logo {
  display: block;
  width: auto; /* width/height are set inline in HTML for exact box size */
  height: auto;
  object-fit: contain;
  object-position: center center;
  background: transparent;
}
.partner-logo[data-pos="center"],
.partner-logo:not([data-pos]) { object-position: center center; }
.partner-logo[data-pos="top"] { object-position: top center; }
.partner-logo[data-pos="bottom"] { object-position: bottom center; }
.partner-logo[data-pos="left"] { object-position: center left; }
.partner-logo[data-pos="right"] { object-position: center right; }
.partner-logo[data-pos="top-left"],
.partner-logo[data-pos="tl"] { object-position: top left; }
.partner-logo[data-pos="top-right"],
.partner-logo[data-pos="tr"] { object-position: top right; }
.partner-logo[data-pos="bottom-left"],
.partner-logo[data-pos="bl"] { object-position: bottom left; }
.partner-logo[data-pos="bottom-right"],
.partner-logo[data-pos="br"] { object-position: bottom right; }

/* Desktop/tablet: ensure mobile-only overlay stays hidden */
.fiche-left .fiche-overlay { display: none; }

/* Ultra-small phones: tighten navbar further (moved to common.css) */
@media (max-width: 360px) {
  .nav-links .search-link { width: 40px; height: 40px; }
}

/* Extra-narrow phones: force-hide Partenariats title */
@media (max-width: 600px) {
  #partenariats-title { display: none !important; }
}

/* Ensure no parent color overrides the gradient fill */
#film7 .fiche-right #film7-title .urbanos-grad {
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
    -webkit-text-fill-color: transparent !important;
}

/* box-sizing reset moved to common.css */

body {
    margin: 0;
    background: linear-gradient(180deg, var(--bg-1) 0%, var(--bg-2) 100%);
    min-height: 100vh;
    color: #fff;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    -webkit-tap-highlight-color: transparent;
    overflow-x: hidden; /* prevent global horizontal scrollbar */
}

/* Index only: use solid background (no gradient) */
body:not(.fiche-page-view) {
  background: var(--bg-1) !important;
}

/* ===== Resume confirm dialog (fiche page) ===== */
.resume-dialog-overlay {
  position: fixed;
  inset: 0;
  z-index: 11500;
  background: rgba(0,0,0,0.6);
  display: none;
  align-items: center;
  justify-content: center;
}
.resume-dialog-overlay.open { display: flex; }
.resume-dialog-box {
  background: #1a2332;
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 12px;
  padding: 16px;
  width: min(92vw, 420px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.45);
}
.resume-dialog-box h4 { margin: 0 0 8px 0; font-size: 18px; }
.resume-dialog-box p { margin: 0 0 14px 0; font-size: 14px; color: rgba(255,255,255,0.9); }
.resume-dialog-actions { display: flex; gap: 10px; justify-content: flex-end; }
.resume-dialog-actions .button { min-width: 90px; }

/* .sr-only moved to common.css */

/* SOLUTION : Bloquer le scroll quand une popup est active */
body:has(.fiche-popup:target) {
    overflow: hidden;
    height: 100vh;
}

/* Activate global dim when any popup is open */
body:has(.fiche-popup:target)::before {
    background: rgba(0,0,0,0.6);
    pointer-events: auto; /* block clicks to underlying UI */
}
/* JS-driven fallback: also dim when body has .popup-open (set in index.js) */
body.popup-open::before {
    background: rgba(0,0,0,0.6);
    pointer-events: auto; /* block clicks to underlying UI */
}

body::before {
    content: '';
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: none; /* inactive by default */
    pointer-events: none;
    z-index: 10990; /* above nav and just below popup (11000) */
}

/* Navigation (desktop styles are unified in common.css) */
/* Disable nav interactions while a popup is open */
body:has(.fiche-popup:target) nav[aria-label="Navigation principale"],
body.popup-open nav[aria-label="Navigation principale"] {
  pointer-events: none !important; /* keep non-interactive while popup open */
  background: #0b1117 !important;  /* enforce solid opaque background */
  backdrop-filter: none !important;
  box-shadow: none !important;
}


/* .logo styles are centralized in common.css to keep title identical across pages */

.nav-links { display: flex; gap: 15px; }
.nav-links a { padding: 10px 20px; border-radius: 5px; font-weight: 600; color: #fff; text-decoration: none; transition: all .3s ease; white-space: nowrap; }

.discord-link { background: #2B22EE; }
.discord-link:hover { background: #241DE0; }

.yt-link { background: #FF0000; display: none !important; }
.yt-link:hover { background: #CC0000; }

/* Partenariat button in navbar */
.partner-link { background: #16a34a; }
.partner-link:hover { background: #15803d; }

.search-link { background: transparent; border: 0; color: #fff; }
.search-link:hover { background: transparent; }

/* Lower the Recherche link slightly on desktop/tablet */
@media (min-width: 769px) {
  .nav-links .search-link { top: 2.5px; }
}

/* Index-only: raise Accueil by 1px (global is 3px, set to 2px here) */
@media (min-width: 769px) {
  body:not(.fiche-page-view) nav[aria-label="Navigation principale"] .logo .home-link { top: 2.5px; }
}

/* Accueil alignment is handled globally in common.css (top: 3px) */

/* Carousel */
.carousel-section { margin: 0 0 60px; overflow: hidden; }

.carousel-container {
    position: relative;
    width: 100%;
    height: auto;
    aspect-ratio: 2.25 / 1;
    min-height: 400px;
    overflow: hidden; /* prevent any overflow on all devices */
}

.carousel-slides { display: flex; width: 500%; height: 100%; animation: carousel-auto 25s infinite; margin: 0; padding: 0; gap: 0; will-change: transform; transition: transform .6s ease; }

/* Manual navigation: stop auto animation when user interacts */
.carousel-slides.manual { animation: none !important; }

@keyframes carousel-auto {
    0%, 18% { transform: translateX(0); }
    20%, 38% { transform: translateX(-20%); }
    40%, 58% { transform: translateX(-40%); }
    60%, 78% { transform: translateX(-60%); }
    80%, 98% { transform: translateX(-80%); }
    100% { transform: translateX(0); }
}

.carousel-slide {
    flex: 0 0 20%; /* Chaque slide = 20% de la largeur totale */
    min-width: 20%;
    margin: 0;
    position: relative;
    background-size: cover;
    background-position: top center;
    background-repeat: no-repeat;
    aspect-ratio: 2.26 / 1;
    transform: translateZ(0); /* GPU compositing */
}

.carousel-slide.alex-focus {
    /* Responsive vertical focus using percentage for desktop/tablet */
    background-position: center 12%;
}

.carousel-slide::before {
    content: '';
    position: absolute;
    inset: 0;
    /* Dégradé vertical plus subtil (bas -> haut) */
    background: linear-gradient(
        to top,
        rgba(11, 17, 23, 0.85) 0%,
        rgba(11, 17, 23, 0.60) 35%,
        rgba(11, 17, 23, 0.25) 65%,
        rgba(11, 17, 23, 0.00) 100%
    );
    z-index: 1;
}

/* Dégradé latéral gauche plus doux (gauche -> droite) */
.carousel-slide::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
        to right,
        rgba(11, 17, 23, 0.75) 0%,
        rgba(11, 17, 23, 0.45) 15%,
        rgba(11, 17, 23, 0.15) 35%,
        rgba(11, 17, 23, 0.00) 50%
    );
    z-index: 1;
    pointer-events: none;
}

.carousel-content {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 40px;
    z-index: 2;
    /* Dégradé vertical plus subtil (bas -> haut) */
    background: linear-gradient(
        to top,
        rgba(11, 17, 23, 0.35) 0%,
        rgba(11, 17, 23, 0.15) 30%,
        transparent 100%
    );
}

.carousel-title { font-size: 2.5rem; font-weight: 700; color: #fff; margin: 0 0 15px; text-shadow: none; }

.carousel-description { font-size: 1.1rem; color: rgba(255,255,255,.9); line-height: 1.5; margin: 0 0 20px; max-width: 600px; text-shadow: none; }

.carousel-genres { display: flex; gap: 10px; margin: 15px 0 20px; flex-wrap: wrap; align-items: center; }

.carousel-genre-tag { background: rgba(255,255,255,.06); color: #e6eef5; padding: 6px 14px; border-radius: 20px; font-size: .85rem; font-weight: 600; border: 1px solid rgba(255,255,255,.12); backdrop-filter: none; }

/* Pastilles à droite des genres sur la fiche (durée ou nombre d'épisodes) */
.duration-chip,
.episodes-chip {
  background: transparent;
  color: rgba(255,255,255,0.92);
  padding: 0;
  border-radius: 0;
  font-size: .95rem;
  font-weight: 600;
  border: 0;
  line-height: 1;
  white-space: nowrap;
}

/* Rapproche légèrement l'étiquette épisodes des genres */
.rating-genres .episodes-chip {
  margin-left: -6px;
}

/* Mobile: ne pas afficher le nombre d'épisodes */
@media (max-width: 768px) {
  .episodes-chip { display: none !important; }
}

/* Inline rating in carousel, placed before genre tags */
.carousel-genres .carousel-rating {
    display: inline-flex;
    align-items: center;
    font-size: 1.3rem; /* slightly larger for better emphasis */
    line-height: 1; /* tight to avoid misalignment */
    font-weight: 600; /* lighter like popup */
    color: #ffffff; /* keep numbers white for readability */
    margin-right: 8px;
}
.carousel-genres .carousel-rating .star {
    color: #FFD54A; /* yellow star */
    margin-right: 4px;
}

.carousel-btn { display: inline-flex; align-items: center; gap: 8px; background: #2B22EE; color: #fff; padding: 12px 24px; border-radius: 5px; text-decoration: none; font-weight: 600; font-size: .95rem; transition: all .3s ease; backdrop-filter: none; border: 1px solid #2B22EE; }

.carousel-btn:hover { background: #241DE0; transform: translateY(-1px); box-shadow: none; }

.carousel-btn::before {
    content: 'ⓘ';
    font-size: 1rem;
}

.carousel-btn:hover {
    background: var(--brand-1) !important;
    color: #fff !important;
    filter: none !important;
}

/* Indicateurs de slides */
.carousel-indicators {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 12px;
    z-index: 3;
    pointer-events: auto; /* enable pointer events on mobile */
}

.carousel-indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.4);
    cursor: pointer;
    transition: all 0.3s ease;
    animation: indicator-cycle 25s infinite;
    border: none; /* in case indicators are buttons in the future */
}

/* When navigating manually, stop indicator animation and show active state */
.carousel-indicators.manual .carousel-indicator { animation: none !important; }
.carousel-indicator.active { background: #2B22EE; transform: scale(1.3); }

.carousel-indicator:nth-child(1) { animation-delay: 0s; }
.carousel-indicator:nth-child(2) { animation-delay: 5s; }
.carousel-indicator:nth-child(3) { animation-delay: 10s; }
.carousel-indicator:nth-child(4) { animation-delay: 15s; }
.carousel-indicator:nth-child(5) { animation-delay: 20s; }

@keyframes indicator-cycle {
    0%, 16% { 
        background: #2B22EE;
        transform: scale(1.3);
    }
    20%, 100% { 
        background: rgba(255, 255, 255, 0.4);
        transform: scale(1);
    }
}

/* Sections */
.section { margin: 50px 0; }

/* Shift all homepage content blocks to the right, except the carousel */
main > .section { transform: translateX(var(--home-shift)); width: calc(100% - var(--home-shift)); }
/* Nudge Categories box slightly to match 'Reprendre la lecture' alignment */
main > .categories-section { transform: translateX(calc(var(--home-shift) + var(--categories-nudge))); width: calc(100% - var(--home-shift) - var(--categories-nudge)); }
@media (max-width: 768px) {
  :root { --home-shift: 8px; --categories-extra-shift: 6px; --categories-inner-shift: 12px; --categories-nudge: 0px; }
}

.section h2 {
  margin: 0 40px 12px;
  font-size: 28px;
  font-weight: 700; 
  color: #ffffff; 
  display: inline-block; 
  padding-bottom: 0; 
  border: none; 
}

/* ===== Categories Row ===== */
.categories-section {
  margin: 6px 0 8px; /* no side margins; alignment handled by section shift */
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 14px;
  padding: 12px 0 14px; /* internal padding, rails use their own horizontal padding */
  box-shadow: 0 8px 24px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.06);
  overflow: hidden; /* keep rounded corners for inner content */
}

/* ===== Continue Watching (Reprendre la lecture) matches Categories look ===== */
#continue-watching {
  margin: 6px 0 8px;
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 14px;
  padding: 12px 0 14px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.06);
  overflow: hidden;
}
.categories-section .categories-title {
  margin: 0 40px 10px; /* match other section gutters */
  font-size: 22px;
  font-weight: 800;
  color: #ffffff;
}
.categories-rail {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 0 40px; /* match other section gutters */
  overflow: visible;
  flex-wrap: wrap; /* allow wrapping to next line */
  justify-content: flex-start;
}
.category-card {
  display: block;
  flex: 0 0 auto;
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,0.12);
  box-shadow: 0 10px 24px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.06);
  transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
}
.category-card img {
  display: block;
  width: 100%;
  height: auto;
  max-height: 120px;
}
.category-card:hover { transform: translateY(-4px); box-shadow: 0 14px 30px rgba(0,0,0,0.45); filter: none; }

/* Use responsive card sizes for categories without stretching */
.category-card { flex: 0 0 260px; width: 260px; max-width: 260px; }
@media (max-width: 1024px) { .category-card { flex: 0 0 240px; width: 240px; max-width: 240px; } }
@media (max-width: 900px) { .category-card { flex: 0 0 220px; width: 220px; max-width: 220px; } }
@media (max-width: 768px) { .category-card { flex: 0 0 calc(50% - 8px); width: calc(50% - 8px); max-width: calc(50% - 8px); } }
@media (max-width: 480px) { .category-card { flex: 0 0 calc(50% - 6px); width: calc(50% - 6px); max-width: calc(50% - 6px); } }

/* Mobile: wrap instead of horizontal scroll */
@media (max-width: 768px) {
  .categories-section { margin: 6px 12px 8px; border-radius: 12px; padding: 10px 0 12px; }
  .categories-section .categories-title { margin: 0 12px 6px; font-size: 18px; }
  .categories-rail { padding: 0 12px; overflow: visible; gap: 12px; }
  .category-card img { max-height: 80px; } /* Réduire la hauteur sur mobile */
}

/* Très petits écrans : cartes encore plus petites */
@media (max-width: 480px) {
  .categories-rail { gap: 8px; }
  .category-card img { max-height: 70px; }
}

/* Desktop 16:9 and wider: exactly 6 category cards per row */
@media (min-width: 1024px) and (min-aspect-ratio: 16/9) {
  .categories-rail {
    gap: 14px; /* keep existing gap */
  }
  .categories-rail .category-card {
    flex: 0 0 calc((100% - (5 * 14px)) / 6);
    width: calc((100% - (5 * 14px)) / 6);
    max-width: none; /* allow exact calc width */
  }
}

@media (max-width: 768px) {
  #continue-watching .rail {
    scrollbar-width: none; /* Firefox */
  }
  #continue-watching .rail::-webkit-scrollbar { display: none; height: 0; }
}

/* ===== CTA Pills Row ===== */
.cta-pills-section { margin: 6px 0 14px; }
.cta-pills {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  padding: 0 32px;
}
.pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 12px 18px;
  border-radius: 999px;
  color: #fff;
  text-decoration: none;
  min-width: 120px;
  min-height: 44px; /* touch target */
  font-weight: 700;
  letter-spacing: .2px;
  border: 1px solid rgba(255,255,255,0.16);
  box-shadow: 0 10px 24px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.06);
  transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
  line-height: 1.1;
  text-shadow: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  outline: none;
  transform-origin: center center;
  will-change: transform;
}
/* Hover lift only on hover-capable devices to avoid mobile jump */
@media (hover: hover) {
  .pill:hover { transform: scale(1.06); box-shadow: 0 14px 30px rgba(0,0,0,0.45); }
}
.pill:focus-visible { box-shadow: 0 0 0 3px rgba(255,255,255,0.3), 0 10px 24px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.06); }
.pill.discord { background: radial-gradient(100% 100% at 0% 0%, #5865F2 0%, #3B46CC 100%); }
.pill.youtube { background: radial-gradient(100% 100% at 0% 0%, #FF3B30 0%, #C41F1A 100%); }
.pill.tiktok { background: radial-gradient(100% 100% at 0% 0%, #25F4EE 0%, #FE2C55 100%); }
.pill.trustpilot { background: radial-gradient(100% 100% at 0% 0%, #00B67A 0%, #00885B 100%); }
.pill.dons { background: radial-gradient(100% 100% at 0% 0%, #FF6A88 0%, #FF3CAC 100%); }
.pill.shop { background: radial-gradient(100% 100% at 0% 0%, #7F7FD5 0%, #86A8E7 50%, #91EAE4 100%); }

@media (max-width: 768px) {
  .cta-pills-section { margin: 8px 0 12px; }
  .cta-pills { padding: 0 12px; gap: 10px; }
  .pill { flex: 1 1 calc(50% - 10px); min-width: 0; padding: 12px 14px; font-weight: 800; font-size: clamp(13px, 3.6vw, 16px); }
}

/* When an inline See All button is present, bring it closer to the title */
.section > h2 { margin-right: 12px; }
.section > .see-all-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  vertical-align: middle;
  margin-right: 40px; /* match section right margin */
  margin-bottom: 12px; /* spacing below the row */
  padding: 8px 12px; /* slightly more compact */
  font-size: 14px;
  line-height: 1.1;
}

/* Hide "Voir tout" on mobile */
@media (max-width: 768px) {
  .section > .see-all-btn { display: none !important; }
}

/* Small descriptive line under section titles */
.section-subtitle {
  margin: -4px 40px 10px;
  font-size: 12px;
  line-height: 1.35;
  color: rgba(255,255,255,0.68);
}
@media (max-width: 768px) {
  .section-subtitle {
    margin: -2px 16px 8px;
    font-size: 11px;
  }
}

/* Boxed styling for Continue Watching */
#continue-watching {
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 14px;
  padding: 12px 0 14px;
  margin: 6px 0 8px; /* match Categories box spacing */
  position: relative; /* create stacking context for title above fades */
}
#continue-watching > h2 {
  margin: 0 40px 10px; /* match Categories title gutters and spacing */
  position: relative;
  z-index: 20; /* above rail fades */
}
#continue-watching .rail {
  padding: 8px 40px 0 40px;    /* match Categories rail gutters */
  margin: 0;             /* flush content */
  display: flex;         /* ensure horizontal layout */
  gap: 22px;             /* larger spacing between cards */
  position: relative;    /* layer below title but above background */
  z-index: 2;
  overflow: visible;     /* default; overridden per-viewport below */
}
/* Wrapper for each continue-watching entry: card + caption */
#continue-watching .resume-item { display: flex; flex-direction: column; }
#continue-watching .resume-item .card { margin-bottom: 6px; }
/* Remaining time caption below cards */
#continue-watching .resume-remaining {
  margin-top: 8px;
  margin-left: 2px;
  font-size: 14px;
  color: rgba(255,255,255,0.9);
}
/* Film title under time remaining */
#continue-watching .resume-title {
  margin-top: 4px;
  margin-left: 2px;
  font-size: 16px;
  font-weight: 700;
  color: #ffffff;
}
@media (max-width: 768px) {
  #continue-watching { margin: 0 16px 24px; padding: 12px; }
  #continue-watching > h2 { margin-bottom: 12px; }
  /* Mobile: enable horizontal scroll in the rail */
  #continue-watching .rail {
    overflow-x: auto !important;
    overflow-y: visible !important;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x proximity; /* optional smoother alignment */
  }
  #continue-watching .rail .resume-item { scroll-snap-align: start; }
}

/* Section header with right-aligned button (e.g., Acteurs) */
.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin: 0 40px 16px;
}

/* On mobile: allow header buttons to wrap and avoid stretching due to long text */
@media (max-width: 768px) {
  .section-header { flex-wrap: nowrap; gap: 8px; }
  .section-header .button.secondary {
    flex: 0 0 auto;
    min-width: 0; /* allow text to shrink within flex item */
    max-width: none;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: clamp(12px, 3.8vw, 14px);
    padding: clamp(6px, 1.2rem, 8px) clamp(8px, 2.6vw, 10px);
  }
}

/* Mobile tweaks for fiche page: smaller buttons and wrapping to fit screen */
@media (max-width: 768px) {
  body.fiche-page-view .section-header {
    flex-wrap: wrap !important;
    gap: 6px !important;
    margin: 0 16px 10px; /* tighter side margins on mobile */
  }
  body.fiche-page-view .section-header .button.secondary {
    flex: 1 1 auto !important;
    min-width: 0 !important;
    font-size: clamp(11px, 3.2vw, 13px) !important;
    padding: 6px 8px !important;
    white-space: nowrap; /* keep labels on one line; they can shrink */
  }
}

/* Fiche page: keep header buttons grouped at the left with tight spacing on desktop */
body.fiche-page-view .section-header {
  justify-content: flex-start !important;
  gap: 10px !important;
}
body.fiche-page-view .section-header .button.secondary {
  flex: 0 0 auto;
}

/* Extra-tight layout for ultra-small devices */
@media (max-width: 380px) {
  .section-header { gap: 6px; }
  .section-header .button.secondary {
    font-size: clamp(11px, 3.5vw, 13px);
    padding: 6px 8px;
  }
}

/* Secondary button style for header actions */
.button.secondary {
  background: transparent;
  border: 1px solid rgba(255,255,255,0.22);
  color: #ffffff;
  padding: 10px 16px;
  border-radius: 8px;
  min-height: 40px;
  outline: none;
  box-shadow: none;
  text-shadow: none;
}
.button.secondary:hover { 
  background: rgba(255,255,255,0.08); 
  outline: none;
  box-shadow: none;
  filter: none;
}
.button.secondary.active {
  background: #2B22EE;
  border-color: #2B22EE;
  outline: none;
  box-shadow: none;
}

/* "Voir tout" expanded panel per section */
.all-panel {
  margin: 0 40px 24px;
  padding: 16px;
  border-radius: 12px;
  background: rgba(26,35,50,0.65);
  border: 1px solid rgba(255,255,255,0.12);
}
.section.all-open .rail { display: none !important; }
.section.all-open .all-panel { display: block !important; }
.section:not(.all-open) .all-panel { display: none !important; }
/* Remove extra padding inside grids placed in all-panel */
.all-panel .grid { padding: 0; }

/* Remove focus ring/glow on keyboard/mouse focus */
.button.secondary:focus,
.button.secondary:focus-visible {
  outline: none !important;
  box-shadow: none !important;
  filter: none !important;
}

/* Actors panel */
.actors-panel {
  margin: 0 40px 24px;
  padding: 16px;
  border-radius: 12px;
  background: rgba(26,35,50,0.65);
  border: 1px solid rgba(255,255,255,0.12);
}
.section.actors-open .rail { display: none !important; }
.section.actors-open .actors-panel { display: block !important; }
.section:not(.actors-open) .actors-panel { display: none !important; }
.actors-panel > h3 {
  margin: 0 0 12px 0;
  font-size: 22px;
}

/* Episodes panel behaves similarly to actors panel */
.episodes-panel {
  margin: 0 40px 24px;
  padding: 16px;
  border-radius: 12px;
  background: rgba(26,35,50,0.65);
  border: 1px solid rgba(255,255,255,0.12);
}
.episodes-panel > h3 { margin: 0 0 12px 0; font-size: 22px; }
.section.episodes-open .rail { display: none !important; }
.section.episodes-open .episodes-panel { display: block !important; }
.section:not(.episodes-open) .episodes-panel { display: none !important; }

/* Episodes: make all buttons equal width and aligned */
.episodes-panel .episodes-rail .button {
  display: block !important;
  width: 100% !important;
  text-align: left;
  margin-bottom: 12px !important;
  padding: 16px 20px !important;
  background: rgba(255,255,255,0.05) !important;
  border: 1px solid rgba(255,255,255,0.08) !important;
  border-radius: 8px !important;
  color: #fff !important;
  box-shadow: none !important;
  text-shadow: none !important;
  filter: none !important;
  position: relative !important;
  overflow: visible !important; /* Pas de masquage pour éviter les effets */
  /* Prevent text from overflowing the rounded frame; allow wrapping of long words */
  white-space: normal !important;
  overflow-wrap: anywhere !important;
  word-break: break-word !important;
  hyphens: auto !important;
}
/* Supprimer complètement tous les effets de balayage sur les boutons d'épisodes */
.episodes-panel .episodes-rail .button::before,
.episodes-panel .episodes-rail .button::after {
  display: none !important; /* Supprime tous les pseudo-éléments */
}

.episodes-panel .episodes-rail .button:hover,
.episodes-panel .episodes-rail .button:focus {
  background: rgba(255,255,255,0.1) !important; /* éclaircissement simple */
  border-color: rgba(255,255,255,0.2) !important;
  outline: none !important;
  box-shadow: none !important; /* remove any glow */
  filter: none !important;
  transition: all 0.2s ease !important; /* transition douce */
}

/* Grey style for episode viewing status suffix */
.episodes-panel .episodes-rail .button .episode-status {
  color: rgba(255,255,255,0.6);
  margin-left: 6px;
  font-weight: 500;
  white-space: nowrap;
}

/* Mobile: widen and center episodes buttons */
@media (max-width: 768px) {
  .episodes-panel { margin: 0 16px 20px; }
  .episodes-panel .episodes-rail {
    align-items: center; /* center children horizontally */
    width: 100%;
  }
  .episodes-panel .episodes-rail .button {
    width: 100% !important;     /* use full panel width */
    max-width: 680px;           /* but keep a readable line length */
    margin-left: auto;          /* center when narrower than container */
    margin-right: auto;
  }
}

.actors-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 16px;
}

.actor-card {
  background: rgba(0,0,0,0.25);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 10px;
  padding: 10px;
  text-align: center;
  position: relative; /* allow absolute-positioned edit button */
}

.actor-photo {
  position: relative;
  width: 100%;
  aspect-ratio: 1 / 1;  /* square */
  overflow: hidden;
  border-radius: 0; /* container not rounded, only the image */
  background: transparent; /* remove inner black frame */
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 160px; /* force visible area on mobile even if aspect-ratio is buggy */
}
.actor-photo img {
  position: static;
  max-width: 100%;
  max-height: 100%;
  width: auto;
  height: auto;
  object-fit: contain;
  object-position: center center;
  display: block;
  border-radius: 8px; /* only the image has rounded corners */
  opacity: 1 !important;
}

/* Stronger override inside actors panel to avoid any cropping on mobile */
.actors-panel .actor-photo img {
  width: auto !important;
  height: auto !important;
  max-width: 100% !important;
  max-height: 100% !important;
  object-fit: contain !important;
  object-position: center center !important;
  border-radius: 8px !important; /* ensure roundness even with overrides */
}
/* Fiche page: strongest rule to prevent any global overrides on mobile */
body.fiche-page-view #fiche .actors-panel .actor-photo img {
  width: auto !important;
  height: auto !important;
  max-width: 100% !important;
  max-height: 100% !important;
  object-fit: contain !important;
  object-position: center center !important;
  border-radius: 8px !important;
}

.actor-name {
  margin-top: 6px;
  font-weight: 700;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.actor-role {
  font-size: 0.9rem;
  opacity: 0.85;
}

/* Small edit badge inline inside the actor name */
.actor-edit-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  font-size: 14px;
  line-height: 1;
  background: rgba(0,0,0,0.45);
  border: 1px solid rgba(255,255,255,0.18);
  color: #fff;
  text-decoration: none;
  padding: 2px 6px;
}
.actor-edit-btn:hover,
.actor-edit-btn:focus {
  background: rgba(0,0,0,0.75);
  border-color: rgba(255,255,255,0.28);
}

.actors-empty { margin: 8px 0; opacity: 0.85; }

/* Grille */
.grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 24px; padding: 0 40px; }

/* Cartes */
.card {
    background: linear-gradient(180deg, rgba(26,35,50,0.65), rgba(26,35,50,0.9));
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.3s ease;
    border: 1px solid rgba(255, 255, 255, 0.12);
    cursor: pointer;
    position: relative; /* enable overlay watermark */
    box-shadow:
      0 10px 30px rgba(0,0,0,0.35),
      inset 0 1px 0 rgba(255,255,255,0.06);
}

.card:hover { 
    transform: translateY(-6px);
    box-shadow: 0 14px 38px rgba(0,0,0,0.45);
}

/* Card image rules centralized in common.css to avoid duplication */

/* Hide film title text on index cards as requested */
.card .card-info span { display: none; }

/* ===== Continue Watching: progress bar on card ===== */
#continue-watching .card .progress {
  position: absolute; /* overlay on image */
  left: 12px;
  right: 12px;
  bottom: 12px;
  height: 8px;
  background: rgba(0,0,0,0.45); /* darker track over image */
  border-radius: 999px;
  overflow: hidden;
}
#continue-watching .card .progress .bar {
  height: 100%;
  width: 0%;
  background: var(--brand-1);
  transition: width .3s ease;
}

/* Hide any leftover brand badge in Continue Watching */
#continue-watching .card .brand-badge { display: none !important; }

/* Make Continue Watching cards larger than default */
#continue-watching .rail .resume-item {
  width: 300px !important;   /* landscape cards */
  flex: 0 0 300px !important;/* fixed width item in horizontal rail */
}
#continue-watching .resume-item .card { width: 100% !important; }
@media (max-width: 768px) {
  #continue-watching .rail .resume-item { width: 240px !important; flex: 0 0 240px !important; }
}

/* Landscape media ratio for Continue Watching only (override portrait default) */
#continue-watching .card .card-media { aspect-ratio: 16/9 !important; }

/* Titre/legend overlay for continue watching (optional) */
.card .resume-legend {
  position: absolute;
  left: 8px;
  bottom: 10px;
  background: rgba(0,0,0,0.55);
  color: #fff;
  padding: 6px 10px;
  border-radius: 8px;
  font-size: 12px;
  border: 1px solid rgba(255,255,255,0.12);
}

/* Continue Watching: suppress default 'Catégorie' and rating after for resume info bar */
.card .card-info.resume-info::before,
.card .card-info.resume-info::after { content: none !important; }

.stars { 
    color: #2B22EE; 
    font-size: 16px; 
}

/* Base link styles are defined in common.css */

/* Popups avec position fixe et conservation du scroll */
.fiche-popup {
    display: none;
    position: fixed;
    left: 0; right: 0; bottom: 0; top: 0; /* default; overridden below to keep nav undimmed */
    background: rgba(0, 0, 0, 0.6);
    justify-content: center; /* horizontal centering */
    align-items: center;     /* vertical centering */
    align-content: center;   /* multi-line centering safety */
    place-content: center;   /* shorthand safety */
    place-items: center;     /* shorthand safety */
    z-index: 11000;
    /* Full viewport height so centering works on all devices */
    min-height: 100dvh;
    min-height: 100vh;
    padding: clamp(12px, 3vw, 20px);
    backdrop-filter: none;
    overscroll-behavior: contain; /* empêche le scroll de fond sur mobile */
}

.fiche-popup:target { 
    display: flex; 
}

.fiche-content {
    width: 90%;
    max-width: 2000px;
    /* Center on full viewport height (ignore nav height), with small breathing room */
    max-height: calc(100dvh - 40px);
    background: #151D29; /* opaque, unified popup color */
    border-radius: 16px;
    display: grid;
    gap: 30px;
    padding: 30px;
    overflow-y: auto;
    overflow-x: hidden;
    position: relative;
    margin: auto; /* ensure centering even if container alignment is overridden */
}

/* Popups should be centered on the full page (including under the nav) */
@media (min-width: 769px) {
  .fiche-popup {
    top: 0 !important;
    height: 100vh !important;
    min-height: 100vh !important;
  }
}
@media (max-width: 768px) {
  .fiche-popup {
    top: 0 !important;
    height: 100vh !important;
    min-height: 100vh !important;
  }
}
/* ... */
.fiche-content {
    grid-template-columns: 1fr 1.5fr; /* Layout par défaut pour images portrait */
}

/* Alternative : class CSS pour forcer le layout paysage */
.fiche-content.landscape-layout {
    grid-template-columns: 2fr 1fr;
}

.fiche-left {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
}

/* Style spécifique pour les images paysage */
.fiche-content img.landscape {
    width: 100%;
    height: auto;
    max-height: 72vh;
    object-fit: contain;
    display: block;
}

/* Desktop/tablet: rounded corners for fiche images */
@media (min-width: 769px) {
  .fiche-content img.landscape { border-radius: 8px; }
}

/* Mobile: forcer un rendu cover dans un cadre 16:9 */
@media (max-width: 768px) {
  /* Conteneur visuel pour l'image (déjà ajouté dans le DOM via .fiche-media-wrap) */
  .fiche-media-wrap {
    position: relative;
    width: 100%;
    aspect-ratio: 16 / 9;
    overflow: hidden;
  }
  /* Sur la page fiche, étendre l'image bord à bord sur toute la largeur écran */
  body.fiche-page-view #fiche .fiche-media-wrap {
    width: 100vw !important;
    max-width: 100vw !important;
    margin-left: 50% !important;
    transform: translateX(-50%) !important;
    border-radius: 0 !important;
  }
  /* L’image remplit le conteneur uniformément */
  .fiche-media-wrap img.landscape {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    max-height: none; /* aucune contrainte verticale sur mobile */
    border-radius: 0; /* pas d'arrondi pour occuper tout l'espace */
  }

  /* Priorité maximale sur la page fiche pour éviter tout 'contain' résiduel */
  body.fiche-page-view #fiche .fiche-left img.landscape {
    width: 100% !important;
    height: 100% !important;
    max-width: none !important;
    max-height: none !important;
    object-fit: cover !important;
    display: block !important;
  }

  /* Masquer la durée sur mobile */
  .duration-chip { display: none !important; }
}

.fiche-right {
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding-left: 20px; /* Décalage supplémentaire du texte vers la droite */
}

.fiche-content h3 { 
    margin: 0 0 16px 0; 
    font-size: 28px;
    font-weight: 700;
    color: #ffffff;
    scroll-margin-top: 12px;
}

/* Per-title font styles */
#film2-title { font-family: inherit; font-size: inherit; }

/* Backrooms Urbanos title base size */
#film7-title {
    font-size: clamp(28px, 5vw, 44px);
}

/* Inline SVG sizing for URBANOS logo */
#film7-title .urbanos-svg { display: inline-block; line-height: 1; }
#film7-title .urbanos-logo { height: 1.10em; width: auto; vertical-align: -0.32em; display: inline-block; }

/* Apply VHS pixel style ONLY to "Backrooms" */
#film7-title .backrooms-vhs {
    font-family: 'VT323', monospace;
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: #ffffff;
    font-size: 1.08em; /* légèrement plus grand */
    /* Pas de contour */
    -webkit-text-stroke: 0; 
    text-shadow: none; 
}

#film7-title .urbanos-grad {
    display: inline-block;
    font-weight: 800; /* bold look for the second word */
    font-family: 'Luckiest Guy', Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif; /* rounded bubbly logo style */
    letter-spacing: 1px;
    text-transform: uppercase;
    /* Three clear bands with top specular highlight for glossy 3D look */
    background: linear-gradient(180deg,
        #ffffff 0%, #ffffff 2%,       /* thin white highlight at the very top */
        #6fe3ff 2%, #6fe3ff 8%,       /* small cyan highlight under the white */
        #28cf63 8%, #28cf63 48%,      /* vivid green band (dominant) */
        #ffe35a 48%, #ffe35a 62%,     /* brighter, thinner yellow band */
        #ff7f10 62%, #ff7a00 100%     /* warm orange to deep orange */
    );
    background-repeat: no-repeat;
    background-size: 100% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent; /* show gradient as text fill */
    -webkit-text-fill-color: transparent; /* ensure gradient shows in WebKit/Blink */
    /* Subtle stroke around glyphs for crisp edges (WebKit-capable browsers) */
    -webkit-text-stroke: 0.6px rgba(0,0,0,0.35);
    /* Multi-layer shadow to simulate bevel + soft glow and drop + colored rims */
    text-shadow:
      0 -1px 0 rgba(255,255,255,0.95),   /* crisp top rim highlight */
     -1px -1px 0 rgba(111,227,255,0.85), /* cyan rim top-left */
      0 1px 0 rgba(0,0,0,0.28),          /* inner lower edge */
      0 2px 2px rgba(0,0,0,0.28),        /* subtle depth */
      0 4px 6px rgba(0,0,0,0.38),        /* drop shadow similar to logo */
      0 0 6px rgba(255,165,0,0.22),      /* warm glow */
      1px 1px 0 rgba(255,122,0,0.65);    /* orange rim bottom-right */
}
#film5-title { font-family: 'Anton', Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif; letter-spacing: 1px; }
#film3-title, #film1-title { font-family: 'Cinzel', Georgia, 'Times New Roman', serif; }
#serie1-title { font-family: 'Bevan', Georgia, serif; letter-spacing: 2px; text-transform: uppercase; }
#serie2-title { font-family: 'Rye', Georgia, serif; }
/* Karma: bold and stretched */
#film4-title {
    font-family: 'Anton', Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
    font-weight: 900;
    letter-spacing: 1.5px;
    display: inline-block; /* allow transform scaling */
    transform: scaleX(1.35);
    transform-origin: left center;
    text-transform: uppercase;
}

/* Urbanos City: chunky white slab for URBANOS + stylized "city" below */
#film6-title { display: inline-block; line-height: 1; }
#film6-title .urbanos {
    display: inline-block;
    font-family: 'Bevan', Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
    text-transform: uppercase;
    font-size: clamp(22px, 4vw, 40px);
    letter-spacing: 1px;
    color: #ffffff;
    /* bold outline/shadow look */
    text-shadow:
      0 2px 0 rgba(0,0,0,0.55),
      0 6px 14px rgba(0,0,0,0.55);
}
#film6-title .city {
    display: inline-block;
    font-family: 'Baloo 2', 'Shrikhand', system-ui, sans-serif;
    font-weight: 800;
    text-transform: lowercase;
    font-size: clamp(22px, 3.8vw, 36px); /* render larger to reduce hinting spikes */
    color: #ffffff;
    margin-left: 8px;
    letter-spacing: -0.2px;
    font-variant-ligatures: none;
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
    font-feature-settings: "liga" 0, "dlig" 0, "clig" 0, "calt" 0, "swsh" 0, "kern" 1;
    font-synthesis: none;
    line-height: 1;
    transform: scale(0.86); /* scale down for smoother edges */
    transform-origin: left bottom;
    will-change: transform;
}

/* ===== Specific color treatments ===== */
/* La vie au petit âge: dark red with shadow */
#film1-title {
    color: #8B0000; /* dark red */
    text-shadow: 0 2px 0 rgba(0,0,0,0.35), 0 4px 12px rgba(0,0,0,0.5);
}
/* Lawless Legend: darker red */
#serie2-title { color: #6E0000; }
/* DEDOUBLEMENT: bluish drop shadow (no outline) */
#film2-title {
    color: #ffffff; /* white */
    font-weight: 800; /* bold */
    font-size: 34px; /* larger */
    text-transform: uppercase;
    /* Soft, bluish shadow inspired by the reference */
    text-shadow:
      0 8px 18px rgba(11, 61, 145, 0.55),  /* main soft drop */
      0 2px 4px rgba(11, 61, 145, 0.45),   /* near shadow */
      0 0 14px rgba(11, 61, 145, 0.30);    /* ambient glow */
}

/* Make all popup titles large and consistent like DEDOUBLEMENT */
#film1-title,
#film2-title,
#film3-title,
#film4-title,
#film5-title,
#film6-title,
#serie1-title,
#serie2-title {
    font-size: clamp(28px, 5vw, 40px);
    line-height: 1.1;
    display: inline-block;
    min-width: 12ch; /* approx width of 'DEDOUBLEMENT' */
    text-align: left;
}
/* Ensure nested spans inherit unified size */
#film6-title .urbanos,
#film6-title .city,
#film5-title .trailer-word,
#film5-title .batman-word,
#serie1-title .al,
#serie1-title .ex { font-size: 1em; }

/* Alex: AL green, EX pink */
#serie1-title .al { color: #9CFF00; }
#serie1-title .ex { color: #ff69b4; }
/* Trailer Batman: 'Trailer' white, 'Batman' red */
#film5-title .trailer-word { color: #ffffff; }
#film5-title .batman-word { color: #ff2a2a; font-weight: 800; }

/* Card title styles removed per request */

.fiche-content p { 
    margin: 15px 0; 
    font-size: 16px;
    line-height: 1.6;
    color: #fff;
    text-align: justify;
}

.rating-genres {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
    flex-wrap: wrap;
}

.fiche-content .stars { 
    font-size: 20px;
    margin: 0;
    color: #ffffff;
}

.fiche-content .stars::first-letter {
    color: #FFD54A; /* warm yellow */
}

.genres {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    justify-content: start;
    align-items: center;
}

.genre-tag {
    background: rgba(255, 255, 255, 0.06);
    color: #e6eef5;
    padding: 4px 12px;
    border-radius: 16px;
    font-size: 14px;
    font-weight: 500;
    border: 1px solid rgba(255, 255, 255, 0.12);
    white-space: nowrap;
}

.button-group {
    display: flex;
    gap: 16px;
    flex-wrap: wrap;
    margin-top: auto;
    position: sticky;
    bottom: 0;
    padding-top: 12px;
    margin-top: 16px;
    background: transparent;
    padding-bottom: calc(8px + env(safe-area-inset-bottom));
}

.button {
    background: #2B22EE;
    border-radius: 5px;
    padding: 12px 24px;
    color: #fff;
    font-weight: 600;
    transition: all 0.3s ease;
    border: none;
    cursor: pointer;
    font-size: 14px;
    white-space: nowrap;
    min-height: 44px;
}

.button:hover { 
    transform: translateY(-1px);
    box-shadow: none;
}

.close-btn { 
    background: #ff4444;
}

.close-btn:hover { 
    background: #cc0000;
    box-shadow: none;
}

/* Position the close button at the top-right of popup content */
.fiche-content .top-right-close {
    position: absolute;
    top: 12px;
    right: 12px;
    z-index: 2;
}

/* Style pour empêcher le scroll vers le haut lors de la fermeture */
html {
    scroll-behavior: auto; /* disable smooth to avoid animated jump after closing popup */
}

/* Responsive mobile */
@media (max-width: 768px) {
  /* Place close button above the text on mobile */
  .fiche-content .top-right-close {
    position: static !important;
    align-self: flex-end;
    margin: 0 0 8px 0;
  }
    /* Kill 100vh on mobile to avoid extra blank space below content */
    html, body { height: auto !important; }
    body { min-height: auto !important; }
    /* Ensure no extra spacing after the last visible block */
    body > :last-child { margin-bottom: 0 !important; padding-bottom: 0 !important; }
    main#contenu { margin-bottom: 0 !important; padding-bottom: 0 !important; }
    #fiche, #fiche .section:last-child, #fiche .section:last-of-type { margin-bottom: 0 !important; padding-bottom: 0 !important; }
    #fiche .actors-panel:last-child { margin-bottom: 0 !important; padding-bottom: 0 !important; }
    /* Fiche page: reduce spacing between sections and remove any trailing gap */
    body.fiche-page-view #fiche .section { margin: 16px 0 !important; padding-bottom: 0 !important; }
    body.fiche-page-view #fiche .section:last-child,
    body.fiche-page-view #fiche .section:last-of-type { margin-bottom: 0 !important; padding-bottom: 0 !important; }
    body.fiche-page-view #fiche .actors-panel { margin-bottom: 0 !important; padding-bottom: 0 !important; }
    body.fiche-page-view #fiche .episodes-panel { margin-bottom: 0 !important; padding-bottom: 0 !important; }
    /* Generic guard: no bottom gap on the last child inside #fiche */
    body.fiche-page-view #fiche > :last-child { margin-bottom: 0 !important; padding-bottom: 0 !important; }
    body.fiche-page-view main#contenu { padding-bottom: 0 !important; margin-bottom: 0 !important; }
    body.fiche-page-view #fiche { padding-bottom: 0 !important; margin-bottom: 0 !important; }
    body.fiche-page-view #fiche .section > :last-child { margin-bottom: 0 !important; padding-bottom: 0 !important; }
    body.fiche-page-view #fiche .section-header + .actors-panel:last-child { margin-bottom: 0 !important; padding-bottom: 0 !important; }
    /* Remove sticky watch button gap on mobile */
    .button-group {
        position: static !important;
        bottom: auto !important;
        padding-bottom: 0 !important;
        margin-bottom: 0 !important;
    }
    
    /* Footer on mobile: visible, stacked lines, left aligned, tight padding */
    .footer { 
        display: block; 
        padding: 16px; 
        margin-top: 30px; 
        background: #000; 
        padding-bottom: calc(12px + env(safe-area-inset-bottom));
    }
    .footer .footer-inner {
        display: grid;
        grid-template-columns: 1fr; /* one column */
        row-gap: 10px;
        align-items: start;
        max-width: 100%;
        margin: 0; /* stick to edges */
    }
    .footer .footer-inner > div:first-child {
        justify-self: start;
        text-align: left; /* first line: text */
    }
    .footer .footer-actions {
        justify-self: start;
        text-align: left; /* second line: buttons */
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
    }
    .footer .footer-actions a {
        margin-left: 0 !important; /* override inline margins */
    }
    .footer .footer-actions .button {
        padding: 10px 14px;
        border-radius: 8px;
        margin-left: 0 !important; /* remove extra gaps on first button per inline styles */
    }

    /* Banderole (mobile layout unified in common.css) */
    /* Hide partenariat button on mobile */
    .nav-links .partner-link { display: none; }
    .nav-links a { padding: 8px 12px; font-size: 14px; width: auto; flex: 0 0 auto; }
    .nav-links a:not([href*="youtu"]) { padding: 6px 10px; }
    .nav-links .search-link { 
        padding: 0; 
        font-size: 16px; 
        background: transparent !important; 
        border-radius: 5px; 
        width: 40px; 
        height: 40px; 
        border: 0; 
        box-shadow: none; 
        margin-left: auto !important; 
    } /* Transparent button on mobile, icon-only */
    .nav-links .search-link { 
        text-indent: -9999px; 
        overflow: hidden; 
        position: relative; 
    }
    /* Icon and mobile centering are defined in common.css */
    /* Title overflow rules are handled in common.css */

    /* Show and enable carousel on mobile */
    .carousel-section { display: block; margin: 0 0 40px; }
    .carousel-container { overflow: hidden; }
    .carousel-slides { animation: carousel-auto 25s infinite; will-change: transform; backface-visibility: hidden; transform: translate3d(0,0,0); }
    .carousel-slide { transform: translateZ(0); background-image: initial; }
    /* Alex slide mobile tweak: keep head/torso visible on small screens */
    .carousel-slide.alex-focus { background-position: center 22%; }
    /* Prevent subpixel gaps/rounding on some mobile browsers */
    .carousel-slides, .carousel-slide { 
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
    }

    .carousel-container { min-height: 220px; }
    .carousel-content { padding: 16px; }
    .carousel-title { font-size: clamp(1rem, 4.6vw, 1.2rem); line-height: 1.15; margin: 0 0 8px; }
    .carousel-description { display: none; }

    /* Footer: stack actions under text on mobile (one column) */
    .footer .footer-inner {
        display: grid;
        grid-template-columns: 1fr;
        row-gap: 10px;
        align-items: start;
    }
    .footer .footer-actions {
        justify-self: stretch;
        text-align: left;
        display: flex;
        flex-direction: column; /* force buttons below each other */
        gap: 8px;
        width: 100%;
        margin-left: 0 !important;
    }
    .footer .footer-actions .button {
        width: 100%; /* full width buttons on mobile */
        margin-left: 0 !important;
    }
    /* Neutralize desktop float that could affect footer text on mobile */
    .footer .footer-inner > div:nth-child(2) > span { float: none; }
    .carousel-genres { gap: 4px; margin: 8px 0 10px; }
    /* Hide genres in carousel on mobile to save space, keep rating visible */
    .carousel-genres .carousel-genre-tag { display: none !important; }
    .carousel-genres .carousel-rating { font-size: 1.25rem; }
    /* Replace dots by arrows on mobile */
    .carousel-indicators { display: none !important; }
    .carousel-arrows { 
        display: inline-flex; 
        position: absolute; 
        bottom: calc(8px + env(safe-area-inset-bottom)); 
        right: 12px; 
        gap: 6px; 
        pointer-events: auto; 
    }
    /* Phone/tablet: hide Partenariats title entirely and tighten spacing */
    #partenariats-title { display: none !important; }
    #partenariats .fiche-right > h3#partenariats-title { display: none !important; }
    body.is-mobile #partenariats .fiche-right > h3#partenariats-title { display: none !important; }
    #partenariats .fiche-right > p:first-of-type { margin-top: 0 !important; }
    .carousel-arrow { 
        width: 48px; 
        height: 48px; 
        display: inline-flex; 
        align-items: center; 
        justify-content: center; 
        background: rgba(0, 0, 0, 0.5); /* fond translucide noir */
        color: #ffffff; /* flèches blanches via currentColor */
        border-radius: 5px; 
        border: 1px solid rgba(255,255,255,0.18);
        -webkit-tap-highlight-color: transparent; 
    }
    /* Remove blue outline on mobile tap/click */
    .carousel-arrow:focus,
    .carousel-arrow:focus-visible,
    .carousel-arrow:active { outline: none !important; box-shadow: none !important; }

    .section { margin: 30px 0; padding-top: 12px !important; }
    .section h2 { margin: 0 16px 16px; font-size: 24px; color: #2B22EE; }
    .section-header { margin: 28px 16px 36px !important; }
    .actors-panel { margin: 0 16px 12px; padding: 12px; }
    .actors-grid { grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 12px; }
    /* Ensure space between the fiche content block and the toggle section */
    #fiche .fiche-content + .section { margin-top: 18px !important; }
    /* Keep a bit of extra room if the button group is the last element inside fiche-content */
    .button-group { margin-bottom: 12px; }
    /* Ensure space between the header buttons and the next block (actors panel or rail) */
    .section-header + .actors-panel { margin-top: 14px !important; }
    .section-header + .rail { margin-top: 14px !important; }
    .section-header + .episodes-panel { margin-top: 14px !important; }
    /* Safety: keep actor photo visible on mobile with a fixed minimum height */
    .actors-panel .actor-photo { min-height: 140px; }

    /* Stop scrolling into empty space after the last section */
    html, body { height: auto; overflow-x: hidden; overscroll-behavior-y: contain; }
    #fiche > .section:last-child { margin-bottom: 0 !important; padding-bottom: 0 !important; }
    main#contenu > .section:last-child { margin-bottom: 0 !important; padding-bottom: 0 !important; }
    .footer { margin-top: 24px; padding-bottom: max(12px, env(safe-area-inset-bottom)); }

    /* Smaller cards on mobile grids */
    .grid { padding: 0 16px; gap: 12px; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); }
    /* Rails padding on mobile */
    .rail { 
        padding: 0; 
        /* Smaller cards in rails on mobile */
        grid-auto-columns: clamp(120px, 42vw, 180px);
        gap: 12px;
        scroll-snap-type: none !important;   /* force disable snapping on mobile */
        scroll-padding-left: 0 !important;   /* ensure first card aligns exactly at left */
        scroll-padding-inline-start: 0 !important;
    }
    /* Also disable snap alignment on children for mobile */
    .rail > .card, .rail > * {
        scroll-snap-align: none !important;
        scroll-margin: 0 !important;
        scroll-margin-inline-start: 0 !important;
    }
    /* Keep consistent alignment for all sections: no extra left padding on mobile */

    /* Ensure rating text (including /5) stays white on mobile */
    .rating-genres .stars,
    .fiche-content .stars { color: #ffffff !important; }

    .fiche-popup { 
        top: 60px; /* below mobile nav */
        padding-left: max(12px, env(safe-area-inset-left)); 
        padding-right: max(12px, env(safe-area-inset-right)); 
        padding-top: max(12px, env(safe-area-inset-top));
        padding-bottom: max(12px, env(safe-area-inset-bottom));
        min-height: calc(100svh - 60px); /* account for fixed nav on mobile */
        align-items: center;
    }

    /* Popup: centrage strict du conteneur */
    .fiche-content {
        grid-template-columns: 1fr;
        grid-template-areas:
            "image"
            "content";
        width: 92%;               /* not full-bleed, keep margins */
        max-width: 700px;         /* cap the width for nice centering */
        margin: 0 auto;           /* center horizontally */
        max-height: calc(100svh - 80px); /* nav + breathing */
        padding: 0 12px 8px; /* no top padding: image hugs the top */
        justify-items: center;
        align-items: start;
        gap: 2px; /* ultra-tight rhythm between image and content */
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        text-align: center;
        -webkit-overflow-scrolling: touch;
        overflow-x: hidden;
        margin-bottom: 8px; /* ensure small space before the next section */
    }
    
    .fiche-left { 
        align-items: center; 
        width: 100%; 
        display: flex;
        flex-direction: column;
        justify-content: flex-start; /* pin image to the top */
    }
    
    .fiche-content img { 
        display: block; 
        margin: 0 auto; /* remove bottom margin, rely on container gap */
        max-width: 100%; /* use full width to avoid side gaps */
        max-height: 34svh; /* default for any image inside fiche-content */
        height: auto;
        border-radius: 12px;
        position: relative; /* create stacking context */
        z-index: 0;
    }

    /* Make only the main fiche image full-bleed (edge-to-edge) on mobile */
    body.fiche-page-view #fiche .fiche-content { 
        padding-left: 0 !important; 
        padding-right: 0 !important; 
        padding-top: 0 !important; /* remove space under navbar */
        margin-top: 0 !important;
    }
    body.fiche-page-view #fiche .fiche-left { 
        width: 100vw; 
        max-width: 100vw; 
        margin-left: 50%; 
        transform: translateX(-50%); 
    }
    body.fiche-page-view #fiche .fiche-left img { 
        width: 100vw; 
        max-width: 100vw; 
        height: auto; 
        max-height: 55svh; /* enlarged only for the main fiche image */
        /* remove corner rounding to truly reach screen edges */
        border-radius: 0 !important; 
    }
    
    .fiche-right {
        padding-left: 0;
        text-align: center;
        width: 100%;
        max-width: 500px;
        margin: 0 auto; /* keep same distance from image via parent gap */
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start; /* anchor text at the top (override desktop center) */
        gap: 2px; /* bring inner elements even closer */
    }
    
    .fiche-content h3 { 
        text-align: center !important; 
        margin: 0 0 2px 0; /* title closer to elements above */
        width: 100%;
        color: inherit; /* allow per-title colors */
        display: block;            /* ensure full-width block for centering */
        min-width: 0;              /* remove desktop min-width constraint */
        margin-left: auto;         /* explicit center safety */
        margin-right: auto;        /* explicit center safety */
    }
    /* Neutralize left-biased transforms on mobile to keep visual centering */
    #film4-title { 
        transform: none; 
        transform-origin: center center; 
    }
    
    .fiche-content p { 
        text-align: center; 
        margin: 0 auto 2px; /* minimal spacing under description */
        max-width: 400px;
        line-height: 1.5;
    }
    
    /* Kill any stray top margins inside the text block */
    .fiche-right > *:first-child { margin-top: 0 !important; }
    
    .rating-genres { 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        gap: 4px; 
        flex-wrap: wrap;
        width: 100%;
        margin: 0 auto 2px; /* closer to title and description */
    }
    
    .rating-genres .stars { 
        display: inline-block; 
        font-size: 18px;
        margin: 0;
        color: #2B22EE;
    }
    
    .genres { 
        display: flex; 
        gap: 8px; 
        justify-content: center; 
        flex-wrap: wrap;
        align-items: center;
    }
    
    .genre-tag { 
        font-size: 13px; 
        padding: 4px 10px;
        white-space: nowrap;
    }

    /* Overlay on image for title + rating + genres (MOBILE ONLY) */
    .fiche-left { position: static; }
    .fiche-media-wrap { position: relative; overflow: hidden; border-radius: 12px; }
    /* Fiche page: remove rounded corners on the main image wrapper */
    body.fiche-page-view #fiche .fiche-media-wrap { border-radius: 0 !important; }
    .fiche-media-wrap .fiche-overlay {
        position: absolute;
        left: 0; right: 0; bottom: 0;
        width: 100%;
        padding: 12px;
        background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.55) 45%, rgba(0,0,0,0.75) 100%);
        color: #ffffff;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: 6px;
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
        z-index: 2; /* sit above the image */
        pointer-events: none; /* let taps go to underlying image/buttons */
    }
    .fiche-media-wrap .fiche-overlay .overlay-title { font-size: 1.4rem; margin: 0; }
    .fiche-media-wrap .fiche-overlay .overlay-meta { justify-content: center; }
    /* Rating: white text, yellow star (mobile overlay) */
    .fiche-media-wrap .fiche-overlay .overlay-meta .stars { color: #ffffff !important; }
    .fiche-media-wrap .fiche-overlay .overlay-meta .stars::first-letter { color: #FFD54A !important; }

    /* Hide duplicated blocks ONLY on the fiche page (not in popups / index) */
    body.fiche-page-view #fiche .fiche-right > h3,
    body.fiche-page-view #fiche .fiche-right > .rating-genres,
    body.fiche-page-view #fiche .fiche-right > p { display: none !important; }
    
    .button-group { 
        display: flex; 
        gap: 10px; 
        flex-wrap: wrap;
        justify-content: center; 
        width: 100%;
        margin: 8px auto 0; /* tighter gap under image */
        padding-top: 8px;   /* reduce internal spacing */
        position: static !important; /* override desktop sticky to avoid reserved space */
        bottom: auto !important;
        padding-bottom: 8px; /* small, fixed padding */
    }

    /* Reduce spacing before next content (e.g., HR + similar content) */
    .section { margin: 12px 0; }
    body.fiche-page-view hr { margin: 8px 0; }
    /* When the similar section follows the fiche content, keep it close */
    #fiche .fiche-content + .section { margin-top: 8px !important; }
    /* Also ensure any section directly after the image/buttons stays close */
    #fiche .button-group + .section { margin-top: 8px !important; }

    /* POPUPS: make sure content is visible on mobile and left-aligned */
    .fiche-popup .fiche-content {
        display: flex;
        flex-direction: column;
        gap: 10px;
        padding: 16px;
        max-height: min(92svh, 92dvh);
        overflow-y: auto;
    }
    .fiche-popup .fiche-right {
        padding-left: 0 !important;
        text-align: left !important; /* do not center popup text on mobile */
        align-items: flex-start !important;
        gap: 10px;
    }
    /* Force left alignment for titles and paragraphs within popups */
    .fiche-popup .fiche-right > h3,
    .fiche-popup .fiche-right > p { 
        display: block !important; 
        text-align: left !important;
        margin-left: 0;
        margin-right: 0;
    }
    .fiche-popup .fiche-right .button-group { justify-content: flex-start; }

    /* Keep thin grey separators inside Partenariats popup on mobile */
    .fiche-popup hr { 
        border: 0; 
        border-top: 1px solid rgba(255,255,255,0.12); 
        margin: 12px 0; 
        width: 100%;
    }
    
    /* Mobile: left-align 'Contenu similaire' and show a subtle top separator */
    /* Make fiche similar section use same horizontal rhythm as index/search */
    #fiche .section {
        padding: 0; /* let inner .grid/.rail carry the 16px side padding like index/search */
        text-align: left;  /* do NOT center */
        border-top: 1px solid rgba(255,255,255,0.12); /* thin separator like desktop */
    }
    #fiche .section h2 { 
        text-align: left; 
        margin: 0 0 12px 0; 
        padding: 0 16px; /* keep same side gutters as grids so text isn't cut */
        box-sizing: border-box;
    }
    /* Ensure same mobile paddings as index/search inside the section content */
    #fiche .section .grid { padding: 0 16px !important; gap: 12px !important; }
    #fiche .section .rail { padding: 0 16px !important; gap: 12px !important; }
    /* Enforce same card sizing model as index/search */
    body.fiche-page-view #fiche .section .grid {
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)) !important;
    }
    body.fiche-page-view #fiche .section .rail {
        grid-auto-columns: clamp(120px, 42vw, 180px) !important;
    }
    body.fiche-page-view #fiche .section .card .card-media > img {
        width: 100% !important;
        height: auto !important;
        aspect-ratio: 9/12 !important;
        object-fit: cover !important;
    }
    /* Badge sizing/position centralized in common.css */

    .button { 
        flex: 1 1 auto;
        max-width: 200px;
        min-width: 120px;
        text-align: center; 
        padding: 14px 20px; 
        min-height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
}
/* Neutralize system dark mode: keep site appearance unchanged in dark mode */
@media (prefers-color-scheme: dark) {
    :root { color-scheme: light; }
}

/* Amélioration des performances */
@media (prefers-reduced-motion: reduce) {
    .carousel-slides {
        animation: none;
    }
    
    .carousel-indicator {
        animation: none;
    }
    
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* Footer */
.footer {
    margin-top: 60px;
    padding: 32px 40px;
    background: #000;
    color: #8fa3b8;
    border-top: 1px solid rgba(255,255,255,0.16); /* thin white delimiter */
}
.footer .footer-inner {
    max-width: 1280px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 16px;
    align-items: center;
}
.footer .footer-actions { justify-self: end; text-align: right; }
.footer a { color: #c8d4e0; text-decoration: none; }
.footer a:hover { color: #fff; }

/* Header extras (menu, search, avatar) */
.search { display: none; }

/* Small Discord button to replace avatar */
.discord-mini { display: none; width: 36px; height: 36px; border-radius: 50%; background: #5865F2; border: 1px solid rgba(255,255,255,0.18); color: #fff; font-weight: 800; align-items: center; justify-content: center; text-decoration: none; }
.discord-mini:hover { filter: brightness(0.95); }
/* Desktop: show full nav (links + search), keep only one external button */
@media (min-width: 900px) {
  .nav-links { display: flex; }
  .search { display: none; }
  .discord-mini { display: none; }
}
/* Ensure any yt link in nav stays hidden if present */
nav[aria-label="Navigation principale"] .yt-link { display: none !important; }

/* Rails (rows like Netflix) */
/* Base layout for all viewports (keeps cards correctly sized on mobile) */
.rail {
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: clamp(180px, 18vw, 240px);
    gap: 18px;
    overflow-x: auto;
    overflow-y: visible; /* allow hover lift without clipping */
    overscroll-behavior-x: contain;
}
/* Desktop-only: add side paddings + enable snapping */
@media (min-width: 769px) {
  .rail {
      padding: 0 40px;
      scroll-snap-type: inline mandatory; /* enable snapping on desktop only */
  }
}
.rail::-webkit-scrollbar { height: 10px; }
.rail::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.12); border-radius: 8px; }
@media (min-width: 769px) {
  .rail > .card { scroll-snap-align: start; }
}

  /* Global scrollbar styles provided by common.css */

/* ===== Rail edge spacing and clipping (desktop and mobile) ===== */
/* Ensure sections clip horizontal overflow so cards at the edges can be cut */
.section { overflow: hidden; }

/* Desktop: keep 40px left space and clip right edge like reference site */
@media (min-width: 769px) {
  .rail {
    padding-left: 40px !important;
    padding-right: 40px !important;
    margin-right: -40px !important; /* clip right padding so last cards can be cut */
    scroll-padding-inline-start: 40px !important; /* start scroll with left offset */
    /* Hide native scrollbar on desktop while preserving scroll */
    scrollbar-width: none;           /* Firefox */
    -ms-overflow-style: none;        /* IE/Edge legacy */
  }
  .rail::-webkit-scrollbar { display: none; } /* Chrome/Safari */
}

/* Mobile: smaller inset and same clipping behavior */
@media (max-width: 768px) {
  .rail {
    padding-left: 16px !important;
    padding-right: 16px !important;
    margin-right: -16px !important; /* clip right edge */
    scroll-padding-inline-start: 16px !important;
  }
}

  /* Card hover actions */
  .card { position: relative; }
  .card-actions {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
    background: linear-gradient(180deg, rgba(0,0,0,0) 20%, rgba(0,0,0,0.5) 60%, rgba(0,0,0,0.75) 100%);
    opacity: 0;
    transition: opacity .25s ease;
}
.card:hover .card-actions { opacity: 1; }
.carousel-arrow:focus { outline: 2px solid #2B22EE; outline-offset: 2px; }
.carousel-arrow:hover { background: rgba(0,0,0,0.7); transform: translateY(-1px); }
.carousel-arrow svg { width: 24px; height: 24px; display: block; }
.quick-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    background: #2B22EE;
    border: 1px solid #2B22EE;
    color: #fff;
    padding: 10px 14px;
    }
    /* Ensure any yt link in nav stays hidden if present */
    nav[aria-label="Navigation principale"] .yt-link { display: none !important; }

    /* Rails (rows like Netflix) - desktop only duplication */
    @media (min-width: 769px) {
        .rail {
            display: grid;
            grid-auto-flow: column;
            grid-auto-columns: clamp(180px, 18vw, 240px);
            gap: 18px;
            padding: 0 40px;
            overflow-x: auto;
            overflow-y: visible; /* allow hover lift without clipping */
            overscroll-behavior-x: contain;
            scroll-snap-type: inline mandatory; /* desktop only */
        }
        .rail::-webkit-scrollbar { height: 10px; }
        .rail::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.12); border-radius: 8px; }
        .rail > .card { scroll-snap-align: start; }
    }

    /* Card hover actions */
    .card { position: relative; }
    .card-actions {
        position: absolute;
        inset: 0;
        display: grid;
        place-items: center;
        background: linear-gradient(180deg, rgba(0,0,0,0) 20%, rgba(0,0,0,0.5) 60%, rgba(0,0,0,0.75) 100%);
        opacity: 0;
        transition: opacity .25s ease;
    }
    .card:hover .card-actions { opacity: 1; }
    .quick-btn:hover { background: #241DE0; }

    /* Mobile overrides for rails (use grid like before) */
 

     /* Subtle animated gradient background */
     body {
         background: radial-gradient(1200px 600px at 10% -10%, rgba(43,34,238,0.18), transparent 60%),
                     radial-gradient(1000px 700px at 100% 10%, rgba(108,92,231,0.18), transparent 60%),
                     linear-gradient(180deg, var(--bg-2), var(--bg-1));
     }
     
     /* ===== Visual Enhancements (Index) ===== */
    /* Section titles: plain white, no underline */
    .section h2 {
        border: none;
        color: #ffffff;
    }

    /* Card polish */
    .card {
        background: linear-gradient(180deg, rgba(26,35,50,0.65), rgba(26,35,50,0.9));
        box-shadow:
          0 10px 30px rgba(0,0,0,0.35),
          inset 0 1px 0 rgba(255,255,255,0.06);
    }
    .card:hover {
        transform: translateY(-6px);
        box-shadow: 0 14px 38px rgba(0,0,0,0.45);
    }
    .card img { will-change: transform; }

     /* Buttons */
     .carousel-btn,
     .quick-btn,
     .button {
         background: var(--brand-1);
         border: 1px solid rgba(255,255,255,0.14);
         box-shadow: 0 10px 20px rgba(43,34,238,0.25), inset 0 1px 0 rgba(255,255,255,0.12);
     }
     .carousel-btn:hover,
     .quick-btn:hover,
     .button:hover {
         filter: brightness(0.95);
         transform: translateY(-1px);
     }

     /* Keep partenariat button green even when using .button styles */
     .button.partner-link {
         background: #16a34a !important;
         border: 1px solid rgba(255,255,255,0.14);
         box-shadow: 0 10px 20px rgba(22,163,74,0.25), inset 0 1px 0 rgba(255,255,255,0.12);
     }
     .button.partner-link:hover {
         background: #15803d !important;
         filter: brightness(0.98);
     }

     /* Discord footer button (blue) */
     .button.discord-btn {
         background: #5865F2 !important; /* Discord brand */
         border: 1px solid rgba(255,255,255,0.14);
         box-shadow: 0 10px 20px rgba(88,101,242,0.25), inset 0 1px 0 rgba(255,255,255,0.12);
     }
     .button.discord-btn:hover {
         background: #4752C4 !important;
         filter: brightness(0.98);
     }
     .button.discord-btn svg {
         width: 35px;
         height: 35px;
         display: inline-block;
         vertical-align: middle;
     }

     /* YouTube footer button (red) */
     .button.youtube-btn {
         background: #FF0000 !important; /* YouTube brand */
         border: 1px solid rgba(255,255,255,0.14);
         box-shadow: 0 10px 20px rgba(255,0,0,0.25), inset 0 1px 0 rgba(255,255,255,0.12);
     }
     .button.youtube-btn:hover {
         background: #CC0000 !important;
         filter: brightness(0.98);
     }
     .button.youtube-btn svg {
         width: 30px;
         height: 30px;
         display: inline-block;
         vertical-align: middle;
         position: relative;
         top: -2px; /* slightly up */
     }

     /* Footer buttons aligned to the right while keeping original layout */
     .footer .footer-inner > div:nth-child(2) { text-align: right; }
     .footer .footer-inner > div:nth-child(2) > span { float: left; }
     .footer .footer-inner > div:nth-child(2)::after { content: ""; display: table; clear: both; }

     /* Prevent cards from being clipped on hover translateY in all sections */
    .section .rail { padding-top: 10px; }

     /* Focus-visible ring */
     :where(a, button, .quick-btn, input, [tabindex]):focus-visible {
         outline: 2px solid rgba(99,102,241,0.9);
         outline-offset: 2px;
         box-shadow: 0 0 0 6px rgba(99,102,241,0.25);
     }

     /* Smoother transitions */
    * { transition: background-color .25s ease, color .25s ease, border-color .25s ease, transform .25s ease, box-shadow .25s ease; }

    /* Category label via data-type attribute for new genre sections */
    .card .card-info::before { margin-right: 8px; }
    .card .card-info[data-type="film"]::before { content: "Film"; }
    .card .card-info[data-type="serie"]::before { content: "Série"; }
    .card .card-info[data-type="trailer"]::before { content: "Trailer"; }

    /* Improve legibility for 'Trailer' in film5 title: keep lowercase and use a font with distinct 'i' dot */
    #film5-title .trailer-word {
        text-transform: none !important;
        font-family: Verdana, Tahoma, "Segoe UI", Arial, sans-serif;
        letter-spacing: 0.3px;
    }

    /* ===== Fiche page specific overrides ===== */
    body.fiche-page-view .fiche-content {
        /* Revert to transparent background to avoid double background */
        background: transparent !important;
        border: none !important;
        border-radius: 0 !important;
        box-shadow: none !important;
        max-height: none !important;
        padding: 16px !important; /* keep a bit more breathing room */
        margin: 0 auto 28px !important; /* space before similar section */
        max-width: 1320px; /* allow room for columns + gap so nothing is cut */
        width: 100%;
        display: flex !important;            /* use flex to avoid grid side-effects */
        justify-content: center;              /* center the two columns */
        align-items: flex-start;              /* align to top */
        gap: 32px;                            /* space between image and text */
    }
    /* Desktop: align fiche page logo like index (account for hamburger space on index) */
    @media (min-width: 769px) {
      body.fiche-page-view nav[aria-label="Navigation principale"] .logo {
        margin-left: 88px !important;
      }
    }
    /* Subtle top separator before similar section on fiche pages */
    #fiche > .section {
        border-top: 1px solid rgba(255,255,255,0.16);
        padding-top: 20px;
        margin-top: 12px;
    }
    body.fiche-page-view .fiche-content.landscape-layout { display: flex !important; }
    /* Responsive, non-cutting columns using clamp() so they adapt to viewport */
    body.fiche-page-view .fiche-left {
        align-items: stretch !important;
        flex: 1 1 clamp(520px, 44vw, 640px);
        min-width: 0; /* allow shrink without overflow */
    }
    body.fiche-page-view .fiche-right {
        padding-left: 0 !important;
        flex: 1 1 clamp(480px, 36vw, 560px);
        min-width: 0; /* allow text to shrink inside */
        max-width: 100%;
    }
    /* Ensure inner content can wrap instead of overflowing out of the container */
    body.fiche-page-view .fiche-right, 
    body.fiche-page-view .fiche-right > * { max-width: 100%; overflow-wrap: anywhere; word-break: break-word; }

    /* Medium screens: relax gaps and bases a bit so nothing touches edges */
    @media (max-width: 1100px) {
        body.fiche-page-view .fiche-content { gap: 20px; }
        body.fiche-page-view .fiche-left  { flex-basis: clamp(460px, 48vw, 600px); }
        body.fiche-page-view .fiche-right { flex-basis: clamp(420px, 44vw, 540px); }
    }
    
    /* Hide the top-right search button on fiche pages */
    body.fiche-page-view .nav-links .search-link { display: none !important; }
    
    
/* FINAL OVERRIDE: hide all popup titles on mobile (placed at end to win cascade) */
@media (max-width: 768px) {
  .fiche-popup .fiche-content h3,
  .fiche-popup .fiche-right > h3,
  .fiche-popup h3 { display: none !important; margin: 0 !important; }
}

/* JS-driven mobile flag: if body.has('is-mobile'), hide popup titles too */
body.is-mobile .fiche-popup h3 { display: none !important; margin: 0 !important; }
body.is-mobile #infos-title,
body.is-mobile #youtube-title,
body.is-mobile #partenariats-title { display: none !important; }

/* Mobile override: keep section titles visible inside "Voir tout" popups and shrink if needed */
@media (max-width: 768px) {
  .fiche-popup[id^="all-"] .fiche-content h3,
  .fiche-popup[id^="all-"] .fiche-right > h3,
  .fiche-popup[id^="all-"] h3 {
    display: block !important;
    margin: 0 0 8px 0 !important;
    font-size: clamp(16px, 5.4vw, 22px) !important;
    line-height: 1.2 !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    text-align: left !important;
  }
  /* Align title with close button: place close at top-right and reserve space on the right of title */
  .fiche-popup[id^="all-"] .fiche-content { position: relative; }
  .fiche-popup[id^="all-"] .top-right-close {
    position: absolute !important;
    top: 8px; right: 8px;
    margin: 0 !important;
  }
  .fiche-popup[id^="all-"] .fiche-right > h3 { 
    /* align vertically with close button top */
    margin-top: 8px !important;
    padding-right: 120px; /* keep text clear from the close button */
  }
}

/* ===== AMÉLIORATIONS DESIGN PROFESSIONNEL ===== */

/* Améliorations des icônes SVG */
.drawer svg, .button svg, .link svg, h2 svg, h3 svg {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.drawer .link:hover svg, .button:hover svg {
  transform: scale(1.1);
}

/* Effets de fondu et animations modernes */
.carousel-slide {
  transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.carousel-slide::before, .carousel-slide::after {
  transition: opacity 0.4s ease-in-out;
}

/* Améliorations des cartes avec effets de profondeur */
.card {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.08) 0%,
    rgba(255, 255, 255, 0.04) 50%,
    rgba(255, 255, 255, 0.02) 100%
  );
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
  z-index: 1;
}

.card:hover::before {
  opacity: 1;
}

.card:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 
    0 20px 40px rgba(0, 0, 0, 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

/* Mini-descriptions au survol - SUPPRIMÉES */
.card-media {
  position: relative;
  overflow: hidden;
}

/* Améliorations des boutons avec effets de brillance */
.button, .carousel-btn {
  position: relative;
  overflow: hidden;
  background: var(--brand-1);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.button:not(.episode-btn)::before, .carousel-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.3),
    transparent
  );
  transition: left 0.5s ease;
}

.button:not(.episode-btn):hover::before, .carousel-btn:hover::before {
  left: 100%;
}

/* Désactiver les effets animés pour les boutons dans les sections de séries */
#series .button::before,
.fiche-popup .button::before {
  display: none;
}

#series .button:hover,
.fiche-popup .button:hover {
  transform: none;
  box-shadow: none;
}

/* Éviter que les cartes soient coupées en haut dans les fiches */
.fiche-popup .rail {
  padding-top: 20px;
  overflow: visible;
}

.fiche-popup .section {
  overflow: visible;
}

/* S'assurer que le conteneur parent ne coupe pas non plus */
.fiche-popup .fiche-content {
  overflow: visible;
}

.button:hover, .carousel-btn:hover {
  transform: translateY(-2px);
  box-shadow: 
    0 10px 25px rgba(43, 34, 238, 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.2);
}

/* Améliorations des sections avec animations d'apparition */
.section {
  opacity: 0;
  transform: translateY(30px);
  animation: fadeInUp 0.8s ease forwards;
}

.section:nth-child(1) { animation-delay: 0.1s; }
.section:nth-child(2) { animation-delay: 0.2s; }
.section:nth-child(3) { animation-delay: 0.3s; }
.section:nth-child(4) { animation-delay: 0.4s; }

@keyframes fadeInUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Améliorations des catégories avec effets de survol */
.category-card {
  position: relative;
  overflow: hidden;
}

.category-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    45deg,
    rgba(43, 34, 238, 0.8) 0%,
    rgba(108, 92, 231, 0.6) 100%
  );
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 1;
}

.category-card:hover::before {
  opacity: 1;
}

/* Texte de catégorie au survol supprimé */

/* Améliorations des popups avec animations fluides */
.fiche-popup {
  backdrop-filter: blur(10px);
}

.fiche-content {
  animation: popupSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  background: rgba(21, 29, 40, 0.95) !important;
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
  box-shadow: 
    0 25px 50px rgba(0, 0, 0, 0.6),
    0 0 0 1px rgba(255, 255, 255, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
}

@keyframes popupSlideIn {
  from {
    opacity: 0;
    transform: scale(0.9) translateY(20px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

/* Améliorations de la navigation avec effets subtils */
nav {
  backdrop-filter: blur(15px);
  transition: all 0.3s ease;
}

.hamburger {
  transition: all 0.3s ease;
}

.hamburger:hover {
  transform: scale(1.1);
}

.hamburger .bar {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Améliorations du carousel avec transitions fluides */
.carousel-content {
  background: linear-gradient(
    to top,
    rgba(11, 17, 23, 0.8) 0%,
    rgba(11, 17, 23, 0.6) 40%,
    rgba(11, 17, 23, 0.3) 70%,
    transparent 100%
  );
}

.carousel-title {
  text-shadow: 0 4px 8px rgba(0, 0, 0, 0.8);
  animation: titleGlow 2s ease-in-out infinite alternate;
}

@keyframes titleGlow {
  from {
    text-shadow: 0 4px 8px rgba(0, 0, 0, 0.8);
  }
  to {
    text-shadow: 
      0 4px 8px rgba(0, 0, 0, 0.8),
      0 0 20px rgba(255, 255, 255, 0.3);
  }
}

.carousel-description {
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
}

/* Améliorations des étoiles avec animation */
.stars {
  color: #FFD700;
  text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
  animation: starTwinkle 2s ease-in-out infinite alternate;
}

@keyframes starTwinkle {
  from {
    text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
  }
  to {
    text-shadow: 
      0 0 10px rgba(255, 215, 0, 0.8),
      0 0 20px rgba(255, 215, 0, 0.4);
  }
}

/* Améliorations des descriptions contextuelles */
.carousel-description {
  position: relative;
  padding-left: 20px;
}

.carousel-description::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: var(--brand-1);
  border-radius: 2px;
}

/* Améliorations des titres de sections */
.section h2 {
  position: relative;
  display: flex;
  align-items: center;
  padding-bottom: 4px;
}

/* Suppression des barres sous les titres */

/* Améliorations de la typographie */
.carousel-title, .section h2, .fiche-popup h3 {
  font-weight: 800;
  letter-spacing: -0.02em;
}

.carousel-description, .fiche-popup p {
  font-weight: 400;
  letter-spacing: 0.01em;
  line-height: 1.6;
}

/* Améliorations des genres tags */
.genre-tag, .carousel-genre-tag {
  position: relative;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
}

.genre-tag:hover, .carousel-genre-tag:hover {
  background: rgba(255, 255, 255, 0.15);
  border-color: rgba(255, 255, 255, 0.25);
  transform: translateY(-1px);
}

/* Améliorations des étoiles dans les ratings */
.stars {
  font-family: 'Segoe UI Symbol', 'Apple Color Emoji', sans-serif;
  font-weight: normal;
}

/* Améliorations de l'accessibilité */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Améliorations des focus states */
.card:focus-visible, .category-card:focus-visible, .button:focus-visible {
  outline: 3px solid rgba(43, 34, 238, 0.8);
  outline-offset: 2px;
}

/* Améliorations du contraste pour l'accessibilité */
.carousel-description, .fiche-popup p {
  color: rgba(255, 255, 255, 0.95);
}

.section h2 {
  color: #ffffff;
}

/* Responsive: désactiver certaines animations sur mobile pour les performances */
@media (max-width: 768px) {
  .card:hover {
    transform: translateY(-4px) scale(1.01);
  }
  
  .carousel-title {
    animation: none;
  }
  
  .stars {
    animation: none;
  }
  
  /* Simplifier les effets sur mobile */
  .card::before {
    display: none;
  }
  
  /* Garder l'overlay bleu pour les catégories sur mobile - renforcé */
  .category-card::before {
    background: linear-gradient(
      135deg,
      rgba(43, 34, 238, 0.6) 0%,
      rgba(43, 34, 238, 0.5) 50%,
      rgba(43, 34, 238, 0.4) 100%
    );
  }
  
  /* Activer l'overlay au toucher sur mobile */
  .category-card:active::before,
  .category-card:focus::before {
    opacity: 1;
  }
  
  .carousel-description::before {
    width: 2px;
  }
}

/* Centrer les sections spécifiques */
#continue-watching,
.categories-section {
  margin: 0 auto;
  max-width: calc(100% - 80px);
}

@media (max-width: 768px) {
  #continue-watching,
  .categories-section {
    max-width: calc(100% - 32px);
  }
  
  /* Ajuster la taille de l'icône "soutenir" sur mobile */
  .drawer .cta-row a[href*="tipeee"] svg {
    width: 18px !important;
    height: 18px !important;
  }
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .carousel-description::before {
    width: 2px;
  }
}

/* Améliorations pour les écrans haute résolution */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .carousel-title, .section h2 {
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}