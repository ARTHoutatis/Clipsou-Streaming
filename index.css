:root {
    --bg-1: #0b1117;
    --bg-2: #0e141b;
    --brand-1: #2B22EE;
    --brand-2: #6c5ce7;
    --home-shift: 20px; /* desktop default */
}

/* ===== Homepage Hero ===== */
.home-hero {
  position: relative;
  margin: 0 0 22px;
  aspect-ratio: 16 / 8;
  height: auto;
  min-height: 260px;
  max-height: 460px;
  overflow: hidden;
}
.home-hero .hero-bg {
  position: absolute; inset: 0;
  background-size: cover;
  background-position: center var(--hero-pos, 22%);
  filter: brightness(0.88);
  transform: scale(1.02);
}
.home-hero .hero-overlay {
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, rgba(11,17,23,0.12) 0%, rgba(11,17,23,0.42) 58%, rgba(11,17,23,0.78) 100%),
              linear-gradient(90deg, rgba(11,17,23,0.55) 0%, rgba(11,17,23,0.20) 38%, rgba(11,17,23,0) 60%);
  pointer-events: none;
}
.home-hero .hero-content {
  position: relative;
  z-index: 1;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  padding: 22px 32px;
}
.home-hero .hero-box {
  display: inline-block;
  max-width: min(720px, 92%);
  background: linear-gradient(180deg, rgba(11,17,23,0.55) 0%, rgba(11,17,23,0.38) 100%);
  backdrop-filter: saturate(1.0) blur(4px);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 12px;
  padding: 14px 16px 14px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.04);
}
.home-hero .hero-title {
  margin: 0 0 6px; font-size: clamp(22px, 4.6vw, 34px); font-weight: 900; letter-spacing: .2px;
}
.home-hero .hero-subtitle { margin: 0 0 12px; font-size: clamp(13px, 2vw, 16px); color: rgba(255,255,255,0.9); }
.home-hero .hero-actions { display: flex; gap: 10px; flex-wrap: wrap; }
.home-hero .button.primary { 
  background: #2B22EE; 
  border: 1px solid #2B22EE; 
  text-decoration: none; 
  color: #fff; 
  padding: 10px 14px; 
  border-radius: 8px; 
  font-weight: 800;
  transition: filter 0.2s ease !important;
  box-shadow: none !important;
}
.home-hero .button.primary:hover { 
  filter: brightness(1.08) !important;
  transform: none !important;
  box-shadow: none !important;
}
.home-hero .button.ghost { background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.12); text-decoration: none; color: #fff; padding: 10px 14px; border-radius: 8px; font-weight: 800; }
.home-hero .button.ghost:hover { background: rgba(255,255,255,0.10); }
@media (max-width: 768px) {
  .home-hero { margin: 0 0 14px; max-height: 380px; }
  .home-hero .hero-content { padding: 14px 12px 16px; }
  .home-hero .hero-box { border-radius: 12px; padding: 12px 12px 14px; max-width: 100%; }
}

/* ===== Hero Claim Line ===== */
.hero-claim { margin: 2px 0 4px; }
.hero-claim h2 {
  margin: 0 var(--gutter);
  text-align: center;
  font-size: 26px;
  font-weight: 900;
  color: #ffffff;
  letter-spacing: 0.3px;
  text-shadow: 0 1px 0 rgba(0,0,0,0.2);
}
@media (max-width: 768px) {
  .hero-claim h2 { margin: 0 16px; font-size: clamp(18px, 5.6vw, 22px); }
}


/* Prevent Chrome scroll anchoring from moving the background when images load while a popup is open */
html, body { overflow-anchor: auto; }
html:has(.fiche-popup:target),
body.popup-open,
html.popup-open {
  overflow-anchor: none !important;
}


/* Continue Watching: use fades that match the box background color (#151D28) */
@media (min-width: 769px) {
  /* Desktop: make rail a masked scroll container for arrow navigation */
  #continue-watching .rail { overflow-x: hidden !important; overflow-y: visible !important; }
  /* In Continue Watching, extend the fades across the full box height */
  #continue-watching .rail-fade {
    top: 0 !important;
    height: 100% !important;
  }
  #continue-watching .rail-fade.left {
    background: linear-gradient(90deg,
      rgba(21,26,32,0.96) 0%,
      rgba(21,26,32,0.82) 38%,
      rgba(21,26,32,0.58) 60%,
      rgba(21,26,32,0.00) 100%
    ) !important;
  }
  #continue-watching .rail-fade.right {
    background: linear-gradient(270deg,
      rgba(21,26,32,0.96) 0%,
      rgba(21,26,32,0.82) 38%,
      rgba(21,26,32,0.58) 60%,
      rgba(21,26,32,0.00) 100%
    ) !important;
  }
  /* Match arrow fill as well inside the box - couleur corrigée */
  #continue-watching .rail-arrow {
    background: rgba(21,26,32,0.85) !important; /* Couleur #151A20 */
    border-color: rgba(255,255,255,0.12) !important;
  }
  #continue-watching .rail-arrow:hover { background: rgba(21,26,32,1) !important; }
}

/* ===== Full-screen Player Overlay ===== */
.player-overlay {
  position: fixed;
  inset: 0;
  z-index: 12000;
  background: rgba(0,0,0,0.95);
  display: none;
  align-items: center;
  justify-content: center;
}
.player-overlay.open { display: flex; }
.player-shell {
  position: relative;
  width: 100%;
  height: 100%;
  display: grid;
  grid-template-rows: auto 1fr auto;
  background: #000;
}
.player-topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 16px;
  background: linear-gradient(180deg, rgba(0,0,0,0.7), rgba(0,0,0,0));
}
.player-title { font-size: 16px; font-weight: 700; color: #fff; margin: 0; }
.player-skip {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: rgba(255,255,255,0.06);
  color: #fff;
  border: 1px solid rgba(255,255,255,0.18);
  font-size: 18px;
  line-height: 1;
  padding: 12px 16px;
  border-radius: 0;
  cursor: pointer;
  outline: none;
  box-shadow: none;
}
.player-skip:hover, .player-skip:focus { border-color: rgba(255,255,255,0.26); background: rgba(255,255,255,0.10); }
.player-close {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: transparent; /* no fill */
  color: #fff;
  border: 1px solid rgba(255,255,255,0.12);
  font-size: 16.8px; /* 1.2x */
  line-height: 1;
  padding: 9.6px 14.4px; /* 1.2x */
  border-radius: 9.6px; /* 1.2x */
  cursor: pointer;
  outline: none;
  box-shadow: none;
}
.player-close:hover, .player-close:focus {
  background: transparent; /* keep transparent on hover/focus */
  border-color: rgba(255,255,255,0.18);
  outline: none;
  box-shadow: none;
}
.player-stage { position: relative; width: 100%; height: 100%; background: #000; }
.player-stage video, .player-stage iframe { position: absolute; inset: 0; width: 100%; height: 100%; display: block; border: 0; object-fit: cover; }
.player-stage .player-skip {
  position: absolute;
  right: 16px;
  bottom: calc(20px + env(safe-area-inset-bottom));
  z-index: 2;
}
.player-footer { padding: 10px 16px; color: rgba(255,255,255,0.8); font-size: 13px; background: linear-gradient(0deg, rgba(0,0,0,0.7), rgba(0,0,0,0)); }

/* Lock background when player is open */
body.player-open, html.player-open {
  overflow: hidden !important;
  height: 100vh !important;
}

/* Player topbar tweaks on mobile: keep close button compact */
@media (max-width: 768px) {
  .player-skip { font-size: 16px; padding: 10px 14px; }
  .player-close {
    padding: 8px 10px;
    gap: 0;
    font-size: 18px; /* slightly larger cross for touch */
  }
}

/* ===== Desktop-only rail arrows ===== */
@media (min-width: 769px) {
  .section { position: relative; }
  .rail-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    width: 44px; height: 44px;
    display: inline-flex;
    align-items: center; justify-content: center;
    color: #ffffff;
    background: rgba(0,0,0,0.5);
    border: 1px solid rgba(255,255,255,0.18);
    border-radius: 8px;
    cursor: pointer;
    z-index: 2;
    transition: background .15s ease, opacity .2s ease, transform .2s ease;
    opacity: 0.85;
    -webkit-tap-highlight-color: transparent;
    transform: translateX(0);
  }
  .rail-arrow:hover { background: rgba(0,0,0,0.65); opacity: 1; }
  .rail-arrow:disabled { opacity: 0.35; cursor: default; pointer-events: none; }
  /* Move arrows inward so they sit just inside the 80px fades */
  .rail-arrow.prev { left: 30px; }
  .rail-arrow.next { right: 30px; }
  .rail-arrow svg { width: 24px; height: 24px; display: block; }

  /* Gradient fades on edges to hint overflow and softly cut cards */
  .rail-fade {
    position: absolute !important;
    top: -80px !important; /* Étendre encore plus vers le haut */
    width: 80px !important;
    height: calc(100% + 160px) !important; /* Hauteur maximale pour couvrir toute carte agrandie */
    pointer-events: none !important;
    z-index: 5 !important;
    opacity: 0 !important; /* Masqué par défaut */
    transform: translateX(0) !important;
    transition: opacity .2s ease, transform .2s ease;
  }
  
  /* Afficher les dégradés dès qu'ils ne sont pas masqués (indépendant du hover) */
  .rail-fade:not(.hidden) {
    opacity: 1 !important;
  }
  .rail-fade.left {
    left: 0 !important;
    background: linear-gradient(90deg,
      rgba(11,17,23,0.96) 0%,
      rgba(11,17,23,0.82) 38%,
      rgba(11,17,23,0.58) 60%,
      rgba(11,17,23,0.00) 100%
    ) !important;
  }
  .rail-fade.right {
    right: 0 !important;
    background: linear-gradient(270deg,
      rgba(11,17,23,0.96) 0%,
      rgba(11,17,23,0.82) 38%,
      rgba(11,17,23,0.58) 60%,
      rgba(11,17,23,0.00) 100%
    ) !important;
  }
  /* Keep fades above cards and arrows above fades */
  .rail-fade { z-index: 65; }
  .rail-arrow { z-index: 70; }

  /* Hidden states: slide out of the viewport with fade */
  .rail-arrow.prev.hidden, .rail-fade.left.hidden { transform: translateX(-110%); opacity: 0; }
  .rail-arrow.next.hidden, .rail-fade.right.hidden { transform: translateX(110%); opacity: 0; }
  .rail-fade.hidden { pointer-events: none; }

  /* Utility: disable transitions when we want instant disappearance */
  .rail-arrow.immediate, .rail-fade.immediate { transition: none !important; }
}

/* Hide arrows on mobile */
@media (max-width: 768px) {
  .rail-arrow { display: none !important; }
  .rail-fade { display: none !important; }
}

@media (min-width: 769px) {
  body.fiche-page-view #fiche .rail-arrow {
    background: rgba(21,26,32,0.85);
    border-color: rgba(255,255,255,0.12);
  }
  body.fiche-page-view #fiche .rail-arrow:hover {
    background: rgba(21,26,32,1);
  }
}

/* Partner logos: contain inside their fixed box and support simple position codes */
.partner-logo {
  display: block;
  width: auto; /* width/height are set inline in HTML for exact box size */
  height: auto;
  object-fit: contain;
  object-position: center center;
  background: transparent;
}
.partner-logo[data-pos="center"],
.partner-logo:not([data-pos]) { object-position: center center; }
.partner-logo[data-pos="top"] { object-position: top center; }
.partner-logo[data-pos="bottom"] { object-position: bottom center; }
.partner-logo[data-pos="left"] { object-position: center left; }
.partner-logo[data-pos="right"] { object-position: center right; }
.partner-logo[data-pos="top-left"],
.partner-logo[data-pos="tl"] { object-position: top left; }
.partner-logo[data-pos="top-right"],
.partner-logo[data-pos="tr"] { object-position: top right; }
.partner-logo[data-pos="bottom-left"],
.partner-logo[data-pos="bl"] { object-position: bottom left; }
.partner-logo[data-pos="bottom-right"],
.partner-logo[data-pos="br"] { object-position: bottom right; }

/* Desktop/tablet: ensure mobile-only overlay stays hidden */
.fiche-left .fiche-overlay { display: none; }

/* Ensure no parent color overrides the gradient fill */
#film7 .fiche-right #film7-title .urbanos-grad {
    -webkit-background-clip: text !important;
    background-clip: text !important;
    color: transparent !important;
    -webkit-text-fill-color: transparent !important;
}

body {
    margin: 0;
    background: linear-gradient(180deg, var(--bg-1) 0%, var(--bg-2) 100%);
    min-height: 100vh;
    color: #fff;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    -webkit-tap-highlight-color: transparent;
    overflow-x: hidden; /* prevent global horizontal scrollbar */
}

/* Index only: use solid background (no gradient) */
body:not(.fiche-page-view) {
  background: var(--bg-1) !important;
}

/* ===== Resume confirm dialog (fiche page) ===== */
.resume-dialog-overlay {
  position: fixed;
  inset: 0;
  z-index: 11500;
  background: rgba(0,0,0,0.6);
  display: none;
  align-items: center;
  justify-content: center;
}
.resume-dialog-overlay.open { display: flex; }
.resume-dialog-box {
  background: #1a2332;
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 12px;
  padding: 16px;
  width: min(92vw, 420px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.45);
}
.resume-dialog-box h4 { margin: 0 0 8px 0; font-size: 18px; }
.resume-dialog-box p { margin: 0 0 14px 0; font-size: 14px; color: rgba(255,255,255,0.9); }
.resume-dialog-actions {
  display: flex;
  gap: 12px;
  justify-content: stretch;
  align-items: center;
}
.resume-dialog-actions .button {
  flex: 1 1 0; /* Force equal width distribution */
  min-width: 0;
  max-width: none;
  padding: 12px 18px !important;
  font-size: 14px !important;
  font-weight: 600 !important;
  text-align: center !important;
  height: 44px !important;
  min-height: 44px !important;
  max-height: 44px !important;
  line-height: 1.4 !important;
  border-width: 1px !important;
  box-sizing: border-box !important;
}
/* Garantir aucun changement au survol/focus/active */
.resume-dialog-actions .button:hover,
.resume-dialog-actions .button:focus,
.resume-dialog-actions .button:active {
  padding: 12px 18px !important;
  font-size: 14px !important;
  font-weight: 600 !important;
  height: 44px !important;
  min-height: 44px !important;
  max-height: 44px !important;
  line-height: 1.4 !important;
  border-width: 1px !important;
  transform: none !important;
  box-shadow: none !important;
}

@media (max-width: 540px) {
  .resume-dialog-actions {
    flex-direction: column;
    align-items: stretch;
  }
  .resume-dialog-actions .button {
    width: 100% !important;
    flex: 0 0 auto;
  }
}

/* Bloquer le scroll quand une popup est active */
body:has(.fiche-popup:target) {
    overflow: hidden;
    height: 100vh;
}

/* Activate global dim when any popup is open */
body:has(.fiche-popup:target)::before {
    background: rgba(0,0,0,0.6);
    pointer-events: auto; /* block clicks to underlying UI */
}
/* JS-driven fallback: also dim when body has .popup-open (set in index.js) */
body.popup-open::before {
    background: rgba(0,0,0,0.6);
    pointer-events: auto; /* block clicks to underlying UI */
}

body::before {
    content: '';
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: transparent;
    pointer-events: none;
    z-index: 10990; /* above nav and just below popup (11000) */
}

/* Disable nav interactions while a popup is open */
body:has(.fiche-popup:target) nav[aria-label="Navigation principale"],
body.popup-open nav[aria-label="Navigation principale"] {
  pointer-events: none !important; /* keep non-interactive while popup open */
  background: #0b1117 !important;  /* enforce solid opaque background */
  backdrop-filter: none !important;
  box-shadow: none !important;
}

/* ===== Discord banner (global) ===== */
.section#discord-invite { margin: 8px 0 12px; }
.discord-banner {
  margin: 14px var(--gutter) 0;
  padding: 14px 14px 16px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.10);
  background: radial-gradient(120% 120% at -10% -10%, rgba(88,101,242,0.35) 0%, rgba(58,68,210,0.25) 45%, rgba(21,27,39,0.85) 100%),
              rgba(255,255,255,0.04);
  box-shadow: 0 8px 24px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.05);
  display: flex; /* default (mobile overridden below) */
  align-items: center;
  justify-content: space-between;
  gap: 16px;
}
.discord-banner-title {
  margin: 0 0 6px 0;
  font-size: 18px;
  font-weight: 800;
  color: #ffffff;
}
.discord-banner-text {
  margin: 0 0 10px 0;
  font-size: 14px;
  line-height: 1.5;
  color: rgba(255,255,255,0.92);
}
.discord-banner-content { flex: 1 1 auto; min-width: 0; display: flex; flex-direction: column; }
.discord-banner-title,
.discord-banner-text { overflow-wrap: anywhere; word-break: break-word; }
.discord-banner-btn {
  display: inline-flex;
  flex: 0 0 auto; /* keep button to the right, never shrink under text */
  align-items: center;
  gap: 8px;
  padding: 14px 18px;
  border-radius: 10px;
  text-decoration: none;
  color: #fff;
  font-weight: 800;
  letter-spacing: .2px;
  font-size: 16px;
  background: #5865F2;
  border: 1px solid rgba(255,255,255,0.16);
  box-shadow: 0 10px 24px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.06);
  transition: transform .2s ease, box-shadow .2s ease, filter .2s ease, background .2s ease;
  white-space: nowrap;
}
@media (hover: hover) {
  .discord-banner-btn:hover { transform: translateY(-1px); box-shadow: 0 14px 30px rgba(0,0,0,0.45); }
}
.discord-banner-btn:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px rgba(255,255,255,0.30), 0 10px 24px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.06);
}
@media (max-width: 768px) {
  .discord-banner { margin: 10px 12px 0; padding: 12px; border-radius: 10px; flex-direction: column; align-items: stretch; gap: 12px; }
  .discord-banner-title { font-size: 18px; text-align: center; display: flex; flex-direction: column; align-items: center; gap: 4px; }
  .discord-banner-title-line1,
  .discord-banner-title-line2 { display: block; font-size: 18px; line-height: 1.25; text-align: center; }
  .discord-banner-title-line1 { white-space: nowrap; }
  .discord-banner-text { font-size: 13px; }
  .discord-banner-btn { padding: 12px 14px; border-radius: 8px; width: 100%; justify-content: center; font-size: 15px; }
}

/* Desktop/tablet: use grid to reserve space for the button on the right */
@media (min-width: 769px) {
  .discord-banner { display: grid; grid-template-columns: 1fr auto; column-gap: 16px; align-items: center; }
  .discord-banner-btn { justify-self: end; }
}

@media (min-width: 1024px) {
  .discord-banner-btn { margin-right: 30px; }
}

/* Mobile: shrink and shift left the 'Reprendre la lecture' title */
@media (max-width: 768px) {
  #continue-watching > h2 {
    margin: 0 12px 8px !important; /* align with mobile gutters */
    font-size: 18px !important;
  }
}

/* .logo styles are centralized in common.css */
.nav-links { display: flex; gap: 15px; }
.nav-links a { padding: 10px 20px; border-radius: 5px; font-weight: 600; color: #fff; text-decoration: none; transition: all .3s ease; white-space: nowrap; }

.discord-link { 
  background: #2B22EE;
  transition: filter 0.2s ease !important;
  box-shadow: none !important;
}
.discord-link:hover { 
  filter: brightness(1.08) !important;
  transform: none !important;
  box-shadow: none !important;
}

.yt-link { background: #FF0000; display: none !important; }
.yt-link:hover { background: #CC0000; }

/* Partenariat button in navbar */
.partner-link { background: #16a34a; }
.partner-link:hover { background: #15803d; }

.search-link { background: transparent; border: 0; color: #fff; }
.search-link:hover { background: transparent; }

/* Admin button: align with other nav items */
.nav-links .admin-link {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  background: transparent;
  color: #fff;
  border: 0;
}
.nav-links .admin-link svg { width: 18px; height: 18px; display: block; }

/* Lower the Recherche link slightly on desktop/tablet */
@media (min-width: 769px) {
  .nav-links .search-link { top: 2.5px; }
  .nav-links .admin-link { position: relative; top: 2.5px; }
}

/* Index-only: raise Accueil by 1px (global is 3px, set to 2px here) */
@media (min-width: 769px) {
  body:not(.fiche-page-view) nav[aria-label="Navigation principale"] .logo .home-link { top: 2.5px; }
}

/* Accueil alignment is handled globally in common.css (top: 3px) */

/* Carousel */
.carousel-section { margin: 0 0 60px; overflow: hidden; }

.carousel-container {
    position: relative;
    width: 100%;
    height: auto;
    aspect-ratio: 21 / 9;
    min-height: 400px;
    overflow: hidden; /* prevent any overflow on all devices */
}

.carousel-slides { display: flex; width: 500%; height: 100%; animation: carousel-auto 25s infinite; margin: 0; padding: 0; gap: 0; transition: transform .4s ease; }

/* Manual navigation: stop auto animation when user interacts */
.carousel-slides.manual { animation: none !important; }

@keyframes carousel-auto {
    0%, 18% { transform: translateX(0); }
    20%, 38% { transform: translateX(-20%); }
    40%, 58% { transform: translateX(-40%); }
    60%, 78% { transform: translateX(-60%); }
    80%, 98% { transform: translateX(-80%); }
    100% { transform: translateX(0); }
}

.carousel-slide {
    flex: 0 0 20%; /* Chaque slide = 20% de la largeur totale */
    min-width: 20%;
    margin: 0;
    position: relative;
    background-size: cover;
    background-position: top center;
    background-repeat: no-repeat;
    aspect-ratio: 21 / 9;
    transform: translateZ(0); /* GPU compositing */
}

/* Make slide images cover the 21:9 frame */
.carousel-slide > img {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    z-index: 0;
    display: block;
}

/* Hide carousel images until they are fully loaded to avoid showing placeholders */
.carousel-slide > img { opacity: 0; transition: opacity .2s ease; }
.carousel-slide > img.is-loaded { opacity: 1; }

/* Hide carousel content until background image is loaded */
.carousel-content { opacity: 0; transition: opacity .2s ease; }
.carousel-slide > img.is-loaded + .carousel-content { opacity: 1; }

.carousel-slide.alex-focus {
    /* Responsive vertical focus using percentage for desktop/tablet */
    background-position: center 12%;
}

/* Mirror alex-focus vertical framing when using <img> backgrounds */
.carousel-slide.alex-focus > img {
    object-position: center 12%;
}

.carousel-slide::before {
    content: '';
    position: absolute;
    inset: 0;
    /* Dégradé vertical plus subtil (bas -> haut) */
    background: linear-gradient(
        to top,
        rgba(11, 17, 23, 0.85) 0%,
        rgba(11, 17, 23, 0.60) 35%,
        rgba(11, 17, 23, 0.25) 65%,
        rgba(11, 17, 23, 0.00) 100%
    );
    z-index: 1;
}

/* Dégradé latéral gauche plus doux (gauche -> droite) */
.carousel-slide::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
        to right,
        rgba(11, 17, 23, 0.75) 0%,
        rgba(11, 17, 23, 0.45) 15%,
        rgba(11, 17, 23, 0.15) 35%,
        rgba(11, 17, 23, 0.00) 50%
    );
    z-index: 1;
    pointer-events: none;
}

.carousel-content {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: var(--gutter);
    z-index: 2;
    /* Dégradé vertical plus subtil (bas -> haut) */
    background: linear-gradient(
        to top,
        rgba(11, 17, 23, 0.35) 0%,
        rgba(11, 17, 23, 0.15) 30%,
        transparent 100%
    );
}

.carousel-title { font-size: 2.5rem; font-weight: 700; color: #fff; margin: 0 0 15px; text-shadow: none; }

.carousel-description { font-size: 1.1rem; color: rgba(255,255,255,.9); line-height: 1.5; margin: 0 0 20px; max-width: 600px; text-shadow: none; }

.carousel-genres { display: flex; gap: 10px; margin: 15px 0 20px; flex-wrap: wrap; align-items: center; }

.carousel-genre-tag { background: rgba(255,255,255,.06); color: #e6eef5; padding: 6px 14px; border-radius: 20px; font-size: .85rem; font-weight: 600; border: 1px solid rgba(255,255,255,.12); backdrop-filter: none; }

/* Pastilles à droite des genres sur la fiche (durée ou nombre d'épisodes) */
.duration-chip,
.episodes-chip {
  background: transparent;
  color: rgba(255,255,255,0.92);
  padding: 0;
  border-radius: 0;
  font-size: .95rem;
  font-weight: 600;
  border: 0;
  line-height: 1;
  white-space: nowrap;
}

/* Rapproche légèrement l'étiquette épisodes des genres */
.rating-genres .episodes-chip {
  margin-left: -6px;
}

/* Mobile: ne pas afficher le nombre d'épisodes */
@media (max-width: 768px) {
  .episodes-chip { display: none !important; }
}

/* Inline rating in carousel, placed before genre tags */
.carousel-genres .carousel-rating {
    display: inline-flex;
    align-items: center;
    font-size: 1.3rem; /* slightly larger for better emphasis */
    line-height: 1; /* tight to avoid misalignment */
    font-weight: 600; /* lighter like popup */
    color: #ffffff; /* keep numbers white for readability */
    margin-right: 8px;
}
.carousel-genres .carousel-rating .star {
    color: #FFD54A; /* yellow star */
    margin-right: 4px;
}

.carousel-btn { 
  display: inline-flex; 
  align-items: center; 
  gap: 8px; 
  background: #2B22EE; 
  color: #fff; 
  padding: 12px 24px; 
  border-radius: 5px; 
  text-decoration: none; 
  font-weight: 600; 
  font-size: .95rem; 
  transition: filter 0.2s ease !important; 
  backdrop-filter: none; 
  border: 1px solid #2B22EE;
  outline: none !important;
  margin: 0;
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
}

.carousel-btn:hover,
.carousel-btn:focus { 
  background: #241DE0; 
  transform: none !important; 
  box-shadow: none !important;
  border: 1px solid #2B22EE !important;
  outline: none !important;
  padding: 12px 24px !important;
  margin: 0 !important;
  font-weight: 600 !important;
  font-size: .95rem !important;
}

.carousel-btn::before {
    content: 'ⓘ';
    font-size: 1rem;
}

/* Indicateurs de slides */
.carousel-indicators {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 12px;
    z-index: 3;
    pointer-events: auto; /* enable pointer events on mobile */
}

.carousel-indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.4);
    cursor: pointer;
    transition: all 0.3s ease;
    animation: indicator-cycle 25s infinite;
    border: none; /* in case indicators are buttons in the future */
}

/* When navigating manually, stop indicator animation and show active state */
.carousel-indicators.manual .carousel-indicator { animation: none !important; }
.carousel-indicator.active { background: #2B22EE; transform: scale(1.3); }

.carousel-indicator:nth-child(1) { animation-delay: 0s; }
.carousel-indicator:nth-child(2) { animation-delay: 5s; }
.carousel-indicator:nth-child(3) { animation-delay: 10s; }
.carousel-indicator:nth-child(4) { animation-delay: 15s; }
.carousel-indicator:nth-child(5) { animation-delay: 20s; }

@keyframes indicator-cycle {
    0%, 16% { 
        background: #2B22EE;
        transform: scale(1.3);
    }
    20%, 100% { 
        background: rgba(255, 255, 255, 0.4);
        transform: scale(1);
    }
}

/* Sections */
.section { margin: 50px 0; }

/* Shift all homepage content blocks to the right, except the carousel */
main > .section { transform: translateX(var(--home-shift)); width: calc(100% - var(--home-shift)); }
/* Nudge Categories box slightly to match 'Reprendre la lecture' alignment */
main > .categories-section { transform: translateX(calc(var(--home-shift) + var(--categories-nudge))); width: calc(100% - var(--home-shift) - var(--categories-nudge)); }
@media (max-width: 768px) {
  :root { --home-shift: 8px; --categories-extra-shift: 6px; --categories-inner-shift: 12px; --categories-nudge: 0px; }
}

@media (max-width: 768px) {
  main > .section,
  main > .categories-section {
    transform: none;
    width: 100%;
  }
}

.section h2 {
  margin: 0 var(--gutter) 16px;
  font-size: clamp(24px, 3vw, 32px);
  font-weight: 800; 
  color: #ffffff; 
  display: inline-block; 
  padding-bottom: 0; 
  border: none;
  letter-spacing: -0.5px;
  line-height: 1.2;
}

/* Keep section titles and subtitles above rail fades and arrows */
.section > .genre-subtitle,
.section > h2,
.section .section-header {
  position: relative;
  z-index: 100; /* Au-dessus des flèches (70) et dégradés (65) */
}

/* Make icons next to section titles larger and aligned */
.section h2 svg {
  width: 1.15em;
  height: 1.15em;
  vertical-align: middle;
}

/* ===== Genre custom headers (subtitle + big title) ===== */
.section > .genre-subtitle {
    margin: 0 var(--gutter) 2px;
    font-size: 14px;
    font-weight: 700;
    color: rgba(255,255,255,0.92);
    letter-spacing: 0.2px;
}
.section > .genre-hero-title {
    margin: 0 var(--gutter) 10px;
    font-size: 34px;
    line-height: 1.15;
    font-weight: 900;
    color: #ffffff;
}
@media (max-width: 768px) {
    .section > .genre-subtitle { margin: 0 12px 2px !important; font-size: 13px; }
    .section > .genre-hero-title { margin: 0 12px 6px !important; font-size: clamp(20px, 6.2vw, 26px); }
}

/* ===== Categories Row ===== */
.categories-section {
  margin: 6px 0 8px;
  padding: 10px 0 12px;
  border: 0;
  background: transparent; /* remove box background */
}

/* Compact variant (myCanal / Cinepulse style) */
.categories-section.compact { margin: 6px 0 10px; padding: 8px 0 10px; }
.categories-section.compact .categories-title { margin: 0 var(--gutter) 6px; font-size: 19px; }
.categories-section.compact .categories-rail { padding: 0 var(--gutter); gap: 10px; }
.categories-section.compact .category-card {
  position: relative;
  flex: 0 0 220px; width: 220px; max-width: 220px; /* align with film card width */
  border-radius: 12px; overflow: hidden;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.02);
}
.categories-section.compact .category-card img { max-height: 120px; display: block; width: 100%; height: auto; }
.categories-section.compact .category-card::after {
  content: '';
  position: absolute; inset: 0;
  background: linear-gradient(180deg, rgba(0,0,0,0) 50%, rgba(0,0,0,0.25) 100%);
  opacity: 0; transition: opacity .25s ease;
}
.categories-section.compact .category-card:hover::after { opacity: 1; }
.categories-section.compact .category-card .label {
  display: none; /* hidden, titles are already on images */
}
@media (max-width: 1024px) { .categories-section.compact .category-card { flex-basis: 170px; width: 170px; } }
@media (max-width: 900px)  { .categories-section.compact .category-card { flex-basis: 150px; width: 150px; } }
@media (max-width: 768px)  {
  .categories-section.compact { margin: 6px 12px 10px; border-radius: 0; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); }
  .categories-section.compact .categories-title { margin: 0 12px 6px; font-size: 18px; }
  .categories-section.compact .categories-rail { padding: 0 12px; gap: 10px; }
  .categories-section.compact .category-card { flex: 0 0 calc(50% - 8px); width: calc(50% - 8px); max-width: none; }
  .categories-section.compact .category-card img { max-height: 76px; }
  .categories-section.compact .category-card .label { font-size: 13px; }
}

/* Desktop: enlarge Categories thumbnails and card width */
@media (min-width: 1025px) {
  .categories-section.compact .category-card { flex: 0 0 240px; width: 240px; max-width: 240px; }
  .categories-section.compact .category-card img { max-height: 150px; }
}

/* Align categories slightly to the right like other sections */
@media (min-width: 769px) {
  main > .categories-section.pro { --categories-nudge: 6px; }
}

/* ===== Continue Watching (Reprendre la lecture) matches Categories look ===== */
#continue-watching {
  margin: 6px 0 8px;
  background: rgba(255,255,255,0.02);
  border: none;
  border-radius: 16px;
  padding: 16px 0 18px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.2);
  overflow-x: hidden;
  overflow-y: visible;
  backdrop-filter: blur(8px);
}
.categories-section .categories-title {
  margin: 0 var(--gutter) 10px; /* match other section gutters */
  font-size: 22px;
  font-weight: 800;
  color: #ffffff;
}

/* ===== Home Filters (genres) ===== */
.home-filters {
  margin: 10px 0 10px;
  background: rgba(255,255,255,0.02);
  border: none;
  border-radius: 16px;
  padding: 16px 0 18px;
  box-shadow: 0 4px 16px rgba(0,0,0,0.2);
  backdrop-filter: blur(8px);
}
.home-filters > h2 { margin: 0 var(--gutter) 10px; }
.home-genre-filters {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  padding: 0 var(--gutter);
}
.home-genre-filters .genre-chip {
  display: inline-flex;
  align-items: center;
  padding: 8px 12px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(255,255,255,0.06);
  color: #fff;
  font-size: 14px;
  cursor: pointer;
  user-select: none;
  transition: background .2s ease, border-color .2s ease, transform .1s ease;
}
.home-genre-filters .genre-chip:hover { background: rgba(255,255,255,0.12); border-color: rgba(255,255,255,0.28); }
.home-genre-filters .genre-chip:active { transform: translateY(1px); }
.home-genre-filters .genre-chip.active { background: rgba(43,34,238,0.25); border-color: rgba(43,34,238,0.55); }

/* Desktop: panel collapsed by default (toggled via .filter-toggle) */
@media (min-width: 769px) {
  .home-filters.collapsed { display: none !important; }
}

/* Mobile: boxed layout and tighter spacing */
@media (max-width: 768px) {
  .home-filters { margin: 8px 12px 10px; border-radius: 12px; padding: 10px 0 12px; }
  .home-filters > h2 { margin: 0 12px 8px; font-size: 20px; }
  .home-genre-filters { padding: 0 12px; gap: 8px; }
  .home-genre-filters .genre-chip { padding: 7px 10px; font-size: 13px; }
}

/* Minimal styling for the filter toggle button in navbar */
nav .filter-toggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  background: transparent;
  border: 0;
  color: #fff;
  border-radius: 8px;
  cursor: pointer;
}
nav .filter-toggle:hover { background: rgba(255,255,255,0.08); }
.categories-rail {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 0 var(--gutter); /* match other section gutters */
  overflow: visible;
  flex-wrap: wrap; /* allow wrapping to next line */
  justify-content: flex-start;
}
.category-card {
  position: relative;
  display: block;
  text-decoration: none;
  color: #fff;
  border-radius: 12px;
  overflow: hidden;
  border: none;
  box-shadow: 0 4px 12px rgba(0,0,0,0.25);
  transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
  backdrop-filter: blur(8px);
}
.category-card img {
  display: block;
  width: 100%;
  height: auto;
  max-height: 120px;
}
.category-card:hover { transform: translateY(-4px) scale(1.02); box-shadow: 0 8px 24px rgba(0,0,0,0.4); filter: none; }

/* Use responsive card sizes for categories without stretching */
.category-card { flex: 0 0 260px; width: 260px; max-width: 260px; }
@media (max-width: 1024px) { .category-card { flex: 0 0 240px; width: 240px; max-width: 240px; } }
@media (max-width: 900px) { .category-card { flex: 0 0 220px; width: 220px; max-width: 220px; } }
@media (max-width: 768px) { .category-card { flex: 0 0 calc(50% - 8px); width: calc(50% - 8px); max-width: calc(50% - 8px); } }
@media (max-width: 480px) { .category-card { flex: 0 0 calc(50% - 6px); width: calc(50% - 6px); max-width: calc(50% - 6px); } }

/* Mobile: wrap instead of horizontal scroll */
@media (max-width: 768px) {
  .categories-section { margin: 6px 12px 8px; border-radius: 12px; padding: 10px 0 12px; }
  .categories-section .categories-title { margin: 0 12px 6px; font-size: 18px; }
  .categories-rail { padding: 0 12px; overflow: visible; gap: 12px; }
  .category-card img { max-height: 80px; } /* Réduire la hauteur sur mobile */
}

/* Très petits écrans : cartes encore plus petites */
@media (max-width: 480px) {
  .categories-rail { gap: 8px; }
  .category-card img { max-height: 70px; }
}

/* Desktop 16:9 and wider: exactly 6 category cards per row */
@media (min-width: 1024px) and (min-aspect-ratio: 16/9) {
  .categories-rail {
    gap: 14px; /* keep existing gap */
  }
  .categories-rail .category-card {
    flex: 0 0 calc((100% - (5 * 14px)) / 6);
    width: calc((100% - (5 * 14px)) / 6);
    max-width: none; /* allow exact calc width */
  }
}

@media (max-width: 768px) {
  #continue-watching .rail {
    scrollbar-width: none; /* Firefox */
  }
  #continue-watching .rail::-webkit-scrollbar { display: none; height: 0; }
}

/* Mobile: enable horizontal scroll and hide scrollbars globally for all rails */
@media (max-width: 768px) {
  .section .rail,
  .fiche-popup .rail,
  main .rail,
  .rail {
    overflow-x: scroll !important;
    overflow-y: visible !important;
    -webkit-overflow-scrolling: touch !important;
    scroll-snap-type: x proximity !important;
    scrollbar-width: none !important; /* Firefox */
    touch-action: pan-x pan-y !important;
  }
  .section .rail::-webkit-scrollbar,
  .fiche-popup .rail::-webkit-scrollbar,
  main .rail::-webkit-scrollbar,
  .rail::-webkit-scrollbar {
    display: none !important; /* Chrome/Safari */
    width: 0 !important;
    height: 0 !important;
  }
  /* Enable snap alignment for cards on mobile */
  .section .rail > *,
  .fiche-popup .rail > *,
  main .rail > *,
  .rail > * {
    scroll-snap-align: start;
    touch-action: manipulation !important;
  }
}

/* ===== CTA Pills Row ===== */
.cta-pills-section { margin: 6px 0 14px; }
.cta-pills {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  padding: 0 32px;
}
.pill {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 12px 18px;
  border-radius: 999px;
  color: #fff;
  text-decoration: none;
  min-width: 120px;
  min-height: 44px; /* touch target */
  font-weight: 700;
  letter-spacing: .2px;
  border: 1px solid rgba(255,255,255,0.16);
  box-shadow: 0 10px 24px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.06);
  transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
  line-height: 1.1;
  text-shadow: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  outline: none;
  transform-origin: center center;
  will-change: transform;
}
/* Hover lift only on hover-capable devices to avoid mobile jump */
@media (hover: hover) {
  .pill:hover { transform: none !important; box-shadow: 0 14px 30px rgba(0,0,0,0.45); }
}
.pill:focus-visible { box-shadow: 0 0 0 3px rgba(255,255,255,0.3), 0 10px 24px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.06); }
.pill.discord { background: radial-gradient(100% 100% at 0% 0%, #5865F2 0%, #3B46CC 100%); }
.pill.youtube { background: radial-gradient(100% 100% at 0% 0%, #FF3B30 0%, #C41F1A 100%); }
.pill.tiktok { background: radial-gradient(100% 100% at 0% 0%, #25F4EE 0%, #FE2C55 100%); }
.pill.trustpilot { background: radial-gradient(100% 100% at 0% 0%, #00B67A 0%, #00885B 100%); }
.pill.dons { background: radial-gradient(100% 100% at 0% 0%, #FF6A88 0%, #FF3CAC 100%); }
.pill.shop { background: radial-gradient(100% 100% at 0% 0%, #7F7FD5 0%, #86A8E7 50%, #91EAE4 100%); }

@media (max-width: 768px) {
  .cta-pills-section { margin: 8px 0 12px; }
  .cta-pills { padding: 0 12px; gap: 10px; }
  .pill { flex: 1 1 calc(50% - 10px); min-width: 0; padding: 12px 14px; font-weight: 800; font-size: clamp(13px, 3.6vw, 16px); }
}

/* When an inline See All button is present, bring it closer to the title */
.section > h2 { margin-right: 12px; }
.section > .see-all-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  vertical-align: middle;
  margin-right: var(--gutter); /* match section right margin */
  margin-bottom: 12px; /* spacing below the row */
  padding: 8px 12px; /* slightly more compact */
  font-size: 14px;
  line-height: 1.1;
}

/* Hide "Voir tout" on mobile */
@media (max-width: 768px) {
  .section > .see-all-btn { display: none !important; }
}

/* Small descriptive line under section titles */
.section-subtitle {
  margin: -4px var(--gutter) 10px;
  font-size: 12px;
  line-height: 1.35;
  color: rgba(255,255,255,0.68);
}
@media (max-width: 768px) {
  .section-subtitle {
    margin: -2px 16px 6px;
    font-size: 11px;
  }
}

/* Boxed styling for Continue Watching */
#continue-watching {
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 14px;
  padding: 12px 0 14px;
  margin: 6px 0 8px; /* match Categories box spacing */
  position: relative; /* create stacking context for title above fades */
}
#continue-watching > h2 {
  margin: 0 var(--gutter) 10px; /* match Categories title gutters and spacing */
  position: relative;
  z-index: 20; /* above rail fades */
}
#continue-watching .rail {
  padding: 20px 0 0 var(--gutter); /* Padding à gauche uniquement */
  scroll-padding: 0 var(--gutter);
  margin: 0;             /* flush content */
  display: flex;         /* ensure horizontal layout */
  gap: 22px;             /* larger spacing between cards */
  position: relative;    /* layer below title but above background */
  z-index: 2;
  overflow-x: auto;      /* allow horizontal scroll to see the padding */
  overflow-y: visible;   /* allow vertical overflow for hover effects */
}

#continue-watching .rail::after {
  content: '';
  display: block;
  width: var(--gutter);
  flex-shrink: 0;
}
/* Wrapper for each continue-watching entry: card + caption */
#continue-watching .resume-item { display: flex; flex-direction: column; position: relative; }
#continue-watching .resume-item .card { margin-bottom: 6px; }
/* Ensure cards in continue-watching section have proper z-index on hover */
#continue-watching .card:hover { z-index: 60 !important; position: relative; }
/* Remaining time caption below cards */
#continue-watching .resume-remaining {
  margin-top: 8px;
  margin-left: 2px;
  font-size: 14px;
  color: rgba(255,255,255,0.9);
}
/* Film title under time remaining */
#continue-watching .resume-title {
  margin-top: 4px;
  margin-left: 2px;
  font-size: 16px;
  font-weight: 700;
  color: #ffffff;
}
@media (max-width: 768px) {
  #continue-watching { margin: 0 16px 24px; padding: 12px; }
  #continue-watching > h2 { margin-bottom: 8px !important; }
  /* Mobile: enable horizontal scroll in the rail */
  #continue-watching .rail {
    overflow-x: auto !important;
    overflow-y: visible !important;
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x proximity; /* optional smoother alignment */
    padding-top: 6px !important; /* prevent card clipping on mobile hover - réduit pour rapprocher du titre */
  }
  #continue-watching .rail .resume-item { scroll-snap-align: start; }
}

/* Section header with right-aligned button (e.g., Acteurs) */
.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin: 0 40px 16px;
}

/* On mobile: allow header buttons to wrap and avoid stretching due to long text */
@media (max-width: 768px) {
  .section-header { flex-wrap: nowrap; gap: 8px; }
  .section-header .button.secondary {
    flex: 0 0 auto;
    min-width: 0; /* allow text to shrink within flex item */
    max-width: none;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-size: clamp(12px, 3.8vw, 14px);
    padding: clamp(6px, 1.2rem, 8px) clamp(8px, 2.6vw, 10px);
  }
}

/* Mobile tweaks for fiche page: smaller buttons and wrapping to fit screen */
@media (max-width: 768px) {
  body.fiche-page-view .section-header {
    flex-wrap: wrap !important;
    gap: 6px !important;
    margin: 0 16px 10px; /* tighter side margins on mobile */
  }
  body.fiche-page-view .section-header .button.secondary {
    flex: 1 1 auto !important;
    min-width: 0 !important;
    font-size: clamp(11px, 3.2vw, 13px) !important;
    padding: 6px 8px !important;
    white-space: nowrap; /* keep labels on one line; they can shrink */
  }
}

/* Fiche page: keep header buttons grouped at the left with tight spacing on desktop */
body.fiche-page-view .section-header {
  justify-content: flex-start !important;
  gap: 10px !important;
}
body.fiche-page-view .section-header .button.secondary {
  flex: 0 0 auto;
}

/* Extra-tight layout for ultra-small devices */
@media (max-width: 380px) {
  .section-header { gap: 6px; }
  .section-header .button.secondary {
    font-size: clamp(11px, 3.5vw, 13px);
    padding: 6px 8px;
  }
}

/* Secondary button style for header actions - style moderne */
.button.secondary {
  background: rgba(255,255,255,0.08);
  border: none;
  color: #ffffff;
  padding: 12px 20px;
  border-radius: 8px;
  font-weight: 600;
  font-size: 15px;
  transition: background 0.2s ease !important;
  cursor: pointer;
  white-space: nowrap;
  flex-shrink: 0;
  height: 44px;
  min-height: 44px;
  max-height: 44px;
  position: relative;
  top: 0;
  left: 0;
  z-index: 100; /* Au-dessus des flèches et dégradés */
}
.button.secondary:hover,
.button.secondary:focus,
.button.secondary:active { 
  background: rgba(255,255,255,0.15); 
  outline: none !important;
  box-shadow: none !important;
  filter: none;
  transform: none !important;
  padding: 12px 20px !important;
  margin: 0 !important;
  border: none !important;
  font-weight: 600 !important;
  font-size: 15px !important;
  height: 44px !important;
  min-height: 44px !important;
  max-height: 44px !important;
  position: relative !important;
  top: 0 !important;
  left: 0 !important;
  z-index: 100 !important; /* Maintenir au-dessus des flèches */
}
.button.secondary.active {
  background: #2B22EE;
  color: #ffffff;
  border: none !important; /* Pas de bordure pour garder les mêmes dimensions */
  outline: none;
  box-shadow: none !important;
  font-weight: 600 !important; /* Garder le même poids pour éviter le décalage */
  filter: brightness(1.15);
  padding: 12px 20px !important;
  margin: 0 !important;
  height: 44px !important;
  min-height: 44px !important;
  max-height: 44px !important;
  transform: none !important;
  position: relative !important;
  top: 0 !important;
  left: 0 !important;
  z-index: 100 !important; /* Au-dessus des flèches */
  font-size: 15px !important; /* Même taille */
}
/* Pas d'outline sur focus-visible pour les boutons secondaires */
.button.secondary:focus-visible {
  outline: none !important;
  outline-offset: 0 !important;
}

/* "Voir tout" expanded panel per section */
.all-panel {
  margin: 0 var(--gutter) 24px;
  padding: 16px;
  border-radius: 12px;
  background: rgba(26,35,50,0.65);
  border: 1px solid rgba(255,255,255,0.12);
}
.section.all-open .rail { display: none !important; }
.section.all-open .all-panel { display: block !important; }
.section:not(.all-open) .all-panel { display: none !important; }
/* Remove extra padding inside grids placed in all-panel */
.all-panel .grid { padding: 0; }

/* Remove focus ring/glow on keyboard/mouse focus */
.button.secondary:focus,
.button.secondary:focus-visible {
  outline: none !important;
  box-shadow: none !important;
  filter: none !important;
}

/* Actors panel - style moderne sans bordures */
.actors-panel {
  margin: 0 var(--gutter) 24px;
  padding: 24px;
  border-radius: 16px;
  background: transparent;
  border: none;
}
.actors-panel > h3 {
  display: none !important; /* Cacher le grand titre */
}

/* Episodes panel - style moderne sans bordures */
.episodes-panel {
  margin: 0 var(--gutter) 24px;
  padding: 24px;
  border-radius: 16px;
  background: transparent;
  border: none;
}
.episodes-panel > h3 { 
  display: none !important; /* Cacher le grand titre */
}

/* Compatibilité: classes de toggle pour sections switchables */
.section.actors-open .rail { display: none !important; }
.section.actors-open .actors-panel { display: block !important; }
.section:not(.actors-open) .actors-panel { display: none !important; }

.section.episodes-open .rail { display: none !important; }
.section.episodes-open .episodes-panel { display: block !important; }
.section:not(.episodes-open) .episodes-panel { display: none !important; }

/* Episodes: make all buttons equal width and aligned */
.episodes-panel .episodes-rail .button {
  display: block !important;
  width: 100% !important;
  text-align: left;
  background: rgba(255,255,255,0.05) !important;
  border: none !important;
  border-radius: 10px !important;
  color: #fff !important;
  box-shadow: none !important;
  text-shadow: none !important;
  filter: none !important;
  position: relative !important;
  padding: 16px 20px !important;
  margin-bottom: 12px !important;
  overflow-wrap: break-word !important;
  word-wrap: break-word !important;
  word-break: break-word !important;
  hyphens: auto !important;
  font-size: 15px !important;
  font-weight: 500 !important;
  transition: all 0.2s ease !important;
}
/* Supprimer complètement tous les effets de balayage sur les boutons d'épisodes */
.episodes-panel .episodes-rail .button::before,
.episodes-panel .episodes-rail .button::after {
  display: none !important; /* Supprime tous les pseudo-éléments */
}

.episodes-panel .episodes-rail .button:hover,
.episodes-panel .episodes-rail .button:focus {
  background: rgba(255,255,255,0.12) !important;
  outline: none !important;
  box-shadow: none !important;
  filter: none !important;
  transform: none !important;
  transition: all 0.2s ease !important;
}

/* Grey style for episode viewing status suffix */
.episodes-panel .episodes-rail .button .episode-status {
  color: rgba(255,255,255,0.6);
  margin-left: 6px;
  font-weight: 500;
  white-space: nowrap;
}

/* Skeleton loader for episode durations (GitHub-style) */
@keyframes skeleton-shimmer {
  0% {
    background-position: -200px 0;
  }
  100% {
    background-position: calc(200px + 100%) 0;
  }
}

.episodes-panel .episodes-rail .button .skeleton-loader {
  display: inline-block;
  width: 50px;
  height: 14px;
  margin-left: 8px;
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0.08) 0%,
    rgba(255, 255, 255, 0.15) 50%,
    rgba(255, 255, 255, 0.08) 100%
  );
  background-size: 200px 100%;
  border-radius: 3px;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
  vertical-align: middle;
}

/* Animated hourglass for in-progress episodes */
@keyframes hourglass-spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.episodes-panel .episodes-rail .button .hourglass-icon {
  display: inline-block;
  animation: hourglass-spin 2s linear infinite;
  transform-origin: center;
}

/* Mobile: widen and center episodes buttons */
@media (max-width: 768px) {
  .episodes-panel { margin: 0 16px 20px; }
  .episodes-panel .episodes-rail {
    align-items: center; /* center children horizontally */
    width: 100%;
  }
  .episodes-panel .episodes-rail .button {
    width: 100% !important;     /* use full panel width */
    max-width: 680px;           /* but keep a readable line length */
    margin-left: auto;          /* center when narrower than container */
    margin-right: auto;
    white-space: normal !important; /* permettre le retour à la ligne */
    height: auto !important;    /* hauteur adaptative */
    min-height: 48px !important; /* hauteur minimale */
    max-height: none !important; /* pas de limite de hauteur */
    line-height: 1.4 !important; /* meilleure lisibilité sur plusieurs lignes */
    overflow: visible !important; /* permettre au contenu de s'afficher entièrement */
  }
}

.actors-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  gap: 16px;
}

.actor-card {
  background: rgba(0,0,0,0.25);
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 10px;
  padding: 10px;
  text-align: center;
  position: relative; /* allow absolute-positioned edit button */
}

.actor-photo {
  position: relative;
  width: 100%;
  overflow: hidden;
  border-radius: 0; /* container not rounded, only the image */
  background: transparent; /* remove inner black frame */
}
.actor-photo::before {
  content: '';
  display: block;
  padding-top: 100%; /* enforce 1:1 square regardless of browser support */
}
.actor-photo img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: top center;
  display: block;
  border-radius: 8px; /* only the image has rounded corners */
  opacity: 1 !important;
}

/* Actors panel: enforce square crop (cover) on all devices */
.actors-panel .actor-photo img {
  width: 100% !important;
  height: 100% !important;
  max-width: 100% !important;
  max-height: 100% !important;
  object-fit: cover !important;
  object-position: top center !important;
  border-radius: 8px !important; /* keep rounded corners */
}
/* Fiche page: keep the same cover behavior with highest specificity */
body.fiche-page-view #fiche .actors-panel .actor-photo img {
  width: 100% !important;
  height: 100% !important;
  max-width: 100% !important;
  max-height: 100% !important;
  object-fit: cover !important;
  object-position: top center !important;
  border-radius: 8px !important;
}

.actor-name {
  margin-top: 6px;
  font-weight: 700;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.actor-role {
  font-size: 0.9rem;
  opacity: 0.85;
}

/* Small edit badge inline inside the actor name */
.actor-edit-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 6px;
  font-size: 14px;
  line-height: 1;
  background: rgba(0,0,0,0.45);
  border: 1px solid rgba(255,255,255,0.18);
  color: #fff;
  text-decoration: none;
  padding: 2px 6px;
}
.actor-edit-btn:hover,
.actor-edit-btn:focus {
  background: rgba(0,0,0,0.75);
  border-color: rgba(255,255,255,0.28);
}

.actors-empty,
.empty-message { 
  margin: 8px 0; 
  opacity: 0.85; 
}

/* Grille */
.grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 24px; padding: 0 var(--gutter); }

/* Cartes */
.card {
    background: linear-gradient(180deg, rgba(26,35,50,0.65), rgba(26,35,50,0.9));
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.3s ease;
    border: 1px solid rgba(255, 255, 255, 0.12);
    cursor: pointer;
    position: relative; /* enable overlay watermark */
    box-shadow:
      0 10px 30px rgba(0,0,0,0.35),
      inset 0 1px 0 rgba(255,255,255,0.06);
}
.card:hover { 
  transform: translateY(-6px);
  box-shadow: 0 14px 38px rgba(0,0,0,0.45);
}

/* Favorite heart button on cards (no longer used) */
.card .fav-btn {
  position: absolute;
  right: 10px;
  bottom: 14px;
  z-index: 8;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: 0;
  padding: 0;
  margin: 0;
  color: #a9b2bb; /* more gray heart */
  cursor: pointer;
  outline: none;
}
.card .fav-btn { display: none !important; }
.card .fav-btn:hover { opacity: 0.9; }
.card .fav-btn:focus-visible { outline: 2px solid rgba(255,255,255,0.35); outline-offset: 2px; }
.card .fav-btn svg { width: 20px; height: 20px; display: block; }
.card .fav-btn .heart { fill: none; stroke: currentColor; stroke-width: 2px; }
.card .fav-btn.is-active { color: #ff0000; } /* active = red */
.card .fav-btn.is-active .heart { fill: currentColor; stroke: none; }

/* If ever placed inside .card-info, align inline to the right */
.card .card-info .fav-btn { position: static; margin-left: auto; }

/* Ensure button stays clickable on top of link */
.card .fav-btn { pointer-events: auto; }
.card a { position: relative; z-index: 1; }

/* Card image rules centralized in common.css to avoid duplication */

/* Hide film title text on index cards as requested */
.card .card-info span { display: none; }

/* ===== Favorites primary button (fiche popups and fiche page) ===== */
.button.fav-primary,
.button.fav-primary:hover,
.button.fav-primary:focus,
.button.fav-primary:active {
  background: transparent !important;
  border: 1px solid #ff4d88 !important;
  color: #ff4d88 !important;
  filter: none !important; /* Jamais de brightness */
}
.button.fav-primary:hover {
  background: transparent !important;
  border-color: #ff6ba3 !important; /* Bordure rose plus claire */
  color: #ff4d88 !important; /* Texte reste rose */
}

.button.fav-primary.is-active,
.button.fav-primary.is-active:hover,
.button.fav-primary.is-active:focus,
.button.fav-primary.is-active:active {
  background: rgba(255, 77, 136, 0.15) !important;
  border-color: #ff4d88 !important;
}

/* ===== Remove glow from buttons globally (keep outline only) ===== */
.button,
.button:hover,
.button:focus,
.button:focus-visible {
  box-shadow: none !important;
}
.pill,
.pill:hover,
.pill:focus,
.pill:focus-visible {
  box-shadow: none !important;
}

/* ===== Stabilité totale des boutons ===== */
.button,
.button:hover,
.button:focus,
.button:active {
  transform: none !important;
  will-change: auto !important;
  backface-visibility: hidden !important;
  -webkit-backface-visibility: hidden !important;
}
/* Empêcher les icônes/SVG de bouger */
.button svg,
.button:hover svg,
.button:focus svg,
.button:active svg {
  transform: none !important;
  width: 1em !important; /* Taille fixe */
  height: 1em !important;
}
/* Empêcher le texte interne de bouger */
.button span,
.button:hover span,
.button:focus span,
.button:active span {
  display: inline-block;
  transform: translateZ(0) !important; /* GPU pour le texte */
  position: relative;
  top: 0 !important;
  left: 0 !important;
  backface-visibility: hidden !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
  text-rendering: geometricPrecision !important;
  font-weight: inherit !important;
  font-size: inherit !important;
  letter-spacing: inherit !important;
  line-height: 1 !important;
  will-change: filter !important;
}
/* Texte direct dans le bouton (pas dans span) */
button,
.button {
  text-align: center !important;
}
.button:hover,
.button:focus {
  text-align: center !important;
}
/* Stabiliser TOUS les enfants du bouton */
.button > *,
.button:hover > *,
.button:focus > * {
  transform: translateZ(0) !important;
  backface-visibility: hidden !important;
  will-change: filter !important;
  position: relative !important;
  flex-shrink: 0 !important;
}
/* Forcer le rendering stable sur tous les états */
.button::before,
.button::after,
.button:hover::before,
.button:hover::after {
  content: none !important; /* Pas de pseudo-éléments */
}
/* Forcer les mêmes dimensions au survol */
.button:hover,
.button:focus {
  font-weight: 700 !important;
  font-size: 16px !important;
  letter-spacing: 0.3px !important;
}

/* ===== Hover behavior unifié: style carrousel pour tous les boutons */
.button,
.pill,
.carousel-btn {
  transition: filter 0.2s ease, background-color 0.2s ease !important;
  box-shadow: none !important;
}
.button:hover,
.pill:hover,
.carousel-btn:hover {
  filter: brightness(1.08) !important;
  transform: none !important;
  box-shadow: none !important;
}

/* Carousel 'Voir la fiche' button: no glow/sweep, just lighten on hover */
.carousel-btn {
  box-shadow: none !important;
  transition: filter .2s ease, background-color .2s ease, border-color .2s ease, color .2s ease !important;
}
.carousel-btn:hover {
  box-shadow: none !important;
  filter: brightness(1.08) !important;
  transform: none !important;
}
.carousel-btn::before,
.carousel-btn::after { transition: none !important; }

/* Ensure no pseudo-element sweep overlays interfere */
.button::before,
.button::after,
.pill::before,
.pill::after {
  transition: none !important;
}

/* ===== Continue Watching: progress bar on card ===== */
#continue-watching .card .progress {
  position: absolute; /* overlay on image */
  left: 12px;
  right: 12px;
  bottom: 12px;
  height: 8px;
  background: rgba(0,0,0,0.45); /* darker track over image */
  border-radius: 999px;
  overflow: hidden;
  z-index: 2; /* ensure above image if any overlays */
}
#continue-watching .card .progress .bar {
  height: 100%;
  width: 0%;
  background: var(--brand-1);
  transition: width .3s ease;
}

/* Hide any leftover brand badge in Continue Watching */
#continue-watching .card .brand-badge { display: none !important; }

/* Make Continue Watching cards larger than default */
#continue-watching .rail .resume-item {
  width: 300px !important;   /* landscape cards */
  flex: 0 0 300px !important;/* fixed width item in horizontal rail */
}
#continue-watching .resume-item .card { width: 100% !important; }
@media (max-width: 768px) {
  #continue-watching .rail .resume-item { width: 200px !important; flex: 0 0 200px !important; }
}

/* Landscape media ratio for Continue Watching only (override portrait default) */
#continue-watching .card .card-media { aspect-ratio: 16/9 !important; }

/* Titre/legend overlay for continue watching (optional) */
.card .resume-legend {
  position: absolute;
  left: 8px;
  bottom: 10px;
  background: rgba(0,0,0,0.55);
  color: #fff;
  padding: 6px 10px;
  border-radius: 8px;
  font-size: 12px;
  border: 1px solid rgba(255,255,255,0.12);
}

/* Continue Watching: suppress default 'Catégorie' and rating after for resume info bar */
.card .card-info.resume-info::before,
.card .card-info.resume-info::after { content: none !important; }

.stars { 
    color: #2B22EE; 
    font-size: 16px; 
}

/* Base link styles are defined in common.css */

/* Popups avec position fixe et conservation du scroll */
.fiche-popup {
    display: none;
    position: fixed;
    left: 0; right: 0; bottom: 0; top: 0; /* default; overridden below to keep nav undimmed */
    background: rgba(0, 0, 0, 0.6);
    justify-content: center; /* horizontal centering */
    align-items: center;     /* vertical centering */
    align-content: center;   /* multi-line centering safety */
    place-content: center;   /* shorthand safety */
    place-items: center;     /* shorthand safety */
    z-index: 11000;
    /* Full viewport height so centering works on all devices */
    min-height: 100dvh;
    min-height: 100vh;
    padding: clamp(12px, 3vw, 20px);
    backdrop-filter: none;
    overscroll-behavior: contain; /* empêche le scroll de fond sur mobile */
}

.fiche-popup:target { 
    display: flex; 
}

.fiche-content {
    width: 90%;
    max-width: 2000px;
    /* Center on full viewport height (ignore nav height), with small breathing room */
    max-height: calc(100dvh - 40px);
    background: #151D29; /* opaque, unified popup color */
    border-radius: 16px;
    display: grid;
    gap: 30px;
    padding: 30px;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    position: relative !important; /* Pour que le bouton absolute se positionne dedans */
    margin: auto; /* ensure centering even if container alignment is overridden */
    -webkit-overflow-scrolling: touch; /* smooth scrolling sur iOS */
}

/* Popups should be centered on the full page (including under the nav) */
@media (min-width: 769px) {
  .fiche-popup {
    top: 0 !important;
    height: 100vh !important;
    min-height: 100vh !important;
  }
}
@media (max-width: 768px) {
  .fiche-popup {
    top: 0 !important;
    height: 100vh !important;
    min-height: 100vh !important;
  }
}
/* ... */
.fiche-content {
    grid-template-columns: 1fr 1.5fr; /* Layout par défaut pour images portrait */
}

/* Alternative : class CSS pour forcer le layout paysage */
.fiche-content.landscape-layout {
    grid-template-columns: 2fr 1fr;
}

.fiche-left {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
}

/* Style spécifique pour les images paysage */
.fiche-content img.landscape {
    width: 100%;
    height: auto;
    max-height: 72vh;
    object-fit: contain;
    display: block;
}

/* Desktop/tablet: rounded corners for fiche images */
@media (min-width: 769px) {
  .fiche-content img.landscape { 
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0,0,0,0.4);
  }
}

/* Mobile: forcer un rendu cover dans un cadre 16:9 */
@media (max-width: 768px) {
  /* Conteneur visuel pour l'image (déjà ajouté dans le DOM via .fiche-media-wrap) */
  .fiche-media-wrap {
    position: relative;
    width: 100%;
    aspect-ratio: 16 / 9;
    overflow: hidden;
  }
  /* Sur la page fiche, étendre l'image bord à bord sur toute la largeur écran */
  body.fiche-page-view #fiche .fiche-media-wrap {
    width: 100vw !important;
    max-width: 100vw !important;
    margin-left: 50% !important;
    transform: translateX(-50%) !important;
    border-radius: 0 !important;
  }
  /* L’image remplit le conteneur uniformément */
  .fiche-media-wrap img.landscape {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    max-height: none; /* aucune contrainte verticale sur mobile */
    border-radius: 0; /* pas d'arrondi pour occuper tout l'espace */
  }

  /* Priorité maximale sur la page fiche pour éviter tout 'contain' résiduel */
  body.fiche-page-view #fiche .fiche-left img.landscape {
    width: 100% !important;
    height: 100% !important;
    max-width: none !important;
    max-height: none !important;
    object-fit: cover !important;
    display: block !important;
  }

  /* Masquer la durée sur mobile */
  .duration-chip { display: none !important; }
}

.fiche-right {
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding-left: 20px; /* Décalage supplémentaire du texte vers la droite */
}

/* Titres fiche : taille responsive, rétrécie via JS pour rester sur 3 lignes max (sans ellipses) */
.fiche-right > h3 {
    font-size: clamp(26px, 3.4vw, 48px);
    line-height: 1.15;
    margin: 0 0 12px;
    font-weight: 900;
    word-break: break-word;
    hyphens: auto;
}

.fiche-content h3 { 
    margin: 0 0 20px 0; 
    font-size: clamp(32px, 4vw, 48px);
    font-weight: 800;
    color: #ffffff;
    scroll-margin-top: 12px;
    line-height: 1.1;
    letter-spacing: -0.5px;
}

/* Per-title font styles */
#film2-title { font-family: inherit; font-size: inherit; }

/* Backrooms Urbanos title base size */
#film7-title {
    font-size: clamp(28px, 5vw, 44px);
}

/* Inline SVG sizing for URBANOS logo */
#film7-title .urbanos-svg { display: inline-block; line-height: 1; }
#film7-title .urbanos-logo { height: 1.10em; width: auto; vertical-align: -0.32em; display: inline-block; }

/* Apply VHS pixel style ONLY to "Backrooms" */
#film7-title .backrooms-vhs {
    font-family: 'VT323', monospace;
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: #ffffff;
    font-size: 1.08em; /* légèrement plus grand */
    /* Pas de contour */
    -webkit-text-stroke: 0; 
    text-shadow: none; 
}

#film7-title .urbanos-grad {
    display: inline-block;
    font-weight: 800; /* bold look for the second word */
    font-family: 'Luckiest Guy', Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif; /* rounded bubbly logo style */
    letter-spacing: 1px;
    text-transform: uppercase;
    /* Three clear bands with top specular highlight for glossy 3D look */
    background: linear-gradient(180deg,
        #ffffff 0%, #ffffff 2%,       /* thin white highlight at the very top */
        #6fe3ff 2%, #6fe3ff 8%,       /* small cyan highlight under the white */
        #28cf63 8%, #28cf63 48%,      /* vivid green band (dominant) */
        #ffe35a 48%, #ffe35a 62%,     /* brighter, thinner yellow band */
        #ff7f10 62%, #ff7a00 100%     /* warm orange to deep orange */
    );
    background-repeat: no-repeat;
    background-size: 100% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent; /* show gradient as text fill */
    -webkit-text-fill-color: transparent; /* ensure gradient shows in WebKit/Blink */
    /* Subtle stroke around glyphs for crisp edges (WebKit-capable browsers) */
    -webkit-text-stroke: 0.6px rgba(0,0,0,0.35);
    /* Multi-layer shadow to simulate bevel + soft glow and drop + colored rims */
    text-shadow:
      0 -1px 0 rgba(255,255,255,0.95),   /* crisp top rim highlight */
     -1px -1px 0 rgba(111,227,255,0.85), /* cyan rim top-left */
      0 1px 0 rgba(0,0,0,0.28),          /* inner lower edge */
      0 2px 2px rgba(0,0,0,0.28),        /* subtle depth */
      0 4px 6px rgba(0,0,0,0.38),        /* drop shadow similar to logo */
      0 0 6px rgba(255,165,0,0.22),      /* warm glow */
      1px 1px 0 rgba(255,122,0,0.65);    /* orange rim bottom-right */
}
#film5-title { font-family: 'Anton', Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif; letter-spacing: 1px; }
#film3-title, #film1-title { font-family: 'Cinzel', Georgia, 'Times New Roman', serif; }
#serie1-title { font-family: 'Bevan', Georgia, serif; letter-spacing: 2px; text-transform: uppercase; }
#serie2-title { font-family: 'Rye', Georgia, serif; }
/* Karma: bold and stretched */
#film4-title {
    font-family: 'Anton', Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
    font-weight: 900;
    letter-spacing: 1.5px;
    display: inline-block; /* allow transform scaling */
    transform: scaleX(1.35);
    transform-origin: left center;
    text-transform: uppercase;
}

/* Urbanos City: chunky white slab for URBANOS + stylized "city" below */
#film6-title { display: inline-block; line-height: 1; }
#film6-title .urbanos {
    display: inline-block;
    font-family: 'Bevan', Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
    text-transform: uppercase;
    font-size: clamp(22px, 4vw, 40px);
    letter-spacing: 1px;
    color: #ffffff;
    /* bold outline/shadow look */
    text-shadow:
      0 2px 0 rgba(0,0,0,0.55),
      0 6px 14px rgba(0,0,0,0.55);
}
#film6-title .city {
    display: inline-block;
    font-family: 'Baloo 2', 'Shrikhand', system-ui, sans-serif;
    font-weight: 800;
    text-transform: lowercase;
    font-size: clamp(22px, 3.8vw, 36px); /* render larger to reduce hinting spikes */
    color: #ffffff;
    margin-left: 8px;
    letter-spacing: -0.2px;
    font-variant-ligatures: none;
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
    font-feature-settings: "liga" 0, "dlig" 0, "clig" 0, "calt" 0, "swsh" 0, "kern" 1;
    font-synthesis: none;
    line-height: 1;
    transform: scale(0.86); /* scale down for smoother edges */
    transform-origin: left bottom;
    will-change: transform;
}

/* ===== Specific color treatments ===== */
/* La vie au petit âge: dark red with shadow */
#film1-title {
    color: #8B0000; /* dark red */
    text-shadow: 0 2px 0 rgba(0,0,0,0.35), 0 4px 12px rgba(0,0,0,0.5);
}
/* Lawless Legend: darker red */
#serie2-title { color: #6E0000; }
/* DEDOUBLEMENT: bluish drop shadow (no outline) */
#film2-title {
    color: #ffffff; /* white */
    font-weight: 800; /* bold */
    font-size: 34px; /* larger */
    text-transform: uppercase;
    /* Soft, bluish shadow inspired by the reference */
    text-shadow:
      0 8px 18px rgba(11, 61, 145, 0.55),  /* main soft drop */
      0 2px 4px rgba(11, 61, 145, 0.45),   /* near shadow */
      0 0 14px rgba(11, 61, 145, 0.30);    /* ambient glow */
}

/* Make all popup titles large and consistent like DEDOUBLEMENT */
#film1-title,
#film2-title,
#film3-title,
#film4-title,
#film5-title,
#film6-title,
#serie1-title,
#serie2-title {
    font-size: clamp(28px, 5vw, 40px);
    line-height: 1.1;
    display: inline-block;
    min-width: 12ch; /* approx width of 'DEDOUBLEMENT' */
    text-align: left;
}
/* Ensure nested spans inherit unified size */
#film6-title .urbanos,
#film6-title .city,
#film5-title .trailer-word,
#film5-title .batman-word,
#serie1-title .al,
#serie1-title .ex { font-size: 1em; }

/* Alex: AL green, EX pink */
#serie1-title .al { color: #9CFF00; }
#serie1-title .ex { color: #ff69b4; }
/* Trailer Batman: 'Trailer' white, 'Batman' red */
#film5-title .trailer-word { color: #ffffff; }
#film5-title .batman-word { color: #ff2a2a; font-weight: 800; }

/* Card title styles removed per request */

.fiche-content p { 
    margin: 0 0 24px 0; 
    font-size: 17px;
    line-height: 1.65;
    color: rgba(255, 255, 255, 0.85);
    max-width: 100%;
    font-weight: 400;
}

.rating-genres { 
    display: flex; 
    flex-wrap: wrap;
    gap: 16px;
    align-items: center;
    margin: 0 0 24px 0;
}

.mobile-rating-badge {
    display: none;
}

/* Fiche page: remove any glow around ratings/notes (defensive: kill text/box shadows and filters) */
body.fiche-page-view .rating-genres,
body.fiche-page-view .rating-genres .stars,
body.fiche-page-view .fiche-right .rating-genres,
body.fiche-page-view .fiche-right .rating-genres .stars,
body.fiche-page-view .fiche-media-wrap .fiche-overlay .overlay-meta .stars,
body.fiche-page-view .carousel-genres .carousel-rating,
body.fiche-page-view .carousel-genres .carousel-rating .star {
  text-shadow: none !important;
  box-shadow: none !important;
  filter: none !important;
}

.fiche-content .stars { 
    font-size: 20px;
    margin: 0;
    color: #ffffff;
}

.fiche-content .stars::first-letter {
    color: #FFD54A; /* warm yellow */
}

.genres {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    justify-content: start;
    align-items: center;
}

.genre-tag {
    background: rgba(255, 255, 255, 0.1);
    color: #ffffff;
    padding: 4px 12px;
    border-radius: 16px;
    font-size: 11.5px;
    font-weight: 600;
    border: none;
    white-space: nowrap;
    backdrop-filter: blur(8px);
    letter-spacing: 0.2px;
}

.button-group {
    display: flex;
    gap: 12px;
    flex-wrap: wrap;
    margin-top: 24px;
    align-items: center;
}
/* Stabilité du button-group lui-même */
.button-group {
    transform: none !important;
    position: relative !important;
}
.button-group > *,
.button-group:hover > * {
    flex-shrink: 0 !important; /* Empêcher le rétrécissement */
}

/* Bouton primaire - style carrousel (bleu qui s'éclaircit) */
.button {
    background: #2B22EE;
    color: #ffffff;
    border-radius: 6px;
    padding: 14px 32px;
    font-weight: 700;
    font-size: 16px;
    transition: filter 0.2s ease, background-color 0.2s ease !important;
    border: 1px solid #2B22EE;
    cursor: pointer;
    white-space: nowrap;
    min-height: 48px;
    max-height: 48px;
    height: 48px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    letter-spacing: 0.3px;
    box-shadow: none !important;
    outline: none !important;
    margin: 0;
    position: relative;
    top: 0;
    left: 0;
    backface-visibility: hidden;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: geometricPrecision;
    contain: layout style;
    isolation: isolate;
    vertical-align: middle;
    flex-shrink: 0;
    will-change: filter; /* Optimiser le filter brightness */
    transform: translateZ(0); /* Forcer GPU */
    line-height: 1; /* Hauteur de ligne fixe */
}

.button:hover,
.button:focus,
.button:active { 
    filter: brightness(1.08) !important;
    transform: translateZ(0) !important; /* Maintenir GPU */
    box-shadow: none !important;
    border: 1px solid #2B22EE !important;
    outline: none !important;
    padding: 14px 32px !important;
    margin: 0 !important;
    height: 48px !important;
    min-height: 48px !important;
    max-height: 48px !important;
    position: relative !important;
    top: 0 !important;
    left: 0 !important;
    font-weight: 700 !important;
    font-size: 16px !important;
    letter-spacing: 0.3px !important;
    line-height: 1 !important; /* Même hauteur de ligne */
    gap: 8px !important; /* Même gap */
    align-items: center !important;
    justify-content: center !important;
}

/* Bouton secondaire - même style bleu carrousel */
.button.secondary-action {
    background: #2B22EE;
    color: #ffffff;
    border: 1px solid #2B22EE;
    backdrop-filter: none;
    font-weight: 600;
    padding: 14px 28px;
    transition: filter 0.2s ease, background-color 0.2s ease !important;
    box-shadow: none !important;
}

.button.secondary-action:hover {
    filter: brightness(1.08) !important;
    transform: none !important;
    box-shadow: none !important;
}

/* BOUTON FERMER - Bleu par défaut, rouge au survol */
.fiche-popup .close-btn,
.fiche-content .close-btn,
.fiche-popup .button.close-btn,
.fiche-content .button.close-btn,
a.button.close-btn { 
    position: absolute !important;
    top: 12px !important;
    right: 12px !important;
    left: auto !important;
    bottom: auto !important;
    background: #2B22EE !important; /* Bleu par défaut */
    color: white !important;
    border: none !important;
    border-radius: 8px !important;
    padding: 8px 16px !important;
    font-size: 14px !important;
    cursor: pointer !important;
    z-index: 10000 !important;
    transform: none !important;
    margin: 0 !important;
    width: auto !important;
    min-width: auto !important;
    max-width: fit-content !important;
    outline: none !important;
    box-shadow: none !important;
}

.fiche-popup .close-btn:hover,
.fiche-content .close-btn:hover,
.fiche-popup .button.close-btn:hover,
.fiche-content .button.close-btn:hover,
a.button.close-btn:hover,
.fiche-popup .close-btn:focus,
.fiche-content .close-btn:focus,
.fiche-popup .button.close-btn:focus,
.fiche-content .button.close-btn:focus,
a.button.close-btn:focus,
.fiche-popup .close-btn:active,
.fiche-content .close-btn:active,
.fiche-popup .button.close-btn:active,
.fiche-content .button.close-btn:active,
a.button.close-btn:active { 
    background: #FF0000 !important; /* Même rouge que YouTube */
    position: absolute !important;
    top: 12px !important;
    right: 12px !important;
    left: auto !important;
    bottom: auto !important;
    padding: 8px 16px !important;
    font-size: 14px !important;
    transform: none !important;
    outline: none !important;
    box-shadow: none !important;
    border: none !important;
}

/* Enfants du bouton ne bloquent pas les clics */
.close-btn *,
.button.close-btn * {
    pointer-events: none !important;
}

/* Style pour empêcher le scroll vers le haut lors de la fermeture */
html {
    scroll-behavior: auto; /* disable smooth to avoid animated jump after closing popup */
}

/* Responsive mobile */
@media (max-width: 768px) {
  /* Mobile: bouton plus compact */
  .fiche-popup .close-btn,
  .fiche-content .close-btn,
  .fiche-popup .button.close-btn,
  .fiche-content .button.close-btn,
  a.button.close-btn {
    position: relative !important;
    top: 0 !important;
    right: 0 !important;
    left: auto !important;
    margin-bottom: 10px !important;
    align-self: flex-end !important;
    z-index: 3;
    padding: 6px 12px !important;
    font-size: 13px !important;
  }
  
  .fiche-popup .close-btn:hover,
  .fiche-content .close-btn:hover,
  .fiche-popup .button.close-btn:hover,
  .fiche-content .button.close-btn:hover,
  a.button.close-btn:hover,
  .fiche-popup .close-btn:focus,
  .fiche-content .close-btn:focus,
  .fiche-popup .button.close-btn:focus,
  .fiche-content .button.close-btn:focus,
  a.button.close-btn:focus,
  .fiche-popup .close-btn:active,
  .fiche-content .close-btn:active,
  .fiche-popup .button.close-btn:active,
  .fiche-content .button.close-btn:active,
  a.button.close-btn:active {
    position: relative !important;
    top: 0 !important;
    right: 0 !important;
    left: auto !important;
    margin-bottom: 10px !important;
    align-self: flex-end !important;
  }
    /* Ensure no extra spacing after the last visible block */
    body > :last-child { margin-bottom: 0 !important; padding-bottom: 0 !important; }
    main#contenu { margin-bottom: 0 !important; padding-bottom: 0 !important; }
    /* Fiche sections spacing */
    #fiche, #fiche .section:last-child, #fiche .section:last-of-type,
    #fiche .actors-panel:last-child { margin-bottom: 0 !important; padding-bottom: 0 !important; }
    body.fiche-page-view #fiche .section { margin: 16px 0 !important; padding-bottom: 0 !important; }
    body.fiche-page-view #fiche,
    body.fiche-page-view main#contenu,
    body.fiche-page-view #fiche > :last-child,
    body.fiche-page-view #fiche .section > :last-child,
    body.fiche-page-view #fiche .section:last-child,
    body.fiche-page-view #fiche .section:last-of-type,
    body.fiche-page-view #fiche .actors-panel,
    body.fiche-page-view #fiche .episodes-panel { margin-bottom: 0 !important; padding-bottom: 0 !important; }
    /* Remove sticky watch button gap on mobile */
    .button-group {
        position: static !important;
        bottom: auto !important;
        padding-bottom: 0 !important;
        margin-bottom: 0 !important;
    }
    
    /* Footer on mobile: visible, stacked lines, left aligned, tight padding */
    .footer { 
        display: block; 
        padding: 16px; 
        margin-top: 30px; 
        background: #080D11; 
        padding-bottom: calc(12px + env(safe-area-inset-bottom));
    }
    .footer .footer-inner {
        display: grid;
        grid-template-columns: 1fr; /* one column */
        row-gap: 10px;
        align-items: start;
        max-width: 100%;
        margin: 0; /* stick to edges */
    }
    .footer .footer-inner > div:first-child {
        justify-self: start;
        text-align: left; /* first line: text */
    }
    .footer .footer-actions {
        justify-self: start;
        text-align: left; /* second line: buttons */
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
    }
    .footer .footer-actions a {
        margin-left: 0 !important; /* override inline margins */
    }
    .footer .footer-actions .button {
        padding: 10px 14px;
        border-radius: 8px;
        margin-left: 0 !important; /* remove extra gaps on first button per inline styles */
    }

    /* Banderole (mobile layout unified in common.css) */
    /* Hide partenariat button on mobile */
    body:not(.fiche-page-view) .nav-links .partner-link { display: none; }
    body:not(.fiche-page-view) .nav-links a { padding: 8px 12px; font-size: 14px; width: auto; flex: 0 0 auto; }
    body:not(.fiche-page-view) .nav-links a:not([href*="youtu"]) { padding: 6px 10px; }
    body:not(.fiche-page-view) .nav-links .search-link {
        padding: 0;
        font-size: 16px;
        background: transparent !important;
        border-radius: 5px;
        width: 40px;
        height: 40px;
        border: 0;
        box-shadow: none;
        margin-left: auto !important;
        text-indent: -9999px;
        overflow: hidden;
        position: relative;
    }
    /* Admin: icon-only on mobile, same touch target */
    body:not(.fiche-page-view) .nav-links .admin-link {
        padding: 0;
        width: 40px;
        height: 40px;
        border: 0;
        box-shadow: none;
        background: transparent !important;
    }
    body:not(.fiche-page-view) .nav-links .admin-link span { display: none; }
    /* Icon and mobile centering are defined in common.css */
    /* Title overflow rules are handled in common.css */

    /* Show and enable carousel on mobile */
    .carousel-section { display: block; margin: 0 0 40px; }
    .carousel-container { overflow: hidden; }
    .carousel-slides { animation: carousel-auto 25s infinite; will-change: transform; backface-visibility: hidden; transform: translate3d(0,0,0); }
    .carousel-slide { transform: translateZ(0); background-image: initial; }
    /* Alex slide mobile tweak: keep head/torso visible on small screens */
    .carousel-slide.alex-focus { background-position: center 22%; }
    .carousel-slide.alex-focus > img { object-position: center 22%; }
    /* Prevent subpixel gaps/rounding on some mobile browsers */
    .carousel-slides, .carousel-slide { 
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
    }

    .carousel-container { min-height: 220px; }
    .carousel-content { padding: 16px; }
    .carousel-title { font-size: clamp(1rem, 4.6vw, 1.2rem); line-height: 1.15; margin: 0 0 8px; }
    .carousel-description { display: none; }

    /* Footer: stack actions under text on mobile (one column) */
    .footer .footer-inner {
        display: grid;
        grid-template-columns: 1fr;
        row-gap: 10px;
        align-items: start;
    }
    .footer .footer-actions {
        justify-self: stretch;
        text-align: left;
        display: flex;
        flex-direction: column; /* force buttons below each other */
        gap: 8px;
        width: 100%;
        margin-left: 0 !important;
    }
    .footer .footer-actions .button {
        width: 100%; /* full width buttons on mobile */
        margin-left: 0 !important;
    }
    /* Neutralize desktop float that could affect footer text on mobile */
    .footer .footer-inner > div:nth-child(2) > span { float: none; }
    .carousel-genres { gap: 4px; margin: 8px 0 10px; }
    /* Hide genres in carousel on mobile to save space, keep rating visible */
    .carousel-genres .carousel-genre-tag { display: none !important; }
    .carousel-genres .carousel-rating { font-size: 1.25rem; }
    /* Replace dots by arrows on mobile */
    .carousel-indicators { display: none !important; }
    .carousel-arrows { 
        display: inline-flex; 
        position: absolute; 
        bottom: calc(8px + env(safe-area-inset-bottom)); 
        right: 12px; 
        gap: 6px; 
        pointer-events: auto; 
    }
    /* Phone/tablet: hide Partenariats title entirely and tighten spacing */
    #partenariats .fiche-right > p:first-of-type { margin-top: 0 !important; }
    .carousel-arrow { 
        width: 48px; 
        height: 48px; 
        display: inline-flex; 
        align-items: center; 
        justify-content: center; 
        background: rgba(0, 0, 0, 0.5); /* fond translucide noir */
        color: #ffffff; /* flèches blanches via currentColor */
        border-radius: 5px; 
        border: 1px solid rgba(255,255,255,0.18);
        -webkit-tap-highlight-color: transparent; 
    }
    /* Remove blue outline on mobile tap/click */
    .carousel-arrow:focus,
    .carousel-arrow:focus-visible,
    .carousel-arrow:active { outline: none !important; box-shadow: none !important; }

    .section { margin: 20px 0; padding-top: 8px !important; }
    .section h2 { margin: 0 16px 8px !important; font-size: 24px; color: #2B22EE; }
    .section-header { margin: 28px 16px 36px !important; }
    .actors-panel { margin: 0 16px 12px; padding: 12px; }
    .actors-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 10px; }
    .actors-panel .actor-card { margin-bottom: 0; padding: 10px; }
      /* Ensure space between the fiche content block and the toggle section */
    #fiche .fiche-content + .section { margin-top: 32px !important; }
    /* Keep a bit of extra room if the button group is the last element inside fiche-content */
    .button-group { margin-bottom: 12px; }
    /* Ensure space between the header buttons and the next block (actors panel or rail) */
    .section-header + .actors-panel { margin-top: 14px !important; }
    .section-header + .rail { margin-top: 14px !important; }
    .section-header + .episodes-panel { margin-top: 14px !important; }
    /* Safety: keep actor photo visible on mobile with a fixed minimum height */
    .actors-panel .actor-photo { min-height: 0; }
    /* Hide genres on fiche page for mobile */
    body.fiche-page-view #fiche .rating-genres .genres { display: none !important; }
    body.fiche-page-view #fiche .actors-panel { margin-bottom: 16px !important; padding-bottom: 16px !important; }

    /* Footer spacing */
    .footer { margin-top: 24px; padding-bottom: max(12px, env(safe-area-inset-bottom)); }

    /* Smaller cards on mobile grids */
    .grid { padding: 0 16px; gap: 12px; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); }
    /* Rails padding on mobile */
    .rail { 
        padding: 0 16px; /* Même espacement latéral que similar-rail */
        padding-top: 6px !important; /* Rapprocher les cartes du titre */
        /* Cartes de largeur similaire aux cartes de search.css (140px ≈ moyenne de minmax(120px, 1fr)) */
        grid-auto-columns: 140px !important;
        gap: 12px !important;
        overflow-x: scroll !important;
        overflow-y: visible !important;
        scroll-snap-type: none !important;   /* force disable snapping on mobile */
        scroll-padding-left: 0 !important;   /* ensure first card aligns exactly at left */
        scroll-padding-inline-start: 16px !important;
    }
    .rail > * { width: auto; }
    /* Also disable snap alignment on children for mobile */
    .rail > .card, .rail > * {
        scroll-snap-align: none !important;
        scroll-margin: 0 !important;
        scroll-margin-inline-start: 0 !important;
    }
    /* Keep consistent alignment for all sections: no extra left padding on mobile */

    /* Ensure rating text (including /5) stays white on mobile */
    .rating-genres .stars,
    .fiche-content .stars { color: #ffffff !important; }

    .fiche-popup { 
        top: 60px; /* below mobile nav */
        padding-left: max(12px, env(safe-area-inset-left)); 
        padding-right: max(12px, env(safe-area-inset-right)); 
        padding-top: max(12px, env(safe-area-inset-top));
        padding-bottom: max(12px, env(safe-area-inset-bottom));
        min-height: calc(100svh - 60px); /* account for fixed nav on mobile */
        align-items: center;
    }

    /* Popup: centrage strict du conteneur */
    .fiche-content {
        grid-template-columns: 1fr;
        grid-template-areas:
            "image"
            "content";
        width: 92%;               /* not full-bleed, keep margins */
        max-width: 700px;         /* cap the width for nice centering */
        margin: 0 auto;           /* center horizontally */
        max-height: calc(100svh - 80px); /* nav + breathing */
        padding: 0 12px 8px; /* no top padding: image hugs the top */
        justify-items: center;
        align-items: start;
        gap: 2px; /* ultra-tight rhythm between image and content */
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        text-align: center;
        -webkit-overflow-scrolling: touch;
        overflow-x: hidden;
        margin-bottom: 8px; /* ensure small space before the next section */
    }
    
    .fiche-left { 
        align-items: center; 
        width: 100%; 
        display: flex;
        flex-direction: column;
        justify-content: flex-start; /* pin image to the top */
    }
    
    .fiche-content img { 
        display: block; 
        margin: 0 auto; /* remove bottom margin, rely on container gap */
        max-width: 100%; /* use full width to avoid side gaps */
        max-height: 34svh; /* default for any image inside fiche-content */
        height: auto;
        border-radius: 12px;
        position: relative; /* create stacking context */
        z-index: 0;
    }

    /* Make only the main fiche image full-bleed (edge-to-edge) on mobile */
    body.fiche-page-view #fiche .fiche-content { 
        padding-left: 0 !important; 
        padding-right: 0 !important; 
        padding-top: 0 !important; /* remove space under navbar */
        margin-top: 0 !important;
    }
    body.fiche-page-view #fiche .fiche-left { 
        width: 100vw; 
        max-width: 100vw; 
        margin-left: 50%; 
        transform: translateX(-50%); 
    }
    body.fiche-page-view #fiche .fiche-left img { 
        width: 100vw; 
        max-width: 100vw; 
        height: auto; 
        max-height: 55svh; /* enlarged only for the main fiche image */
        /* remove corner rounding to truly reach screen edges */
        border-radius: 0 !important; 
    }
    
    .fiche-right {
        padding-left: 0;
        text-align: center;
        width: 100%;
        max-width: 500px;
        margin: 0 auto; /* keep same distance from image via parent gap */
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start; /* anchor text at the top (override desktop center) */
        gap: 2px; /* bring inner elements even closer */
    }
    
    .fiche-content h3 { 
        text-align: center !important; 
        margin: 0 0 2px 0; /* title closer to elements above */
        width: 100%;
        color: inherit; /* allow per-title colors */
        display: block;            /* ensure full-width block for centering */
        min-width: 0;              /* remove desktop min-width constraint */
        margin-left: auto;         /* explicit center safety */
        margin-right: auto;        /* explicit center safety */
    }
    /* Neutralize left-biased transforms on mobile to keep visual centering */
    #film4-title { 
        transform: none; 
        transform-origin: center center; 
    }
    
    .fiche-content p { 
        text-align: center; 
        margin: 0 auto 2px; /* minimal spacing under description */
        max-width: 400px;
        line-height: 1.5;
    }
    
    /* Kill any stray top margins inside the text block */
    .fiche-right > *:first-child { margin-top: 0 !important; }
    
    .rating-genres { 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        gap: 4px; 
        flex-wrap: wrap;
        width: 100%;
        margin: 0 auto 2px; /* closer to title and description */
    }
    
    .rating-genres .stars { 
        display: inline-block; 
        font-size: 18px;
        margin: 0;
        color: #2B22EE;
    }
    
    .genres { 
        display: flex; 
        gap: 8px; 
        justify-content: center; 
        flex-wrap: wrap;
        align-items: center;
    }
    
    .genre-tag { 
        font-size: 13px; 
        padding: 4px 10px;
        white-space: nowrap;
    }

    /* Overlay on image for title + rating + genres (MOBILE ONLY) */
    .fiche-left { position: static; }
    .fiche-media-wrap { position: relative; overflow: visible; border-radius: 12px; background-color: #0b1117; }
    .fiche-media-wrap::before {
        content: '';
        position: absolute;
        left: 0;
        right: 0;
        top: 0;
        bottom: -8px; /* extend slightly below image to avoid visible seam */
        background: linear-gradient(
            180deg,
            rgba(11,17,23,0) 0%,
            rgba(11,17,23,0.18) 20%,
            rgba(11,17,23,0.65) 55%,
            rgba(11,17,23,0.92) 80%,
            rgba(11,17,23,0.98) 92%,
            rgba(11,17,23,1) 100%
        );
        pointer-events: none;
        z-index: 1;
    }

    .fiche-media-wrap::after {
        content: '';
        position: absolute;
        left: 0;
        right: 0;
        bottom: -12px;
        height: 14px;
        background: #0b1117;
        pointer-events: none;
        z-index: 1;
    }
    /* Fiche page: remove rounded corners on the main image wrapper */
    body.fiche-page-view #fiche .fiche-media-wrap { border-radius: 0 !important; }
    .fiche-media-wrap .fiche-overlay {
        position: absolute;
        left: 0; right: 0; bottom: 0;
        width: 100%;
        padding: 12px;
        background: transparent;
        color: #ffffff;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: 6px;
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
        z-index: 2; /* sit above the image */
        pointer-events: none; /* let taps go to underlying image/buttons */
    }

    .mobile-rating-badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        position: absolute;
        top: 12px;
        right: 12px;
        padding: 6px 12px;
        border-radius: 12px;
        background: #0b1117;
        color: #fff;
        font-weight: 700;
        font-size: clamp(0.95rem, 3vw, 1.15rem);
        letter-spacing: 0.02em;
        z-index: 3;
        pointer-events: none;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.35);
    }

    .mobile-rating-badge .star-symbol,
    .rating-genres .stars .star-symbol {
        color: #FFD54A;
        margin-right: 4px;
        display: inline-block;
    }

    .mobile-rating-badge::first-letter {
        color: #FFD54A !important;
    }
    .fiche-media-wrap .fiche-overlay .overlay-title { font-size: 1.4rem; margin: 0; order: 2; }
    body.fiche-page-view #fiche .fiche-media-wrap .fiche-overlay .overlay-meta { display: none !important; }
    /* Rating: white text, yellow star (mobile overlay) */
    .fiche-media-wrap .fiche-overlay .overlay-meta .stars { color: #ffffff !important; }
    .fiche-media-wrap .fiche-overlay .overlay-meta .stars::first-letter { color: #FFD54A !important; }

    /* Hide duplicated blocks ONLY on the fiche page (not in popups / index) */
    body.fiche-page-view #fiche .fiche-right > h3,
    body.fiche-page-view #fiche .fiche-right > .rating-genres,
    body.fiche-page-view #fiche .fiche-right > p { display: none !important; }
    
    .button-group { 
        display: flex; 
        gap: 8px; 
        flex-wrap: nowrap;
        justify-content: center; 
        width: 100%;
        margin: 8px auto 0; /* tighter gap under image */
        padding: 8px 12px;   /* balanced spacing */
        position: static !important; /* override desktop sticky to avoid reserved space */
        bottom: auto !important;
    }

    .button-group .button,
    .button-group .button:hover,
    .button-group .button:focus,
    .button-group .button:active {
        flex: 1 1 0;
        min-width: 0;
        max-width: none;
        padding: 12px 16px !important;
        font-size: 0.95rem !important;
        font-weight: 700 !important;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        letter-spacing: 0.02em;
        height: 48px !important;
        min-height: 48px !important;
        max-height: 48px !important;
    }

    .button-group .fav-primary {
        flex: 0 0 48px !important;
        width: 48px !important;
        min-width: 48px !important;
        max-width: 48px !important;
        padding: 0 !important;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .button-group .fav-primary .fav-label-text {
        display: none !important;
    }

    .button-group .fav-primary .fav-heart-icon {
        width: 22px;
        height: 22px;
        margin: 0 !important;
    }

    .button-group .button svg {
        width: 16px !important;
        height: 16px !important;
        margin-right: 6px !important;
        flex-shrink: 0;
    }

    /* Reduce spacing before next content (e.g., HR + similar content) */
    .section { margin: 12px 0; }
    body.fiche-page-view hr { margin: 8px 0; }
    /* When the similar section follows the fiche content, keep it close */
    #fiche .fiche-content + .section,
    #fiche .button-group + .section {
        margin-top: 32px !important;
    }

    /* Final override: always ensure generous gap after fiche & buttons on mobile */
    body.fiche-page-view #fiche .fiche-content + .section,
    body.fiche-page-view #fiche .button-group + .section {
        margin-top: 36px !important;
    }

    /* POPUPS: make sure content is visible on mobile and left-aligned */
    .fiche-popup .fiche-content {
        display: flex;
        flex-direction: column;
        gap: 10px;
        padding: 16px;
        max-height: min(92svh, 92dvh);
        overflow-y: auto !important;
        overflow-x: hidden !important;
        -webkit-overflow-scrolling: touch;
    }
    .fiche-popup .fiche-right {
        padding-left: 0 !important;
        text-align: left !important; /* do not center popup text on mobile */
        align-items: flex-start !important;
        gap: 10px;
    }
    /* Force left alignment for titles and paragraphs within popups */
    .fiche-popup .fiche-right > h3,
    .fiche-popup .fiche-right > p { 
        display: block !important; 
        text-align: left !important;
        margin-left: 0;
        margin-right: 0;
    }
    .fiche-popup .fiche-right .button-group { justify-content: flex-start; }

    /* Keep thin grey separators inside Partenariats popup on mobile */
    .fiche-popup hr { 
        border: 0; 
        border-top: 1px solid rgba(255,255,255,0.12); 
        margin: 12px 0; 
        width: 100%;
    }
    
    /* Mobile: left-align 'Contenu similaire' and show a subtle top separator */
    /* Make fiche similar section use same horizontal rhythm as index/search */
    #fiche .section {
        padding: 0; /* let inner .grid/.rail carry the 16px side padding like index/search */
        text-align: left;  /* do NOT center */
        border-top: 1px solid rgba(255,255,255,0.12); /* thin separator like desktop */
    }
    #fiche .section h2 { 
        text-align: left; 
        margin: 0 0 8px 0; 
        padding: 0 16px; /* keep same side gutters as grids so text isn't cut */
        box-sizing: border-box;
    }
    /* Ensure same mobile paddings as index/search inside the section content */
    #fiche .section .grid { padding: 0 16px !important; gap: 12px !important; }
    #fiche .section .rail { padding: 0 16px !important; gap: 12px !important; }
    /* Enforce same card sizing model as index/search */
    body.fiche-page-view #fiche .section .grid {
        grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)) !important;
    }
    body.fiche-page-view #fiche .section .rail {
        grid-auto-columns: 140px !important;
    }
    body.fiche-page-view #fiche .section .rail > * {
        width: auto !important;
    }
    body.fiche-page-view #fiche .section .card .card-media > img {
        width: 100% !important;
        height: 100% !important;
        object-fit: cover !important;
    }
    /* Badge sizing/position centralized in common.css */
}

/* Formats très bas (landscape): ajuster largeur des cartes */
@media (max-width: 768px) and (max-height: 400px) {
    body.fiche-page-view #fiche .section .rail {
        grid-auto-columns: clamp(135px, 26vh, 190px) !important; /* vh pour s'adapter à la hauteur */
    }
    body.fiche-page-view #fiche .section .grid {
        grid-template-columns: repeat(auto-fill, minmax(115px, 1fr)) !important;
    }
    /* Ratio adapté pour formats très bas */
    body.fiche-page-view #fiche .section .card .card-media {
        aspect-ratio: 3/4 !important;
    }
    
    /* Adapter les boutons pour formats très bas */
    .button { 
        flex: 1 1 auto;
        max-width: 200px;
        min-width: 120px;
        text-align: center; 
        padding: 14px 20px; 
        min-height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
    }
}
/* Neutralize system dark mode: keep site appearance unchanged in dark mode */
@media (prefers-color-scheme: dark) {
    :root { color-scheme: light; }
}

/* Amélioration des performances */
@media (prefers-reduced-motion: reduce) {
    .carousel-slides {
        animation: none;
    }
    
    .carousel-indicator {
        animation: none;
    }
    
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* Footer */
.footer {
    margin-top: 60px;
    padding: 32px var(--gutter);
    background: #080D11;
    color: #8fa3b8;
    border-top: 1px solid rgba(255,255,255,0.16); /* thin white delimiter */
}
.footer .footer-inner {
    max-width: 1280px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 16px;
    align-items: center;
}
.footer .footer-actions { justify-self: end; text-align: right; }
.footer a { color: #c8d4e0; text-decoration: none; }
.footer a:hover { color: #fff; }

/* Footer typography sizes */
.footer .footer-title { font-size: 22px; }
.footer .footer-desc { font-size: 18px; }
.footer .back-to-top-btn,
.footer .button { font-size: 18px; }
.footer .footer-list a { font-size: 18px !important; line-height: 1.5; }
/* Footer icons size */
.footer .footer-list svg { width: 18px !important; height: 18px !important; }

/* Footer top section with 2 columns */
.footer-top-section {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 48px;
  margin-bottom: 48px;
  align-items: start;
}

.footer-partners-section {
  text-align: left;
}

a.partnership-btn,
.partnership-btn,
a.partnership-btn:link,
a.partnership-btn:visited {
  transform: none !important;
  box-shadow: none !important;
  outline: none !important;
  outline-offset: 0 !important;
  font-size: 18px !important;
  font-weight: 600 !important;
  padding: 12px 24px !important;
  border: 1px solid #2B22EE !important;
  line-height: 1.5 !important;
  display: inline-flex !important;
  align-items: center !important;
  gap: 10px !important;
  position: relative !important;
  top: 0 !important;
  left: 0 !important;
  margin: 0 !important;
}

a.partnership-btn:hover,
.partnership-btn:hover {
  filter: brightness(1.08) !important;
  transform: none !important;
  box-shadow: none !important;
  outline: none !important;
  outline-offset: 0 !important;
  border: 1px solid #2B22EE !important;
  font-size: 18px !important;
  font-weight: 600 !important;
  padding: 12px 24px !important;
  line-height: 1.5 !important;
  display: inline-flex !important;
  align-items: center !important;
  gap: 10px !important;
  position: relative !important;
  top: 0 !important;
  left: 0 !important;
  margin: 0 !important;
}

a.partnership-btn:focus,
a.partnership-btn:active,
a.partnership-btn:focus-visible,
.partnership-btn:focus,
.partnership-btn:active,
.partnership-btn:focus-visible {
  transform: none !important;
  box-shadow: none !important;
  outline: none !important;
  outline-offset: 0 !important;
  filter: brightness(1.08) !important;
  border: 1px solid #2B22EE !important;
  font-size: 18px !important;
  font-weight: 600 !important;
  padding: 12px 24px !important;
  line-height: 1.5 !important;
  display: inline-flex !important;
  align-items: center !important;
  gap: 10px !important;
  position: relative !important;
  top: 0 !important;
  left: 0 !important;
  margin: 0 !important;
}

a.partnership-btn svg,
.partnership-btn svg,
a.partnership-btn:hover svg,
.partnership-btn:hover svg,
a.partnership-btn:focus svg,
.partnership-btn:focus svg,
a.partnership-btn:active svg,
.partnership-btn:active svg,
a.partnership-btn:focus-visible svg,
.partnership-btn:focus-visible svg {
  transform: none !important;
  width: 20px !important;
  height: 20px !important;
  min-width: 20px !important;
  max-width: 20px !important;
  min-height: 20px !important;
  max-height: 20px !important;
}

/* Footer columns responsive */
.footer-columns {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 32px;
  margin-top: 0;
  text-align: left;
}

.footer-columns > div {
  min-width: 0; /* Prevent overflow */
}

.footer-title {
  font-size: 20px !important;
  font-weight: 600;
  margin: 0 0 12px 0 !important;
  color: #ffffff !important;
}

.footer-list {
  display: flex;
  flex-direction: column;
  gap: 10px;
  list-style: none;
  padding: 0;
  margin: 0;
}

.footer-list a {
  color: rgba(255,255,255,0.72);
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  transition: color 0.2s ease;
}

.footer-list a:hover {
  color: #ffffff;
}

/* Mobile: add extra space between last cards and footer */
@media (max-width: 768px) {
  .footer { margin-top: 24px; padding: 24px 16px; }
  main#contenu { padding-bottom: 48px !important; }
  .section:last-of-type { margin-bottom: 24px !important; }
  
  /* Footer top section en 1 colonne sur mobile */
  .footer-top-section {
    grid-template-columns: 1fr;
    gap: 32px;
    margin-bottom: 32px;
  }
  
  /* Cacher "Infos sur le site" sur mobile */
  .footer-top-section > div:first-child {
    display: none !important;
  }
  
  /* Footer columns en 1 colonne sur mobile */
  .footer-columns {
    grid-template-columns: 1fr;
    gap: 24px;
    margin-top: 0;
  }
  
  .footer-title {
    font-size: 18px !important;
  }
  
  .footer-list a {
    font-size: 16px !important;
  }
  
  .footer-list svg {
    width: 16px !important;
    height: 16px !important;
  }
  
  .partnership-btn {
    font-size: 16px !important;
    padding: 10px 20px !important;
  }
}

/* Header extras (menu, search, avatar) */
.search { display: none; }

/* Small Discord button to replace avatar */
.discord-mini { display: none; width: 36px; height: 36px; border-radius: 50%; background: #5865F2; border: 1px solid rgba(255,255,255,0.18); color: #fff; font-weight: 800; align-items: center; justify-content: center; text-decoration: none; }
.discord-mini:hover { filter: brightness(0.95); }
/* Desktop: show full nav (links + search), keep only one external button */
@media (min-width: 900px) {
  .nav-links { display: flex; }
  .search { display: none; }
  .discord-mini { display: none; }
}
/* Ensure any yt link in nav stays hidden if present */
nav[aria-label="Navigation principale"] .yt-link { display: none !important; }

/* Rails (rows like Netflix) */
/* Base layout for all viewports (keeps cards correctly sized on mobile) */
.rail {
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: clamp(180px, 18vw, 240px);
    gap: 18px;
    overflow-x: auto;
    overflow-y: visible; /* allow hover lift without clipping */
    overscroll-behavior-x: contain;
}
/* Desktop-only: add side paddings + enable snapping */
@media (min-width: 769px) {
  .rail {
      padding: 0 var(--gutter);
      scroll-snap-type: inline proximity; /* softer snapping to avoid hover shifts */
  }
}
.rail::-webkit-scrollbar { height: 10px; }
.rail::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.12); border-radius: 8px; }
@media (min-width: 769px) {
  .rail > .card { scroll-snap-align: start; }
}

  /* Global scrollbar styles provided by common.css */

/* ===== Rail edge spacing and clipping (desktop and mobile) ===== */
/* Desktop: clip horizontal overflow, Mobile: allow scroll */
@media (min-width: 769px) {
  .section { overflow: hidden; }
}
@media (max-width: 768px) {
  .section { overflow: visible; }
}

/* Desktop: keep 40px left space and clip right edge like reference site */
@media (min-width: 769px) {
  .rail {
    padding-left: 40px !important;
    padding-right: 40px !important;
    margin-right: -40px !important; /* clip right padding so last cards can be cut */
    scroll-padding-inline-start: 40px !important; /* start scroll with left offset */
    /* Hide native scrollbar on desktop while preserving scroll */
    scrollbar-width: none;           /* Firefox */
    -ms-overflow-style: none;        /* IE/Edge legacy */
  }
  .rail::-webkit-scrollbar { display: none; } /* Chrome/Safari */
}

/* Mobile: touch interactions pour les rails (autres propriétés définies dans le bloc mobile principal) */
@media (max-width: 768px) {
  .rail {
    -webkit-overflow-scrolling: touch !important;
    touch-action: pan-x pan-y !important; /* allow horizontal AND vertical (for page scroll) */
  }
  .rail > * {
    touch-action: manipulation !important; /* permettre toutes les interactions */
  }
}

/* ========== SECTION CONTENU SIMILAIRE - VERSION PROPRE ========== */

/* Section similaire - styling de base */
.similar-section {
  margin: 20px 0;
}

/* Rail de contenu similaire */
.similar-rail {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: clamp(160px, 16vw, 220px);
  gap: 16px;
  overflow-x: auto;
  padding: 0 var(--gutter);
  scroll-snap-type: x mandatory;
}

.similar-rail > .card {
  scroll-snap-align: start;
}

/* Mobile : Ajustements simples */
@media (max-width: 768px) {
  .similar-section {
    margin: 16px 0;
  }
  
  .similar-rail {
    grid-auto-columns: 140px !important; /* Harmonisé avec les autres rails */
    gap: 12px !important;
    padding: 0 16px;
    scroll-snap-type: none;
  }

  .similar-rail > .card {
    margin-bottom: 16px;
  }
}

/* Mobile paysage : Ratio adapté */
@media (max-width: 768px) and (orientation: landscape) {
  .similar-rail {
    grid-auto-columns: clamp(120px, 24vh, 160px);
    gap: 12px;
  }
  
  .similar-rail .card-media {
    aspect-ratio: 3/4 !important;
  }
}

/* Mobile – Fiche compacte: réduire l'espace vertical proprement */
@media (max-width: 768px) {
  /* Ne pas réserver de hauteur inutile pour le bloc fiche */
  body.fiche-page-view #fiche .fiche-content {
    display: contents !important;
    max-height: none !important;
    overflow: visible !important;
    padding: 0 !important;
    margin: 0 !important;
  }

  /* Sections plus serrées mais sans grande marge basse */
  body.fiche-page-view #fiche .section {
    margin: 10px 0 !important;
    padding-bottom: 0 !important;
  }

  /* Lier visuellement la première section à la fiche */
  #fiche .fiche-content + .section {
    margin-top: 6px !important;
  }

  /* Header compact */
  body.fiche-page-view .section-header {
    margin: 8px 16px 8px !important;
  }

  /* Espace minimal entre header et contenu */
  .section-header + .rail,
  .section-header + .actors-panel,
  .section-header + .episodes-panel {
    margin-top: 8px !important;
  }

  /* Aucun débord bas inutile sur la dernière section */
  body.fiche-page-view #fiche .section:last-child {
    margin-bottom: 0 !important;
    padding-bottom: 0 !important;
  }
}

@media (min-width: 769px) {
  body.fiche-page-view .fiche-left img.landscape {
    max-height: none !important;
    height: auto !important;
  }
  /* Ne pas contraindre la hauteur du conteneur fiche sur la page fiche */
  body.fiche-page-view #fiche .fiche-content {
    max-height: none !important;
    overflow-y: visible !important;
  }
}

  /* Card hover actions */
  .card { position: relative; }
  .card-actions {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
    background: linear-gradient(180deg, rgba(0,0,0,0) 20%, rgba(0,0,0,0.5) 60%, rgba(0,0,0,0.75) 100%);
    opacity: 0;
    transition: opacity .25s ease;
}
.card:hover .card-actions { opacity: 1; }
.carousel-arrow:focus { outline: 2px solid #2B22EE; outline-offset: 2px; }
.carousel-arrow:hover { background: rgba(0,0,0,0.7); transform: translateY(-1px); }
.carousel-arrow svg { width: 24px; height: 24px; display: block; }
.quick-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    background: #2B22EE;
    border: 1px solid #2B22EE;
    color: #fff;
    padding: 10px 14px;
    transition: filter 0.2s ease !important;
    box-shadow: none !important;
    outline: none !important;
    margin: 0;
    backface-visibility: hidden;
    -webkit-font-smoothing: antialiased;
}
.quick-btn:hover,
.quick-btn:focus { 
  filter: brightness(1.08) !important;
  transform: none !important;
  box-shadow: none !important;
  border: 1px solid #2B22EE !important;
  outline: none !important;
  padding: 10px 14px !important;
  margin: 0 !important;
}

/* Subtle animated gradient background */
body {
  background: radial-gradient(1200px 600px at 10% -10%, rgba(43,34,238,0.18), transparent 60%),
              radial-gradient(1000px 700px at 100% 10%, rgba(108,92,231,0.18), transparent 60%),
              linear-gradient(180deg, var(--bg-2), var(--bg-1));
}

/* Pas de dégradé sur la page fiche - fond uni */
body.fiche-page-view {
  background: var(--bg-1) !important;
}

/* ===== Visual Enhancements (Index) ===== */
/* Section titles: plain white, no underline */
.section h2 {
  border: none;
  color: #ffffff;
}

/* Card polish */
.card {
  background: linear-gradient(180deg, rgba(26,35,50,0.65), rgba(26,35,50,0.9));
  box-shadow:
    0 10px 30px rgba(0,0,0,0.35),
    inset 0 1px 0 rgba(255,255,255,0.06);
}
.card:hover {
  transform: translateY(-6px);
  box-shadow: 0 14px 38px rgba(0,0,0,0.45);
}
.card img { will-change: transform; }

/* Buttons - style carrousel unifié */
.carousel-btn,
.quick-btn,
.button {
  background: #2B22EE;
  border: 1px solid #2B22EE;
  box-shadow: none !important;
  transition: filter 0.2s ease !important;
}
.carousel-btn:hover,
.quick-btn:hover,
.button:hover {
  filter: brightness(1.08) !important;
  transform: none !important;
  box-shadow: none !important;
}

/* Keep partenariat button green even when using .button styles */
.button.partner-link {
  background: #16a34a !important;
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow: 0 10px 20px rgba(22,163,74,0.25), inset 0 1px 0 rgba(255,255,255,0.12);
}
.button.partner-link:hover {
  background: #15803d !important;
  filter: brightness(0.98);
}

/* Discord footer button (blue) */
.button.discord-btn {
  background: #5865F2 !important; /* Discord brand */
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow: 0 10px 20px rgba(88,101,242,0.25), inset 0 1px 0 rgba(255,255,255,0.12);
}
.button.discord-btn:hover {
  background: #4752C4 !important;
  filter: brightness(0.98);
}
.button.discord-btn svg {
  width: 35px;
  height: 35px;
  display: inline-block;
  vertical-align: middle;
}

/* YouTube footer button (red) - Spécificité maximale */
a.button.youtube-btn,
.button.youtube-btn.youtube-btn {
  background: #FF0000 !important; /* YouTube brand */
  border: 1px solid rgba(255,255,255,0.14) !important;
  border-color: rgba(255,255,255,0.14) !important;
  box-shadow: none !important; /* Pas de glow */
  outline: none !important;
}
a.button.youtube-btn:hover,
a.button.youtube-btn:focus,
a.button.youtube-btn:active,
a.button.youtube-btn:focus-visible,
.button.youtube-btn.youtube-btn:hover,
.button.youtube-btn.youtube-btn:focus,
.button.youtube-btn.youtube-btn:active,
.button.youtube-btn.youtube-btn:focus-visible {
  background: #CC0000 !important;
  filter: brightness(0.98) !important;
  outline: none !important;
  outline-width: 0 !important;
  outline-color: transparent !important;
  outline-style: none !important;
  box-shadow: none !important;
  border: 1px solid rgba(255,255,255,0.14) !important;
  border-color: rgba(255,255,255,0.14) !important;
  -webkit-box-shadow: none !important;
  -moz-box-shadow: none !important;
}
.button.youtube-btn svg {
  width: 30px;
  height: 30px;
  display: inline-block;
  vertical-align: middle;
  position: relative;
  top: -2px; /* slightly up */
}

/* Boutons "Lien de la chaîne" dans la popup YouTube - En rouge */
#youtube .button:not(.close-btn),
#youtube a.button:not(.close-btn) {
  background: #FF0000 !important;
  border: 1px solid rgba(255,255,255,0.14) !important;
  border-color: rgba(255,255,255,0.14) !important;
  box-shadow: none !important;
  outline: none !important;
}

#youtube .button:not(.close-btn):hover,
#youtube .button:not(.close-btn):focus,
#youtube .button:not(.close-btn):active,
#youtube a.button:not(.close-btn):hover,
#youtube a.button:not(.close-btn):focus,
#youtube a.button:not(.close-btn):active {
  background: #CC0000 !important;
  border: 1px solid rgba(255,255,255,0.14) !important;
  border-color: rgba(255,255,255,0.14) !important;
  box-shadow: none !important;
  outline: none !important;
}

/* Footer buttons aligned to the right while keeping original layout */
.footer .footer-inner > div:nth-child(2) { text-align: right; }
.footer .footer-inner > div:nth-child(2) > span { float: left; }
.footer .footer-inner > div:nth-child(2)::after { content: ""; display: table; clear: both; }

/* Prevent cards from being clipped on hover translateY in all sections */
.section .rail { padding-top: 12px; }

/* Focus-visible ring - désactivé pour les boutons */
:where(a, input, [tabindex]):focus-visible {
  outline: 2px solid rgba(99,102,241,0.9);
  outline-offset: 2px;
  box-shadow: 0 0 0 6px rgba(99,102,241,0.25);
}
/* Pas d'outline pour les boutons qui causent des décalages */
button:focus-visible,
.button:focus-visible,
.quick-btn:focus-visible {
  outline: none !important;
  outline-offset: 0 !important;
  box-shadow: none !important;
}

/* Smoother transitions - SAUF pour les boutons (cause des décalages) */
*:not(.button):not(button):not(.quick-btn) { 
  transition: background-color .25s ease, color .25s ease, border-color .25s ease, transform .25s ease, box-shadow .25s ease; 
}

    /* Category label via data-type attribute for new genre sections */
    .card .card-info::before { margin-right: 8px; }
    .card .card-info[data-type="film"]::before { content: "Film"; }
    .card .card-info[data-type="serie"]::before,
    .card .card-info[data-type="série"]::before { content: "Série"; }
    .card .card-info[data-type="trailer"]::before { content: "Trailer"; }

    /* Improve legibility for 'Trailer' in film5 title: keep lowercase and use a font with distinct 'i' dot */
    #film5-title .trailer-word {
        text-transform: none !important;
        font-family: Verdana, Tahoma, "Segoe UI", Arial, sans-serif;
        letter-spacing: 0.3px;
    }

    /* ===== Fiche page specific overrides ===== */
    body.fiche-page-view .fiche-content {
        /* Revert to transparent background to avoid double background */
        background: transparent !important;
        border: none !important;
        border-radius: 0 !important;
        box-shadow: none !important;
        max-height: none !important;
        padding: 16px !important; /* keep a bit more breathing room */
        margin: 0 auto 28px !important; /* space before similar section */
        max-width: 1320px; /* allow room for columns + gap so nothing is cut */
        width: 100%;
        display: flex !important;            /* use flex to avoid grid side-effects */
        justify-content: center;              /* center the two columns */
        align-items: flex-start;              /* align to top */
        gap: 32px;                            /* space between image and text */
    }
    /* Desktop: align fiche page logo like index (account for hamburger space on index) */
    @media (min-width: 769px) {
      body.fiche-page-view nav[aria-label="Navigation principale"] .logo {
        margin-left: 88px !important;
      }
    }
    /* Subtle top separator before similar section on fiche pages - style moderne */
    #fiche > .section {
        border-top: none;
        padding-top: 32px;
        margin-top: 24px;
        position: relative;
    }
    #fiche > .section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    }
    body.fiche-page-view .fiche-content.landscape-layout { 
        display: flex !important;
        background: transparent !important;
        padding: 32px 40px !important;
        gap: 48px !important;
    }
    /* Responsive, non-cutting columns using clamp() so they adapt to viewport */
    body.fiche-page-view .fiche-left {
        align-items: stretch !important;
        flex: 1 1 clamp(580px, 50vw, 800px); /* Image plus grande */
        min-width: 0;
    }
    body.fiche-page-view .fiche-right {
        padding-left: 0 !important;
        flex: 1 1 clamp(480px, 36vw, 560px);
        min-width: 0;
        max-width: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }
    /* Ensure inner content can wrap instead of overflowing out of the container */
    body.fiche-page-view .fiche-right, 
    body.fiche-page-view .fiche-right > * { max-width: 100%; overflow-wrap: anywhere; word-break: break-word; }

    /* Medium screens: relax gaps and bases a bit so nothing touches edges */
    @media (max-width: 1100px) {
        body.fiche-page-view .fiche-content { gap: 20px; }
        body.fiche-page-view .fiche-left  { flex-basis: clamp(500px, 52vw, 680px); } /* Image plus grande */
        body.fiche-page-view .fiche-right { flex-basis: clamp(420px, 44vw, 540px); }
    }
    
    /* Narrow screens (4:3 aspect ratio or less): stack content vertically */
    @media (min-width: 769px) and (max-width: 1200px) {
        body.fiche-page-view .fiche-content.landscape-layout {
            flex-direction: column !important;
            align-items: center !important;
            gap: 32px !important;
            padding: 24px 32px !important;
        }
        
        body.fiche-page-view .fiche-left {
            flex: 0 0 auto !important;
            width: 100% !important;
            max-width: 1000px !important;
            align-items: center !important;
        }
        
        body.fiche-page-view .fiche-left img.landscape {
            width: 100% !important;
            max-height: 60vh !important;
            border-radius: 12px !important;
            box-shadow: 0 8px 32px rgba(0,0,0,0.4);
        }
        
        body.fiche-page-view .fiche-right {
            flex: 0 0 auto !important;
            width: 100% !important;
            max-width: 1000px !important;
            padding: 0 !important;
            text-align: left !important;
        }
    }
    
    /* Fiche page: cards avec même fond que index */
    body.fiche-page-view #fiche .section .card {
        border: none !important;
        background: linear-gradient(180deg, rgba(26,35,50,0.65), rgba(26,35,50,0.9)); /* Même fond que index */
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        backdrop-filter: blur(8px);
    }

    /* Hover subtil style streaming pro */
    body.fiche-page-view #fiche .section .card:hover {
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5) !important;
        transform: translateY(-4px) scale(1.02);
    }

    /* Ensure raised cards are not clipped on fiche */
    body.fiche-page-view #fiche .section .card:hover,
    body.fiche-page-view #fiche .section .card:focus-within,
    body.fiche-page-view #fiche .section .card:active {
        z-index: 10;
        position: relative;
    }

    /* Mobile: guarantee overflow visible and space for lift */
    @media (max-width: 768px) {
      body.fiche-page-view #fiche .section,
      body.fiche-page-view #fiche .section .grid {
        overflow: visible !important;
      }
      /* Rail needs horizontal scroll on mobile */
      body.fiche-page-view #fiche .section .rail {
        overflow-x: scroll !important;
        overflow-y: visible !important;
        padding-top: 12px !important; /* room for translateY hover */
      }
    }

/* Mobile override: keep section titles visible inside "Voir tout" popups and shrink if needed */
@media (max-width: 768px) {
  .fiche-popup[id^="all-"] .fiche-content h3,
  .fiche-popup[id^="all-"] .fiche-right > h3,
  .fiche-popup[id^="all-"] h3 {
    display: block !important;
    margin: 0 0 8px 0 !important;
    font-size: clamp(16px, 5.4vw, 22px) !important;
    line-height: 1.2 !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    text-align: left !important;
  }
  /* Align title with close button: place close at top-right and reserve space on the right of title */
  .fiche-popup[id^="all-"] .fiche-content { position: relative; }
  .fiche-popup[id^="all-"] .close-btn,
  .fiche-popup[id^="all-"] .button.close-btn {
    top: 8px !important;
    right: 8px !important;
  }
  .fiche-popup[id^="all-"] .fiche-right > h3 { 
    /* align vertically with close button top */
    margin-top: 8px !important;
    padding-right: 80px; /* keep text clear from the close button (moins large maintenant) */
  }
}

/* ===== AMÉLIORATIONS DESIGN PROFESSIONNEL ===== */

/* Améliorations des icônes SVG */
.drawer svg, .button svg, .link svg, h2 svg, h3 svg {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.drawer .link:hover svg {
  transform: scale(1.1);
}
.button:hover svg {
  transform: none !important; /* Pas de scale pour éviter le décalage du texte */
}

/* Effets de fondu et animations modernes */
.carousel-slide {
  transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.carousel-slide::before, .carousel-slide::after {
  transition: opacity 0.4s ease-in-out;
}

/* Améliorations des cartes avec effets de profondeur */
.card {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.08) 0%,
    rgba(255, 255, 255, 0.04) 50%,
    rgba(255, 255, 255, 0.02) 100%
  );
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
  z-index: 1;
}

.card:hover::before {
  opacity: 1;
}

.card:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 
    0 20px 40px rgba(0, 0, 0, 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

/* Mini-descriptions au survol - SUPPRIMÉES */
.card-media {
  position: relative;
  overflow: hidden;
}

/* Améliorations des boutons - DÉSACTIVÉ au profit du style carrousel unifié */
/* Les boutons utilisent maintenant uniquement filter: brightness(1.08) au survol */

/* Éviter que les cartes soient coupées en haut dans les fiches */
.fiche-popup .rail {
  padding-top: 20px;
  overflow: visible;
}

.fiche-popup .section {
  overflow: visible;
}

/* S'assurer que le conteneur principal a toujours le scroll pour afficher tout le contenu */
.fiche-popup .fiche-content {
  overflow-y: auto !important;
  overflow-x: hidden !important;
  -webkit-overflow-scrolling: touch; /* smooth scrolling sur iOS */
}

/* Style de scrollbar amélioré pour les popups */
.fiche-popup .fiche-content {
  scrollbar-width: thin;
  scrollbar-color: rgba(255,255,255,0.3) rgba(0,0,0,0.2);
}
.fiche-popup .fiche-content::-webkit-scrollbar {
  width: 10px;
}
.fiche-popup .fiche-content::-webkit-scrollbar-track {
  background: rgba(0,0,0,0.2);
  border-radius: 10px;
}
.fiche-popup .fiche-content::-webkit-scrollbar-thumb {
  background: rgba(255,255,255,0.3);
  border-radius: 10px;
  border: 2px solid rgba(0,0,0,0.2);
}
.fiche-popup .fiche-content::-webkit-scrollbar-thumb:hover {
  background: rgba(255,255,255,0.45);
}

/* Style unifié géré plus haut - ces règles sont désactivées */
/*.button:hover, .carousel-btn:hover {
  transform: translateY(-2px);
  box-shadow: 
    0 10px 25px rgba(43, 34, 238, 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.2);
}*/

/* Améliorations des catégories avec effets de survol */
.category-card {
  position: relative;
  overflow: hidden;
}

.category-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    45deg,
    rgba(43, 34, 238, 0.8) 0%,
    rgba(108, 92, 231, 0.6) 100%
  );
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 1;
}

.category-card:hover::before {
  opacity: 1;
}

/* Texte de catégorie au survol supprimé */

/* Améliorations des popups avec animations fluides */
.fiche-popup {
  backdrop-filter: blur(10px);
}

.fiche-content {
  background: rgba(21, 29, 40, 0.95) !important;
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
  box-shadow: 
    0 25px 50px rgba(0, 0, 0, 0.6),
    0 0 0 1px rgba(255, 255, 255, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.2) !important;
}

/* Améliorations de la navigation avec effets subtils */
nav {
  backdrop-filter: blur(15px);
  transition: all 0.3s ease;
}

.hamburger {
  transition: all 0.3s ease;
}

.hamburger:hover {
  transform: scale(1.1);
}

.hamburger .bar {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Améliorations du carousel avec transitions fluides */
.carousel-content {
  background: linear-gradient(
    to top,
    rgba(11, 17, 23, 0.8) 0%,
    rgba(11, 17, 23, 0.6) 40%,
    rgba(11, 17, 23, 0.3) 70%,
    transparent 100%
  );
}

.carousel-title {
  text-shadow: none !important;
  animation: none !important;
}

@keyframes titleGlow {
  from {
    text-shadow: 0 4px 8px rgba(0, 0, 0, 0.8);
  }
  to {
    text-shadow: 
      0 4px 8px rgba(0, 0, 0, 0.8),
      0 0 20px rgba(255, 255, 255, 0.3);
  }
}

.carousel-description {
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
}

/* Améliorations des étoiles avec animation */
.stars {
  color: #FFD700;
  text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
  animation: starTwinkle 2s ease-in-out infinite alternate;
}

@keyframes starTwinkle {
  from {
    text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
  }
  to {
    text-shadow: 
      0 0 10px rgba(255, 215, 0, 0.8),
      0 0 20px rgba(255, 215, 0, 0.4);
  }
}

/* Améliorations des descriptions contextuelles */
.carousel-description {
  position: relative;
  padding-left: 20px;
}

.carousel-description::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: var(--brand-1);
  border-radius: 2px;
}

/* Améliorations des titres de sections */
.section h2 {
  position: relative;
  display: flex;
  align-items: center;
  padding-bottom: 4px;
}

/* Suppression des barres sous les titres */

/* Améliorations de la typographie */
.carousel-title, .section h2, .fiche-popup h3 {
  font-weight: 800;
  letter-spacing: -0.02em;
}

.carousel-description, .fiche-popup p {
  font-weight: 400;
  letter-spacing: 0.01em;
  line-height: 1.6;
}

/* Améliorations des genres tags */
.genre-tag, .carousel-genre-tag {
  position: relative;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
}

.genre-tag:hover, .carousel-genre-tag:hover {
  background: rgba(255, 255, 255, 0.15);
  border-color: rgba(255, 255, 255, 0.25);
  transform: translateY(-1px);
}

/* Do not move or lighten genre chips in the carousel on hover */
.carousel-genre-tag:hover {
  background: rgba(255, 255, 255, 0.08) !important;
  border-color: rgba(255, 255, 255, 0.15) !important;
  transform: none !important;
}

/* On fiche page, also keep genre chips static and same color on hover */
body.fiche-page-view .genre-tag:hover,
body.fiche-page-view .carousel-genre-tag:hover {
  background: rgba(255, 255, 255, 0.08) !important;
  border-color: rgba(255, 255, 255, 0.15) !important;
  transform: none !important;
}

/* Améliorations des étoiles dans les ratings */
.stars {
  font-family: 'Segoe UI Symbol', 'Apple Color Emoji', sans-serif;
  font-weight: normal;
}

/* Améliorations de l'accessibilité */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Améliorations des focus states */
.card:focus-visible, .category-card:focus-visible {
  outline: 3px solid rgba(43, 34, 238, 0.8);
  outline-offset: 2px;
}
/* Pas d'outline pour les boutons */
.button:focus-visible {
  outline: none !important;
  outline-offset: 0 !important;
}

/* Améliorations du contraste pour l'accessibilité */
.carousel-description, .fiche-popup p {
  color: rgba(255, 255, 255, 0.95);
}

/* Ensure the Partenariats popup content can scroll (override any earlier overflow:visible) */
#partenariats .fiche-content {
  max-height: min(92vh, 92dvh);
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch;
}
@media (max-width: 768px) {
  #partenariats {
    top: 60px !important; /* keep below mobile nav */
    height: calc(100svh - 60px) !important;
    min-height: calc(100svh - 60px) !important;
  }
  #partenariats .fiche-content {
    max-height: min(92svh, 92dvh);
  }
}

.section h2 {
  color: #ffffff;
}

/* Responsive: désactiver certaines animations sur mobile pour les performances */
@media (max-width: 768px) {
  .card:hover {
    transform: translateY(-4px) scale(1.01);
  }
  
  .carousel-title {
    animation: none;
  }
  
  .stars {
    animation: none;
  }
  
  /* Simplifier les effets sur mobile */
  .card::before {
    display: none;
  }
  
  /* Garder l'overlay bleu pour les catégories sur mobile - renforcé */
  .category-card::before {
    background: linear-gradient(
      135deg,
      rgba(43, 34, 238, 0.6) 0%,
      rgba(43, 34, 238, 0.5) 50%,
      rgba(43, 34, 238, 0.4) 100%
    );
  }
  
  /* Activer l'overlay au toucher sur mobile */
  .category-card:active::before,
  .category-card:focus::before {
    opacity: 1;
  }
  
  .carousel-description::before {
    width: 2px;
  }
}

/* Centrer les sections spécifiques */
#continue-watching,
.categories-section {
  margin: 0 auto;
  max-width: calc(100% - 80px);
}

@media (max-width: 768px) {
  #continue-watching,
  .categories-section {
    max-width: calc(100% - 32px);
  }
  
  /* Ajuster la taille de l'icône "soutenir" sur mobile */
  .drawer .cta-row a[href*="tipeee"] svg {
    width: 18px !important;
    height: 18px !important;
  }
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .carousel-description::before {
    width: 2px;
  }
}

/* Améliorations pour les écrans haute résolution */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .carousel-title, .section h2 {
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* Fix: in popups, buttons should scroll with content (disable sticky) */
.fiche-popup .button-group {
  position: static !important;
  bottom: auto !important;
  padding-bottom: 0 !important;
  transform: none !important;
}
.fiche-popup .button-group > * {
  flex-shrink: 0 !important;
}

/* Stabilité des boutons dans les popups - mêmes règles que page principale */
.fiche-popup .button {
  min-height: 48px !important;
  max-height: 48px !important;
  height: 48px !important;
  position: relative !important;
  top: 0 !important;
  left: 0 !important;
  backface-visibility: hidden !important;
  -webkit-font-smoothing: antialiased !important;
  text-rendering: geometricPrecision !important;
  contain: layout style !important;
  isolation: isolate !important;
  vertical-align: middle !important;
  flex-shrink: 0 !important;
  will-change: filter !important;
  transform: translateZ(0) !important;
  line-height: 1 !important;
}
.fiche-popup .button:hover,
.fiche-popup .button:focus,
.fiche-popup .button:active {
  height: 48px !important;
  min-height: 48px !important;
  max-height: 48px !important;
  position: relative !important;
  top: 0 !important;
  left: 0 !important;
  transform: translateZ(0) !important;
  line-height: 1 !important;
  padding: 14px 32px !important;
  margin: 0 !important;
  border: 1px solid #2B22EE !important;
  font-weight: 700 !important;
  font-size: 16px !important;
  letter-spacing: 0.3px !important;
  gap: 8px !important;
  align-items: center !important;
  justify-content: center !important;
}

/* Stabiliser les enfants des boutons popup */
.fiche-popup .button > *,
.fiche-popup .button:hover > *,
.fiche-popup .button:focus > * {
  transform: translateZ(0) !important;
  backface-visibility: hidden !important;
  will-change: filter !important;
  position: relative !important;
  flex-shrink: 0 !important;
}

/* Stabiliser le texte et SVG dans les boutons popup */
.fiche-popup .button span,
.fiche-popup .button:hover span,
.fiche-popup .button:focus span,
.fiche-popup .button:active span {
  display: inline-block !important;
  transform: translateZ(0) !important;
  position: relative !important;
  top: 0 !important;
  left: 0 !important;
  backface-visibility: hidden !important;
  -webkit-font-smoothing: antialiased !important;
  -moz-osx-font-smoothing: grayscale !important;
  text-rendering: geometricPrecision !important;
  font-weight: inherit !important;
  font-size: inherit !important;
  letter-spacing: inherit !important;
  line-height: 1 !important;
  will-change: filter !important;
}

.fiche-popup .button svg,
.fiche-popup .button:hover svg,
.fiche-popup .button:focus svg,
.fiche-popup .button:active svg {
  transform: translateZ(0) !important;
  width: 1em !important;
  height: 1em !important;
  backface-visibility: hidden !important;
}

/* Pas de pseudo-éléments qui pourraient causer des décalages */
.fiche-popup .button::before,
.fiche-popup .button::after,
.fiche-popup .button:hover::before,
.fiche-popup .button:hover::after {
  content: none !important;
}

/* Bouton favoris dans popup - même stabilité */
.fiche-popup .button.fav-primary,
.fiche-popup .button.fav-primary:hover,
.fiche-popup .button.fav-primary:focus,
.fiche-popup .button.fav-primary:active {
  transform: translateZ(0) !important;
  position: relative !important;
  top: 0 !important;
  left: 0 !important;
}
