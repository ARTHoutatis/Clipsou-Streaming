<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#0b1117">
  <!-- Maintenance mode check -->
  <script src="maintenance-check.js"></script>
  <title>Fiche – Clipsou Streaming</title>
  <meta name="description" content="Fiche du film ou de la série – Clipsou Streaming">
  <link rel="icon" href="images/favicon.webp" type="image/webp">
  <link rel="apple-touch-icon" href="images/favicon.webp">
  <meta name="robots" content="index, follow, max-image-preview:large">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- DNS prefetch for external domains used by links/embeds -->
  <link rel="dns-prefetch" href="//www.youtube.com">
  <link rel="dns-prefetch" href="//youtu.be">
  <link rel="dns-prefetch" href="//res.cloudinary.com">
  <link rel="dns-prefetch" href="//discord.gg">
  <link rel="dns-prefetch" href="//fr.tipeee.com">
  <!-- Optional preconnects (kept light) -->
  <link rel="preconnect" href="https://www.youtube.com">
  <link rel="preconnect" href="https://youtu.be">
  <link rel="preconnect" href="https://res.cloudinary.com" crossorigin>
  <!-- Preload critical CSS to speed up first paint (keep stylesheets below) -->
  <link rel="preload" as="style" href="common.css?v=20250929-1">
  <link rel="preload" as="style" href="index.css?v=20250929-1">
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=Baloo+2:wght@700;800&family=Bevan:ital@0;1&family=Cinzel:wght@700&family=Luckiest+Guy&family=Rye&family=Shrikhand&family=VT323&display=swap" rel="stylesheet">
  <!-- Base UI font: Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="common.css?v=20250929-1">
  <link rel="stylesheet" href="index.css?v=20250929-1">
  <script src="utilities.js?v=20250929-1"></script>
  <style>
    /* Prevent card clipping on fiche page */
    .grid,
    #fiche .section,
    #fiche .fiche-content { overflow: visible !important; }
    /* Allow rails to scroll horizontally */
    .section .rail {
      overflow-x: auto;
      overflow-y: visible;
    }
    .card:hover,
    .card:focus-within,
    .card:active { z-index: 50; }
    /* Keep fades and arrows above cards on fiche page */
    #fiche .section .rail-fade { z-index: 65 !important; }
    #fiche .section .rail-arrow { z-index: 70 !important; }
    
    /* MOBILE: align fiche rails with index/search behavior */
    @media (max-width: 768px) {
      #fiche .section .rail {
        overflow-x: auto !important;
        overflow-y: visible !important;
        -webkit-overflow-scrolling: touch !important;
        scroll-snap-type: x proximity !important;
        touch-action: pan-x pan-y !important;
      }
      #fiche .section {
        overflow: visible !important;
      }
    }
    /* Hide "Clipsou Streaming" text in nav on mobile, keep logo only */
    @media (max-width: 768px) {
      .logo a span { display: none !important; }
    }
    /* Image optimization: prevent layout shift and add smooth loading */
    img {
      display: block;
    }
    img[data-src]:not([src]) {
      background: linear-gradient(90deg, rgba(255,255,255,0.03) 0%, rgba(255,255,255,0.06) 50%, rgba(255,255,255,0.03) 100%);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
    }
    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
    /* Smooth fade-in when images load */
    img[data-src] {
      opacity: 0;
      transition: opacity 0.3s ease-in-out;
    }
    img[data-src].loaded {
      opacity: 1;
    }
    .card-media img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  </style>
  <!-- Prefetch likely next pages/assets to improve navigation latency -->
  <link rel="prefetch" href="search.html" as="document">
  <link rel="prefetch" href="search.css?v=20250912-2" as="style">
  <link rel="prefetch" href="search.js?v=20250912-2" as="script">
</head>
<body class="fiche-page-view">
  <nav aria-label="Navigation principale">
    <div class="logo">
      <a href="./" aria-label="Accueil Clipsou Streaming" style="text-decoration:none; color:inherit; display:flex; align-items:center; gap:8px">
        <img src="images/favicon.webp" alt="Logo Clipsou" width="35" height="35" fetchpriority="high" decoding="async">
        <span>Clipsou</span>
        <span>Streaming</span>
      </a>
      <a href="./" class="home-link">Accueil</a>
    </div>
    <div class="nav-links">
      <a href="search.html" class="search-link">Recherche</a>
    </div>
  </nav>

  <main id="contenu" tabindex="-1">
    <div id="fiche" class="fiche-page">
      <div id="fiche-container" class="fiche-content landscape-layout" aria-live="polite"></div>
    </div>
  </main>

  <script>
    // Local dev helper: make Accueil links point to index.html when served as file:// or localhost
    (function(){
      var isLocal = location.protocol === 'file:' || location.hostname === 'localhost' || location.hostname === '127.0.0.1';
      if (!isLocal) return;
      function fixHomeLinks(){
        try {
          document.querySelectorAll('nav .logo > a[aria-label], nav .home-link')
            .forEach(function(a){ a.setAttribute('href','index.html'); });
        } catch(e) {}
      }
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', fixHomeLinks);
      } else {
        fixHomeLinks();
      }
    })();
  </script>
  <script src="fiche.js?v=20250916-1" defer></script>
</body>
</html>
